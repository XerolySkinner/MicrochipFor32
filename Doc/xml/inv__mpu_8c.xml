<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.5" xml:lang="zh">
  <compounddef id="inv__mpu_8c" kind="file" language="C++">
    <compoundname>inv_mpu.c</compoundname>
    <includes local="no">stdio.h</includes>
    <includes local="no">stdlib.h</includes>
    <includes local="no">string.h</includes>
    <includes local="no">math.h</includes>
    <includes refid="inv__mpu_8h" local="yes">inv_mpu.h</includes>
    <includes refid="inv__mpu__dmp__motion__driver_8h" local="yes">inv_mpu_dmp_motion_driver.h</includes>
    <includes refid="mpu6050_8h" local="yes">mpu6050.h</includes>
    <includes local="yes">usart.h</includes>
    <includes refid="varint_8h" local="yes">varint.h</includes>
    <incdepgraph>
      <node id="8">
        <label>varint.h</label>
        <link refid="varint_8h"/>
        <childnode refid="9" relation="include">
        </childnode>
      </node>
      <node id="1">
        <label>D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c</label>
        <link refid="inv__mpu_8c"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
      </node>
      <node id="6">
        <label>inv_mpu.h</label>
        <link refid="inv__mpu_8h"/>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
      </node>
      <node id="10">
        <label>inv_mpu_dmp_motion_driver.h</label>
        <link refid="inv__mpu__dmp__motion__driver_8h"/>
      </node>
      <node id="11">
        <label>mpu6050.h</label>
        <link refid="mpu6050_8h"/>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
      </node>
      <node id="7">
        <label>main.h</label>
      </node>
      <node id="5">
        <label>math.h</label>
      </node>
      <node id="9">
        <label>stdint.h</label>
      </node>
      <node id="2">
        <label>stdio.h</label>
      </node>
      <node id="3">
        <label>stdlib.h</label>
      </node>
      <node id="4">
        <label>string.h</label>
      </node>
      <node id="12">
        <label>usart.h</label>
      </node>
    </incdepgraph>
    <innerclass refid="structgyro__reg__s" prot="public">gyro_reg_s</innerclass>
    <innerclass refid="structhw__s" prot="public">hw_s</innerclass>
    <innerclass refid="structmotion__int__cache__s" prot="public">motion_int_cache_s</innerclass>
    <innerclass refid="structchip__cfg__s" prot="public">chip_cfg_s</innerclass>
    <innerclass refid="structtest__s" prot="public">test_s</innerclass>
    <innerclass refid="structgyro__state__s" prot="public">gyro_state_s</innerclass>
      <sectiondef kind="define">
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga6d132f914f18cb144a0eaf36312045c8" prot="public" static="no">
        <name>MPU6050</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="30" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="30" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gaf5aa4c072d42b67d74043f642b68ddd7" prot="public" static="no">
        <name>MOTION_DRIVER_TARGET_MSP430</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="31" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="31" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" prot="public" static="no">
        <name>i2c_write</name>
        <initializer><ref refid="mpu6050_8cpp_1a59b1c26b234be88e97435a1b3c061330" kindref="member">MPU_Write_Len</ref></initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="47" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="47" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" prot="public" static="no">
        <name>i2c_read</name>
        <initializer><ref refid="mpu6050_8cpp_1a63161fa966899e4e7c5791e40ebf2b0a" kindref="member">MPU_Read_Len</ref></initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="48" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="48" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" prot="public" static="no">
        <name>delay_ms</name>
        <initializer>HAL_Delay</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="49" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="49" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga3e6b6bc6d1cd2956353a31bfadd3c332" prot="public" static="no">
        <name>get_ms</name>
        <initializer><ref refid="group___d_r_i_v_e_r_s_1gafa3071c8321f6e8dd2036be8a1e57ad0" kindref="member">mget_ms</ref></initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="50" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="50" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga2905fba7885cd95057e1655cb4d16bda" prot="public" static="no">
        <name>log_i</name>
        <initializer><ref refid="group___d_r_i_v_e_r_s_1ga69f90a1116c37ff659a096f2932c3988" kindref="member">log_none</ref></initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="57" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="57" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gab354affc295f7d61fe8a355c9361cc5a" prot="public" static="no">
        <name>log_e</name>
        <initializer><ref refid="group___d_r_i_v_e_r_s_1ga69f90a1116c37ff659a096f2932c3988" kindref="member">log_none</ref></initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="58" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="58" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga95bcc5f260df5ce993730008a1dcb45a" prot="public" static="no">
        <name>fabs</name>
        <initializer>fabsf</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="61" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="61" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gac6afabdc09a49a433ee19d8a9486056d" prot="public" static="no">
        <name>min</name>
        <param><defname>a</defname></param>
        <param><defname>b</defname></param>
        <initializer>((a&lt;b)?a:b)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="62" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="62" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gac52d7caf4efc485ef6faa1211bfe60dc" prot="public" static="no">
        <name>BIT_I2C_MST_VDDIO</name>
        <initializer>(0x80)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="367" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="367" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gae3c4a18accb84992faaf2534a84a147c" prot="public" static="no">
        <name>BIT_FIFO_EN</name>
        <initializer>(0x40)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="368" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="368" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga02c3e9ddd63128f1c3cf50bf1e9b5fe6" prot="public" static="no">
        <name>BIT_DMP_EN</name>
        <initializer>(0x80)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="369" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="369" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gaeae2cc64314ad05f3a93d2358a2369db" prot="public" static="no">
        <name>BIT_FIFO_RST</name>
        <initializer>(0x04)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="370" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="370" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga37d5ceb74c3568e4bab6dcdd0afaa95b" prot="public" static="no">
        <name>BIT_DMP_RST</name>
        <initializer>(0x08)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="371" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="371" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gafb9b49ce5dd973b3c29ae72680924fa7" prot="public" static="no">
        <name>BIT_FIFO_OVERFLOW</name>
        <initializer>(0x10)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="372" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="372" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga45eec9dbc46778c356703dcf90b9e0c3" prot="public" static="no">
        <name>BIT_DATA_RDY_EN</name>
        <initializer>(0x01)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="373" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="373" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga4dc5309ed09fc683d8e5a247feaad69d" prot="public" static="no">
        <name>BIT_DMP_INT_EN</name>
        <initializer>(0x02)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="374" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="374" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga6a8f2f7f3dd17bc05d9c6286d15c7ada" prot="public" static="no">
        <name>BIT_MOT_INT_EN</name>
        <initializer>(0x40)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="375" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="375" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga2d9aff1be96b1fc021ca96f251c3e72b" prot="public" static="no">
        <name>BITS_FSR</name>
        <initializer>(0x18)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="376" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="376" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga4d83411e736da86163a61828816a200a" prot="public" static="no">
        <name>BITS_LPF</name>
        <initializer>(0x07)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="377" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="377" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga3c9c0234d4a71c9d35bb0da64ea867eb" prot="public" static="no">
        <name>BITS_HPF</name>
        <initializer>(0x07)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="378" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="378" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga1823f90ac353cf4cde25d297a8627dd4" prot="public" static="no">
        <name>BITS_CLK</name>
        <initializer>(0x07)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="379" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="379" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga3769fd3fa71deaef1e77ce14c26f679d" prot="public" static="no">
        <name>BIT_FIFO_SIZE_1024</name>
        <initializer>(0x40)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="380" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="380" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga0fa95b278851b0c05a9995f65ba2b895" prot="public" static="no">
        <name>BIT_FIFO_SIZE_2048</name>
        <initializer>(0x80)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="381" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="381" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gac067df9d789eaae04585abfc5ffdb2b6" prot="public" static="no">
        <name>BIT_FIFO_SIZE_4096</name>
        <initializer>(0xC0)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="382" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="382" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gaf4ce49fd1fc9b1461b5241f9ef4812f4" prot="public" static="no">
        <name>BIT_RESET</name>
        <initializer>(0x80)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="383" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="383" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga1fed8bd436e9b7dfccb1cae99ca89103" prot="public" static="no">
        <name>BIT_SLEEP</name>
        <initializer>(0x40)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="384" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="384" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gac4b33689dd697c1cf2411638a017c009" prot="public" static="no">
        <name>BIT_S0_DELAY_EN</name>
        <initializer>(0x01)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="385" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="385" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga22e4452fe8abca7fe12a2dc45194e6df" prot="public" static="no">
        <name>BIT_S2_DELAY_EN</name>
        <initializer>(0x04)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="386" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="386" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gabc5c2ee59baeb02a0f761740466f3c28" prot="public" static="no">
        <name>BITS_SLAVE_LENGTH</name>
        <initializer>(0x0F)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="387" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="387" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga5e8f3ccff1b3eeb95a938b207ca873ff" prot="public" static="no">
        <name>BIT_SLAVE_BYTE_SW</name>
        <initializer>(0x40)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="388" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="388" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gaf616c3ecf97ffd7bde444f0b74e7453e" prot="public" static="no">
        <name>BIT_SLAVE_GROUP</name>
        <initializer>(0x10)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="389" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="389" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gae9440f48b6d70d900366dc040a8714d7" prot="public" static="no">
        <name>BIT_SLAVE_EN</name>
        <initializer>(0x80)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="390" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="390" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga8ef1963ec6fb3df5586e50959cf00a70" prot="public" static="no">
        <name>BIT_I2C_READ</name>
        <initializer>(0x80)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="391" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="391" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gab470b625fa05ff228b3fdb94802b1c0d" prot="public" static="no">
        <name>BITS_I2C_MASTER_DLY</name>
        <initializer>(0x1F)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="392" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="392" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gabcdedbd3098140aa14ad17bcaca8e176" prot="public" static="no">
        <name>BIT_AUX_IF_EN</name>
        <initializer>(0x20)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="393" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="393" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga8467782bedc44051c95643e303543655" prot="public" static="no">
        <name>BIT_ACTL</name>
        <initializer>(0x80)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="394" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="394" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga588b5a95724c4a68c6868faa78fd3a7f" prot="public" static="no">
        <name>BIT_LATCH_EN</name>
        <initializer>(0x20)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="395" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="395" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga1f50796ca0363292d9ac9cc1d29d9225" prot="public" static="no">
        <name>BIT_ANY_RD_CLR</name>
        <initializer>(0x10)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="396" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="396" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gadd12a8d89e1a4c4e008b12a96dd4c75d" prot="public" static="no">
        <name>BIT_BYPASS_EN</name>
        <initializer>(0x02)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="397" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="397" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga75b1479e451b747afb3b24cbc4df99f7" prot="public" static="no">
        <name>BITS_WOM_EN</name>
        <initializer>(0xC0)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="398" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="398" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga63e6f23af37626aa1498d8c248f259e7" prot="public" static="no">
        <name>BIT_LPA_CYCLE</name>
        <initializer>(0x20)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="399" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="399" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gacfc46ee2ea036d16b3df45c8fb241b5b" prot="public" static="no">
        <name>BIT_STBY_XA</name>
        <initializer>(0x20)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="400" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="400" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga49e6d38569bfc4b58ccc45dbb19001fa" prot="public" static="no">
        <name>BIT_STBY_YA</name>
        <initializer>(0x10)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="401" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="401" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gafac8114288bae2db7ea7dbf0f6fb755c" prot="public" static="no">
        <name>BIT_STBY_ZA</name>
        <initializer>(0x08)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="402" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="402" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga82256fedeffe5b2443ab3ae34cf032d9" prot="public" static="no">
        <name>BIT_STBY_XG</name>
        <initializer>(0x04)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="403" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="403" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1gabf1c0a844906a5e887a659971a4af417" prot="public" static="no">
        <name>BIT_STBY_YG</name>
        <initializer>(0x02)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="404" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="404" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga30967a4efdf3c3f1e39814e72a4168b0" prot="public" static="no">
        <name>BIT_STBY_ZG</name>
        <initializer>(0x01)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="405" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="405" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga04a57159e34387dafe9b86b171c4654c" prot="public" static="no">
        <name>BIT_STBY_XYZA</name>
        <initializer>(<ref refid="group___d_r_i_v_e_r_s_1gacfc46ee2ea036d16b3df45c8fb241b5b" kindref="member">BIT_STBY_XA</ref> | <ref refid="group___d_r_i_v_e_r_s_1ga49e6d38569bfc4b58ccc45dbb19001fa" kindref="member">BIT_STBY_YA</ref> | <ref refid="group___d_r_i_v_e_r_s_1gafac8114288bae2db7ea7dbf0f6fb755c" kindref="member">BIT_STBY_ZA</ref>)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="406" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="406" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga4e2ef22b94b90f9b83394dfe1f688ce4" prot="public" static="no">
        <name>BIT_STBY_XYZG</name>
        <initializer>(<ref refid="group___d_r_i_v_e_r_s_1ga82256fedeffe5b2443ab3ae34cf032d9" kindref="member">BIT_STBY_XG</ref> | <ref refid="group___d_r_i_v_e_r_s_1gabf1c0a844906a5e887a659971a4af417" kindref="member">BIT_STBY_YG</ref> | <ref refid="group___d_r_i_v_e_r_s_1ga30967a4efdf3c3f1e39814e72a4168b0" kindref="member">BIT_STBY_ZG</ref>)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="407" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="407" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga973c680573b37fc359fc68d0707da355" prot="public" static="no">
        <name>MAX_PACKET_LENGTH</name>
        <initializer>(12)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="667" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="667" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="inv__mpu_8c_1a7750730ae7e5c713b619e347d44185fe" prot="public" static="no">
        <name>LOAD_CHUNK</name>
        <initializer>(16)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2342" column="9"/>
      </memberdef>
      <memberdef kind="define" id="group___d_r_i_v_e_r_s_1ga0c2ff73765f99e113d4f99826f9601e5" prot="public" static="no">
        <name>q30</name>
        <initializer>1073741824.0f</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2865" column="9" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2865" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="enum">
      <memberdef kind="enum" id="group___d_r_i_v_e_r_s_1ga91c762a5bd71461f7911dc49ee7696e9" prot="public" static="no" strong="no">
        <type></type>
        <name>lpf_e</name>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a9f0263fbbdccd3c5a18fcb65be278d24" prot="public">
          <name>INV_FILTER_256HZ_NOLPF2</name>
          <initializer>= 0</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9ab58e52e0b6be4cbaf0c7f32705a9fcec" prot="public">
          <name>INV_FILTER_188HZ</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a0f288da0c97b325a6cb57f1223f0cf98" prot="public">
          <name>INV_FILTER_98HZ</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a995b18a52a5bd919aa9c1411a2292110" prot="public">
          <name>INV_FILTER_42HZ</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9aebecb86604e475ed8e2cb68340010ff1" prot="public">
          <name>INV_FILTER_20HZ</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a327619f406c6b2f6a221793881013508" prot="public">
          <name>INV_FILTER_10HZ</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9abdaaf85666fd6a490ee01dcd8a315678" prot="public">
          <name>INV_FILTER_5HZ</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a76de97a6c2f8eb3c5d1a73d717513f5d" prot="public">
          <name>INV_FILTER_2100HZ_NOLPF</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a053f39f04904f6103090bcba3002c4a3" prot="public">
          <name>NUM_FILTER</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="307" column="1" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="307" bodyend="317"/>
      </memberdef>
      <memberdef kind="enum" id="group___d_r_i_v_e_r_s_1ga83acdc0eb37e8bfe0c2ae2348ded0a90" prot="public" static="no" strong="no">
        <type></type>
        <name>gyro_fsr_e</name>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a5b8251a49db5cb8a676076b0b308ae35" prot="public">
          <name>INV_FSR_250DPS</name>
          <initializer>= 0</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a50901470ff389927fd010081e2b8fd09" prot="public">
          <name>INV_FSR_500DPS</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90aee922e0daa4fbb404c3db6c49d897a13" prot="public">
          <name>INV_FSR_1000DPS</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90ac0c37efc1c8acd6f70c0c5a768e5b8be" prot="public">
          <name>INV_FSR_2000DPS</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90ab50b300433c5bc3cbc7ae8adb980c815" prot="public">
          <name>NUM_GYRO_FSR</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="320" column="1" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="320" bodyend="326"/>
      </memberdef>
      <memberdef kind="enum" id="group___d_r_i_v_e_r_s_1gaec8501b935143099e5f729dee221a81e" prot="public" static="no" strong="no">
        <type></type>
        <name>accel_fsr_e</name>
        <enumvalue id="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eae27c6f69463dab7de81fac0c51ff8aa7" prot="public">
          <name>INV_FSR_2G</name>
          <initializer>= 0</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eaa91e3a89d0bbd01149fe71148595be6d" prot="public">
          <name>INV_FSR_4G</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea0a40371bdda397d234c53d0ee2f3be8b" prot="public">
          <name>INV_FSR_8G</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea6712e8563c97c11b458ef721d4f5f9d5" prot="public">
          <name>INV_FSR_16G</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea6d466b2f73b176f1dfc8a3f94ae8a4df" prot="public">
          <name>NUM_ACCEL_FSR</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="329" column="1" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="329" bodyend="335"/>
      </memberdef>
      <memberdef kind="enum" id="group___d_r_i_v_e_r_s_1ga75570f009627c6f4ddfb2d936d81e207" prot="public" static="no" strong="no">
        <type></type>
        <name>clock_sel_e</name>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga75570f009627c6f4ddfb2d936d81e207a92059acf8d0ff5b7e12580c15f88466f" prot="public">
          <name>INV_CLK_INTERNAL</name>
          <initializer>= 0</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga75570f009627c6f4ddfb2d936d81e207a01b240917a78674d3e387110a6a8f94c" prot="public">
          <name>INV_CLK_PLL</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga75570f009627c6f4ddfb2d936d81e207a7f075b0360037232fdf24f90de7be1d7" prot="public">
          <name>NUM_CLK</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="338" column="1" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="338" bodyend="342"/>
      </memberdef>
      <memberdef kind="enum" id="group___d_r_i_v_e_r_s_1ga23c3fcde795e5aa2b141232d490c9ca7" prot="public" static="no" strong="no">
        <type></type>
        <name>lp_accel_rate_e</name>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7ab44c7d0127a9466747853533a537b567" prot="public">
          <name>INV_LPA_1_25HZ</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a474cac76bff369dd656cc973207a1ca5" prot="public">
          <name>INV_LPA_5HZ</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7accaaf47c58dfe32cbf2ffa11fdb83108" prot="public">
          <name>INV_LPA_20HZ</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a798d2b86eafcf3fc7c7fe775f46cb4cb" prot="public">
          <name>INV_LPA_40HZ</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="345" column="1" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="345" bodyend="365"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="var">
      <memberdef kind="variable" id="group___d_r_i_v_e_r_s_1ga5448c351fc95ff052b110eee80e5f75c" prot="public" static="no" mutable="no">
        <type>const struct <ref refid="structgyro__reg__s" kindref="compound">gyro_reg_s</ref></type>
        <definition>const struct gyro_reg_s reg</definition>
        <argsstring></argsstring>
        <name>reg</name>
        <initializer>= {
0x75,  
0x19,  
0x1A,  
0x0C,  
0x6A,  
0x23,  
0x1B,  
0x1C,  
0x1F,  
0x20,  
0x72,  
0x74,  
0x43,  
0x3B,  
0x41,  
0x38,  
0x39,  
0x3A,  
0x6B,  
0x6C,  
0x37,  
0x6F,  
0x06,  
0x24,  
0x6D,  
0x6E,  
0x70   
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="489" column="23" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="489" bodyend="-1"/>
        <referencedby refid="mpu6050_8cpp_1a17c11d19a2bb21d61610f08cb2cbe2f7" compoundref="mpu6050_8cpp" startline="187" endline="188">MPU_Read_Byte</referencedby>
        <referencedby refid="mpu6050_8cpp_1a63161fa966899e4e7c5791e40ebf2b0a" compoundref="mpu6050_8cpp" startline="168" endline="170">MPU_Read_Len</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga5c35a3363337014e11769a0ea7c0dfa9" compoundref="inv__mpu_8c" startline="735" endline="742">mpu_read_reg</referencedby>
        <referencedby refid="mpu6050_8cpp_1a0be9b422bb8613f8444db4af5234e1a1" compoundref="mpu6050_8cpp" startline="178" endline="180">MPU_Write_Byte</referencedby>
        <referencedby refid="mpu6050_8cpp_1a59b1c26b234be88e97435a1b3c061330" compoundref="mpu6050_8cpp" startline="156" endline="158">MPU_Write_Len</referencedby>
      </memberdef>
      <memberdef kind="variable" id="group___d_r_i_v_e_r_s_1ga7fefd0bb47e09b7e39e25e9795cd7edc" prot="public" static="no" mutable="no">
        <type>const struct <ref refid="structhw__s" kindref="compound">hw_s</ref></type>
        <definition>const struct hw_s hw</definition>
        <argsstring></argsstring>
        <name>hw</name>
        <initializer>={
  0x68,	 
  1024,	 
  118,	 
  340,	 
  -521,	 
  256	 
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="530" column="17" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="530" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" prot="public" static="no" mutable="no">
        <type>const struct <ref refid="structtest__s" kindref="compound">test_s</ref></type>
        <definition>const struct test_s test</definition>
        <argsstring></argsstring>
        <name>test</name>
        <initializer>={
32768/250,		 
32768/16,		 
0,				 
1,				
0,				 
0x18,			
50,				
5,				
10.0f,			 
105.0f,			 
0.14f,			
0.3f,		   
0.95f,		   
0.14f		   
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="555" column="19" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="555" bodyend="-1"/>
        <referencedby refid="group___d_r_i_v_e_r_s_1gaab48ddb3bd05cea3f0fc85a68db9934d" compoundref="inv__mpu_8c" startline="1925" endline="1943">accel_self_test</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga8d087842b07e9710be2267adea4b497a" compoundref="inv__mpu_8c" startline="2029" endline="2147">get_st_biases</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga267d6f443d5be8b2a7a06aa007116f7a" compoundref="inv__mpu_8c" startline="1945" endline="1972">gyro_self_test</referencedby>
      </memberdef>
      <memberdef kind="variable" id="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" prot="public" static="yes" mutable="no">
        <type>struct <ref refid="structgyro__state__s" kindref="compound">gyro_state_s</ref></type>
        <definition>struct gyro_state_s st</definition>
        <argsstring></argsstring>
        <name>st</name>
        <initializer>={
  &amp;<ref refid="group___d_r_i_v_e_r_s_1ga5448c351fc95ff052b110eee80e5f75c" kindref="member">reg</ref>,
  &amp;<ref refid="group___d_r_i_v_e_r_s_1ga7fefd0bb47e09b7e39e25e9795cd7edc" kindref="member">hw</ref>,
  {0},
  &amp;<ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="577" column="26" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="577" bodyend="-1"/>
        <referencedby refid="group___d_r_i_v_e_r_s_1gab7ebbe13328466605a20f6ce1a106de8" compoundref="inv__mpu_8c" startline="1900" endline="1923">get_accel_prod_shift</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga8d087842b07e9710be2267adea4b497a" compoundref="inv__mpu_8c" startline="2029" endline="2147">get_st_biases</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga267d6f443d5be8b2a7a06aa007116f7a" compoundref="inv__mpu_8c" startline="1945" endline="1972">gyro_self_test</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gababbdda287e1f19323489f90a0889dd7" compoundref="inv__mpu_8c" startline="1531" endline="1566">mpu_configure_fifo</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gab6087a15ee23db23b6aec41590329a60" compoundref="inv__mpu_8c" startline="1218" endline="1239">mpu_get_accel_fsr</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gae4ae960e5df78049ece2647772a3d809" compoundref="inv__mpu_8c" startline="995" endline="1010">mpu_get_accel_reg</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga620408949052b96e856cad920f856583" compoundref="inv__mpu_8c" startline="1484" endline="1505">mpu_get_accel_sens</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gade8589573d09e0f14b84130428f286df" compoundref="inv__mpu_8c" startline="2588" endline="2596">mpu_get_compass_fsr</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga65e6b0ce980b8c0255d7be9b55c88c08" compoundref="inv__mpu_8c" startline="2535" endline="2581">mpu_get_compass_reg</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gab5a45cd7783f6937788c0decb0b18b16" compoundref="inv__mpu_8c" startline="1414" endline="1423">mpu_get_compass_sample_rate</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gafe0f60ed0d7f8fd2dcd55d45b95a2363" compoundref="inv__mpu_8c" startline="2416" endline="2420">mpu_get_dmp_state</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga093f11eb10b2639a4b9fe344ea348c54" compoundref="inv__mpu_8c" startline="1516" endline="1520">mpu_get_fifo_config</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gaf973c32c73ba912ff512aab948fc31ca" compoundref="inv__mpu_8c" startline="1154" endline="1174">mpu_get_gyro_fsr</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga5555854590ad11495c0e30401294bae2" compoundref="inv__mpu_8c" startline="972" endline="987">mpu_get_gyro_reg</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga023c0cc94aa8f162dc33b15048a49421" compoundref="inv__mpu_8c" startline="1458" endline="1477">mpu_get_gyro_sens</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga0afd02d8c76d3278b488ef7038c26e3e" compoundref="inv__mpu_8c" startline="1669" endline="1678">mpu_get_int_status</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gaa95c7e216dcb2d888e9796001ca555f8" compoundref="inv__mpu_8c" startline="1283" endline="1311">mpu_get_lpf</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gaec8fa7a067988d174516bb735a4a0bc9" compoundref="inv__mpu_8c" startline="1573" endline="1580">mpu_get_power_state</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga2487dd551b701c1c7ed4d6335f02b2f1" compoundref="inv__mpu_8c" startline="1352" endline="1359">mpu_get_sample_rate</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gaa449b565a157b4b8ca0f491b7ed46018" compoundref="inv__mpu_8c" startline="1018" endline="1034">mpu_get_temperature</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gac48a36b51e23bc4191ec13916bbb9d0b" compoundref="inv__mpu_8c" startline="757" endline="871">mpu_init</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga8fbdfe1a50285d4ab438e29c2efc70f5" compoundref="inv__mpu_8c" startline="2336" endline="2370">mpu_load_firmware</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3a4fea75686ab7d2e68634e81ccac04c" compoundref="inv__mpu_8c" startline="888" endline="964">mpu_lp_accel_mode</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" compoundref="inv__mpu_8c" startline="2642" endline="2848">mpu_lp_motion_interrupt</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga2da20453aafbbba4a0f6fb9fbdd25572" compoundref="inv__mpu_8c" startline="1698" endline="1770">mpu_read_fifo</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga13593044949b460e9f571eb57e9a0788" compoundref="inv__mpu_8c" startline="1779" endline="1810">mpu_read_fifo_stream</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3374bececb6743893c9eab27645c1182" compoundref="inv__mpu_8c" startline="2304" endline="2326">mpu_read_mem</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga5c35a3363337014e11769a0ea7c0dfa9" compoundref="inv__mpu_8c" startline="735" endline="742">mpu_read_reg</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga0e1201ecfd8453f1d89e4299528baaf6" compoundref="inv__mpu_8c" startline="713" endline="726">mpu_reg_dump</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gaf23e9f57c0059be6ec57862f0584de10" compoundref="inv__mpu_8c" startline="1092" endline="1147">mpu_reset_fifo</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" compoundref="inv__mpu_8c" startline="2169" endline="2260">mpu_run_self_test</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga4968cc2ec80f0da0d72436551c81f134" compoundref="inv__mpu_8c" startline="1043" endline="1086">mpu_set_accel_bias</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga2713a96af104cfb2ae8e0ed4c3718119" compoundref="inv__mpu_8c" startline="1246" endline="1276">mpu_set_accel_fsr</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga36f70f38371b48d81094d3b061233e15" compoundref="inv__mpu_8c" startline="1817" endline="1860">mpu_set_bypass</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga78da3828de0ef9d080c4d03e7bc45e7b" compoundref="inv__mpu_8c" startline="1436" endline="1451">mpu_set_compass_sample_rate</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga68ed20e6c9663cd7c50469329af8715f" compoundref="inv__mpu_8c" startline="2377" endline="2409">mpu_set_dmp_state</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gad09e6031c8677adc0b8a39b6deea8e27" compoundref="inv__mpu_8c" startline="1181" endline="1211">mpu_set_gyro_fsr</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga653cb855300bff9285ce4b8dca6a503b" compoundref="inv__mpu_8c" startline="1879" endline="1897">mpu_set_int_latched</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gacc92fb1489ef32a04bcb6b0ebde4d657" compoundref="inv__mpu_8c" startline="1867" endline="1871">mpu_set_int_level</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga5661a9dee25152166769910767a2a93d" compoundref="inv__mpu_8c" startline="1319" endline="1345">mpu_set_lpf</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga0144d666a67a82888b8580002afe8b55" compoundref="inv__mpu_8c" startline="1367" endline="1407">mpu_set_sample_rate</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga6e77e7cc1cf6be5e8fdf617c5b4586d1" compoundref="inv__mpu_8c" startline="1592" endline="1662">mpu_set_sensors</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gafea59910bc3dd30ba3356b1c75213a5f" compoundref="inv__mpu_8c" startline="2271" endline="2293">mpu_write_mem</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gafd5ebff6b0179e1dce0b68c2272cae07" compoundref="inv__mpu_8c" startline="681" endline="707">set_int_enable</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga4764ce0ba4e07a4c774f69ab3b83d1f9" compoundref="inv__mpu_8c" startline="2424" endline="2527">setup_compass</referencedby>
      </memberdef>
      <memberdef kind="variable" id="group___d_r_i_v_e_r_s_1gadcca9e3dfdbc53cc5509fabdaede02b8" prot="public" static="yes" mutable="no">
        <type>signed char</type>
        <definition>signed char gyro_orientation[9]</definition>
        <argsstring>[9]</argsstring>
        <name>gyro_orientation</name>
        <initializer>= { 1, 0, 0,
                                           0, 1, 0,
                                           0, 0, 1}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2868" column="20" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2868" bodyend="-1"/>
        <referencedby refid="group___d_r_i_v_e_r_s_1gafac8fcbf24cfa1b69737e02238580f3a" compoundref="inv__mpu_8c" startline="2937" endline="2963">mpu_dmp_init</referencedby>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga69f90a1116c37ff659a096f2932c3988" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void log_none</definition>
        <argsstring>(char *fmt,...)</argsstring>
        <name>log_none</name>
        <param>
          <type>char *</type>
          <declname>fmt</declname>
        </param>
        <param>
          <type>...</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="56" column="6" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="56" bodyend="56"/>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gafd5ebff6b0179e1dce0b68c2272cae07" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int set_int_enable</definition>
        <argsstring>(unsigned char enable)</argsstring>
        <name>set_int_enable</name>
        <param>
          <type>unsigned char</type>
          <declname>enable</declname>
        </param>
        <briefdescription>
<para>Enable/disable data ready interrupt. If the DMP is on, the DMP interrupt is enabled. Otherwise, the data ready interrupt is used. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">enable</parametername>
</parameternamelist>
<parameterdescription>
<para>1 to enable interrupt. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="681" column="12" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="681" bodyend="707" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" declline="153" declcolumn="12"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga45eec9dbc46778c356703dcf90b9e0c3" compoundref="inv__mpu_8c" startline="373">BIT_DATA_RDY_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4dc5309ed09fc683d8e5a247feaad69d" compoundref="inv__mpu_8c" startline="374">BIT_DMP_INT_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" compoundref="inv__mpu_8c" startline="267">chip_cfg_s::dmp_on</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1ga48b47844d4b0570e60aa6806faa59eae" compoundref="inv__mpu_8c" startline="174">gyro_reg_s::int_enable</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa366c36057f31e6e0d4cf2ca4a1ef52f" compoundref="inv__mpu_8c" startline="249">chip_cfg_s::int_enable</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gababbdda287e1f19323489f90a0889dd7" compoundref="inv__mpu_8c" startline="1531" endline="1566">mpu_configure_fifo</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" compoundref="inv__mpu_8c" startline="2642" endline="2848">mpu_lp_motion_interrupt</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga68ed20e6c9663cd7c50469329af8715f" compoundref="inv__mpu_8c" startline="2377" endline="2409">mpu_set_dmp_state</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga0e1201ecfd8453f1d89e4299528baaf6" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_reg_dump</definition>
        <argsstring>(void)</argsstring>
        <name>mpu_reg_dump</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
<para>Register dump for testing. </para>
        </briefdescription>
        <detaileddescription>
<para><simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="713" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="713" bodyend="726" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="127" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1gacb6763dc5f368ea01ef7c733cea9dab4" compoundref="inv__mpu_8c" startline="170">gyro_reg_s::fifo_r_w</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1ga2905fba7885cd95057e1655cb4d16bda" compoundref="inv__mpu_8c" startline="57">log_i</references>
        <references refid="group___d_r_i_v_e_r_s_1gae17166b43fa12a960c0eced9a3c04bf0" compoundref="inv__mpu_8c" startline="181">gyro_reg_s::mem_r_w</references>
        <references refid="group___d_r_i_v_e_r_s_1ga1039fa66b110194727938cd86be8c3c5" compoundref="inv__mpu_8c" startline="208">hw_s::num_reg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga5c35a3363337014e11769a0ea7c0dfa9" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_read_reg</definition>
        <argsstring>(unsigned char reg, unsigned char *data)</argsstring>
        <name>mpu_read_reg</name>
        <param>
          <type>unsigned char</type>
          <declname>reg</declname>
        </param>
        <param>
          <type>unsigned char *</type>
          <declname>data</declname>
        </param>
        <briefdescription>
<para>Read from a single register. NOTE: The memory and FIFO read/write registers cannot be accessed. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">reg</parametername>
</parameternamelist>
<parameterdescription>
<para>Register address. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="out">data</parametername>
</parameternamelist>
<parameterdescription>
<para>Register data. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="735" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="735" bodyend="742" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="128" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1gacb6763dc5f368ea01ef7c733cea9dab4" compoundref="inv__mpu_8c" startline="170">gyro_reg_s::fifo_r_w</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1gae17166b43fa12a960c0eced9a3c04bf0" compoundref="inv__mpu_8c" startline="181">gyro_reg_s::mem_r_w</references>
        <references refid="group___d_r_i_v_e_r_s_1ga1039fa66b110194727938cd86be8c3c5" compoundref="inv__mpu_8c" startline="208">hw_s::num_reg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga5448c351fc95ff052b110eee80e5f75c" compoundref="inv__mpu_8c" startline="489">reg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gac48a36b51e23bc4191ec13916bbb9d0b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_init</definition>
        <argsstring>(void)</argsstring>
        <name>mpu_init</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
<para>Initialize hardware. Initial configuration:<linebreak/>
Gyro FSR: +/- 2000DPS<linebreak/>
Accel FSR +/- 2G<linebreak/>
DLPF: 42Hz<linebreak/>
FIFO rate: 50Hz<linebreak/>
Clock source: Gyro PLL<linebreak/>
FIFO: Disabled.<linebreak/>
Data ready interrupt: Disabled, active low, unlatched. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">int_param</parametername>
</parameternamelist>
<parameterdescription>
<para>Platform-specific parameters to interrupt API. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="757" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="757" bodyend="871" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="66" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gaf66873be1446ed552812e32d40eced61" compoundref="inv__mpu_8c" startline="238">chip_cfg_s::accel_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1gab72e3cead391dee41f28e041282d743f" compoundref="inv__mpu_8c" startline="256">chip_cfg_s::accel_half</references>
        <references refid="group___d_r_i_v_e_r_s_1gab745dd73e0c3ef01f30f96444358cb89" compoundref="inv__mpu_8c" startline="182">gyro_reg_s::accel_offs</references>
        <references refid="group___d_r_i_v_e_r_s_1ga6f12e54ae8c7f2dd77954f3ab619bbb9" compoundref="inv__mpu_8c" startline="263">chip_cfg_s::active_low_int</references>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3769fd3fa71deaef1e77ce14c26f679d" compoundref="inv__mpu_8c" startline="380">BIT_FIFO_SIZE_1024</references>
        <references refid="group___d_r_i_v_e_r_s_1gaf4ce49fd1fc9b1461b5241f9ef4812f4" compoundref="inv__mpu_8c" startline="383">BIT_RESET</references>
        <references refid="group___d_r_i_v_e_r_s_1ga6d3a962d6435644c7ea68e7d65934636" compoundref="inv__mpu_8c" startline="251">chip_cfg_s::bypass_mode</references>
        <references refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" compoundref="inv__mpu_8c" startline="261">chip_cfg_s::cache</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gab7bd5165d6e62cb0d814cf3401958445" compoundref="inv__mpu_8c" startline="243">chip_cfg_s::clk_src</references>
        <references refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" compoundref="inv__mpu_8c" startline="49">delay_ms</references>
        <references refid="group___d_r_i_v_e_r_s_1ga1d2ff55e17aae1459dfad61d76054b1b" compoundref="inv__mpu_8c" startline="269">chip_cfg_s::dmp_loaded</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" compoundref="inv__mpu_8c" startline="267">chip_cfg_s::dmp_on</references>
        <references refid="group___d_r_i_v_e_r_s_1ga5f42b7e1e740f2fb64427417e9e2dab7" compoundref="inv__mpu_8c" startline="271">chip_cfg_s::dmp_sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" compoundref="inv__mpu_8c" startline="247">chip_cfg_s::fifo_enable</references>
        <references refid="group___d_r_i_v_e_r_s_1gab45a727aeee17380828a3e20ccb375c2" compoundref="inv__mpu_8c" startline="236">chip_cfg_s::gyro_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1ga279cd5d5d78890357f2d42905d7471df" compoundref="inv__mpu_8c" startline="260">chip_cfg_s::int_motion_only</references>
        <references refid="group___d_r_i_v_e_r_s_1gga75570f009627c6f4ddfb2d936d81e207a01b240917a78674d3e387110a6a8f94c" compoundref="inv__mpu_8c" startline="340">INV_CLK_PLL</references>
        <references refid="group___d_r_i_v_e_r_s_1ga55ce40fc460a62829ec149edaccffe7c" compoundref="inv__mpu_8c" startline="265">chip_cfg_s::latched_int</references>
        <references refid="group___d_r_i_v_e_r_s_1gab354affc295f7d61fe8a355c9361cc5a" compoundref="inv__mpu_8c" startline="58">log_e</references>
        <references refid="group___d_r_i_v_e_r_s_1ga2905fba7885cd95057e1655cb4d16bda" compoundref="inv__mpu_8c" startline="57">log_i</references>
        <references refid="group___d_r_i_v_e_r_s_1ga33e138d8a49744eb9b4ea0e9086cef1c" compoundref="inv__mpu_8c" startline="258">chip_cfg_s::lp_accel_mode</references>
        <references refid="group___d_r_i_v_e_r_s_1ga16ec8ca8298f62ac01419775377270fb" compoundref="inv__mpu_8c" startline="242">chip_cfg_s::lpf</references>
        <references refid="group___d_r_i_v_e_r_s_1gababbdda287e1f19323489f90a0889dd7" compoundref="inv__mpu_8c" startline="1531" endline="1566">mpu_configure_fifo</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3374bececb6743893c9eab27645c1182" compoundref="inv__mpu_8c" startline="2304" endline="2326">mpu_read_mem</references>
        <references refid="group___d_r_i_v_e_r_s_1ga2713a96af104cfb2ae8e0ed4c3718119" compoundref="inv__mpu_8c" startline="1246" endline="1276">mpu_set_accel_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga36f70f38371b48d81094d3b061233e15" compoundref="inv__mpu_8c" startline="1817" endline="1860">mpu_set_bypass</references>
        <references refid="group___d_r_i_v_e_r_s_1ga78da3828de0ef9d080c4d03e7bc45e7b" compoundref="inv__mpu_8c" startline="1436" endline="1451">mpu_set_compass_sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1gad09e6031c8677adc0b8a39b6deea8e27" compoundref="inv__mpu_8c" startline="1181" endline="1211">mpu_set_gyro_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga5661a9dee25152166769910767a2a93d" compoundref="inv__mpu_8c" startline="1319" endline="1345">mpu_set_lpf</references>
        <references refid="group___d_r_i_v_e_r_s_1ga0144d666a67a82888b8580002afe8b55" compoundref="inv__mpu_8c" startline="1367" endline="1407">mpu_set_sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1ga6e77e7cc1cf6be5e8fdf617c5b4586d1" compoundref="inv__mpu_8c" startline="1592" endline="1662">mpu_set_sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1gaf418d8a6b0e262df54ab8a6a5228011c" compoundref="inv__mpu_8c" startline="160">gyro_reg_s::prod_id</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa01fb0872030e8e2932f8d1d257ea86a" compoundref="inv__mpu_8c" startline="178">gyro_reg_s::pwr_mgmt_1</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga2660470fcf7b53e2e832a397cbe6c354" compoundref="inv__mpu_8c" startline="245">chip_cfg_s::sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4764ce0ba4e07a4c774f69ab3b83d1f9" compoundref="inv__mpu_8c" startline="2424" endline="2527">setup_compass</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gafac8fcbf24cfa1b69737e02238580f3a" compoundref="inv__mpu_8c" startline="2937" endline="2963">mpu_dmp_init</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga3a4fea75686ab7d2e68634e81ccac04c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_lp_accel_mode</definition>
        <argsstring>(unsigned char rate)</argsstring>
        <name>mpu_lp_accel_mode</name>
        <param>
          <type>unsigned char</type>
          <declname>rate</declname>
        </param>
        <briefdescription>
<para>Enter low-power accel-only mode. In low-power accel mode, the chip goes to sleep and only wakes up to sample the accelerometer at one of the following frequencies: <linebreak/>
 MPU6050: 1.25Hz, 5Hz, 20Hz, 40Hz <linebreak/>
 MPU6500: 1.25Hz, 2.5Hz, 5Hz, 10Hz, 20Hz, 40Hz, 80Hz, 160Hz, 320Hz, 640Hz <linebreak/>
 If the requested rate is not one listed above, the device will be set to the next highest rate. Requesting a rate above the maximum supported frequency will result in an error. <linebreak/>
 To select a fractional wake-up frequency, round down the value passed to <emphasis>rate</emphasis>. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">rate</parametername>
</parameternamelist>
<parameterdescription>
<para>Minimum sampling rate, or zero to disable LP accel mode. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="888" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="888" bodyend="964" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="71" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga63e6f23af37626aa1498d8c248f259e7" compoundref="inv__mpu_8c" startline="399">BIT_LPA_CYCLE</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4e2ef22b94b90f9b83394dfe1f688ce4" compoundref="inv__mpu_8c" startline="407">BIT_STBY_XYZG</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gab7bd5165d6e62cb0d814cf3401958445" compoundref="inv__mpu_8c" startline="243">chip_cfg_s::clk_src</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7ab44c7d0127a9466747853533a537b567" compoundref="inv__mpu_8c" startline="347">INV_LPA_1_25HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7accaaf47c58dfe32cbf2ffa11fdb83108" compoundref="inv__mpu_8c" startline="349">INV_LPA_20HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a798d2b86eafcf3fc7c7fe775f46cb4cb" compoundref="inv__mpu_8c" startline="350">INV_LPA_40HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a474cac76bff369dd656cc973207a1ca5" compoundref="inv__mpu_8c" startline="348">INV_LPA_5HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa03f025a17ed491e70b88274e89c75c5" compoundref="inv__mpu_8h" startline="33">INV_XYZ_ACCEL</references>
        <references refid="group___d_r_i_v_e_r_s_1ga33e138d8a49744eb9b4ea0e9086cef1c" compoundref="inv__mpu_8c" startline="258">chip_cfg_s::lp_accel_mode</references>
        <references refid="group___d_r_i_v_e_r_s_1gababbdda287e1f19323489f90a0889dd7" compoundref="inv__mpu_8c" startline="1531" endline="1566">mpu_configure_fifo</references>
        <references refid="group___d_r_i_v_e_r_s_1ga653cb855300bff9285ce4b8dca6a503b" compoundref="inv__mpu_8c" startline="1879" endline="1897">mpu_set_int_latched</references>
        <references refid="group___d_r_i_v_e_r_s_1ga5661a9dee25152166769910767a2a93d" compoundref="inv__mpu_8c" startline="1319" endline="1345">mpu_set_lpf</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa01fb0872030e8e2932f8d1d257ea86a" compoundref="inv__mpu_8c" startline="178">gyro_reg_s::pwr_mgmt_1</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" compoundref="inv__mpu_8c" startline="2642" endline="2848">mpu_lp_motion_interrupt</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga0144d666a67a82888b8580002afe8b55" compoundref="inv__mpu_8c" startline="1367" endline="1407">mpu_set_sample_rate</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga5555854590ad11495c0e30401294bae2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_get_gyro_reg</definition>
        <argsstring>(short *data, unsigned long *timestamp)</argsstring>
        <name>mpu_get_gyro_reg</name>
        <param>
          <type>short *</type>
          <declname>data</declname>
        </param>
        <param>
          <type>unsigned long *</type>
          <declname>timestamp</declname>
        </param>
        <briefdescription>
<para>Read raw gyro data directly from the registers. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="out">data</parametername>
</parameternamelist>
<parameterdescription>
<para>Raw data in hardware units. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="out">timestamp</parametername>
</parameternamelist>
<parameterdescription>
<para>Timestamp in milliseconds. Null if not needed. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="972" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="972" bodyend="987" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="108" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3e6b6bc6d1cd2956353a31bfadd3c332" compoundref="inv__mpu_8c" startline="50">get_ms</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3fdc30f9c0a26c2c4e2bb88921f91629" compoundref="inv__mpu_8h" startline="32">INV_XYZ_GYRO</references>
        <references refid="group___d_r_i_v_e_r_s_1gab5c2246c44bb36b21596fe5acf7ec0d4" compoundref="inv__mpu_8c" startline="171">gyro_reg_s::raw_gyro</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gae4ae960e5df78049ece2647772a3d809" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_get_accel_reg</definition>
        <argsstring>(short *data, unsigned long *timestamp)</argsstring>
        <name>mpu_get_accel_reg</name>
        <param>
          <type>short *</type>
          <declname>data</declname>
        </param>
        <param>
          <type>unsigned long *</type>
          <declname>timestamp</declname>
        </param>
        <briefdescription>
<para>Read raw accel data directly from the registers. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="out">data</parametername>
</parameternamelist>
<parameterdescription>
<para>Raw data in hardware units. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="out">timestamp</parametername>
</parameternamelist>
<parameterdescription>
<para>Timestamp in milliseconds. Null if not needed. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="995" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="995" bodyend="1010" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="109" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3e6b6bc6d1cd2956353a31bfadd3c332" compoundref="inv__mpu_8c" startline="50">get_ms</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa03f025a17ed491e70b88274e89c75c5" compoundref="inv__mpu_8h" startline="33">INV_XYZ_ACCEL</references>
        <references refid="group___d_r_i_v_e_r_s_1ga9b7c162cea6a3deeaac41444c613b7bc" compoundref="inv__mpu_8c" startline="172">gyro_reg_s::raw_accel</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gaa449b565a157b4b8ca0f491b7ed46018" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_get_temperature</definition>
        <argsstring>(long *data, unsigned long *timestamp)</argsstring>
        <name>mpu_get_temperature</name>
        <param>
          <type>long *</type>
          <declname>data</declname>
        </param>
        <param>
          <type>unsigned long *</type>
          <declname>timestamp</declname>
        </param>
        <briefdescription>
<para>Read temperature data directly from the registers. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="out">data</parametername>
</parameternamelist>
<parameterdescription>
<para>Data in q16 format. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="out">timestamp</parametername>
</parameternamelist>
<parameterdescription>
<para>Timestamp in milliseconds. Null if not needed. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1018" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1018" bodyend="1034" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="111" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3e6b6bc6d1cd2956353a31bfadd3c332" compoundref="inv__mpu_8c" startline="50">get_ms</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <references refid="group___d_r_i_v_e_r_s_1ga47674fab0681811c1b733462944e0233" compoundref="inv__mpu_8c" startline="173">gyro_reg_s::temp</references>
        <references refid="group___d_r_i_v_e_r_s_1ga56f98c91a7c4d60ccea1ade1f3e88d04" compoundref="inv__mpu_8c" startline="210">hw_s::temp_offset</references>
        <references refid="group___d_r_i_v_e_r_s_1gab2397f792a86b32b0957c24e3912bc63" compoundref="inv__mpu_8c" startline="209">hw_s::temp_sens</references>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga4968cc2ec80f0da0d72436551c81f134" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_set_accel_bias</definition>
        <argsstring>(const long *accel_bias)</argsstring>
        <name>mpu_set_accel_bias</name>
        <param>
          <type>const long *</type>
          <declname>accel_bias</declname>
        </param>
        <briefdescription>
<para>Push biases to the accel bias registers. This function expects biases relative to the current sensor output, and these biases will be added to the factory-supplied values. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">accel_bias</parametername>
</parameternamelist>
<parameterdescription>
<para>New biases. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1043" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1043" bodyend="1086" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="105" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gaf23e9f57c0059be6ec57862f0584de10" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_reset_fifo</definition>
        <argsstring>(void)</argsstring>
        <name>mpu_reset_fifo</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
<para>Reset FIFO read/write pointers. </para>
        </briefdescription>
        <detaileddescription>
<para><simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1092" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1092" bodyend="1147" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="118" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1gabcdedbd3098140aa14ad17bcaca8e176" compoundref="inv__mpu_8c" startline="393">BIT_AUX_IF_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1ga45eec9dbc46778c356703dcf90b9e0c3" compoundref="inv__mpu_8c" startline="373">BIT_DATA_RDY_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1ga02c3e9ddd63128f1c3cf50bf1e9b5fe6" compoundref="inv__mpu_8c" startline="369">BIT_DMP_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4dc5309ed09fc683d8e5a247feaad69d" compoundref="inv__mpu_8c" startline="374">BIT_DMP_INT_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1ga37d5ceb74c3568e4bab6dcdd0afaa95b" compoundref="inv__mpu_8c" startline="371">BIT_DMP_RST</references>
        <references refid="group___d_r_i_v_e_r_s_1gae3c4a18accb84992faaf2534a84a147c" compoundref="inv__mpu_8c" startline="368">BIT_FIFO_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1gaeae2cc64314ad05f3a93d2358a2369db" compoundref="inv__mpu_8c" startline="370">BIT_FIFO_RST</references>
        <references refid="group___d_r_i_v_e_r_s_1ga6d3a962d6435644c7ea68e7d65934636" compoundref="inv__mpu_8c" startline="251">chip_cfg_s::bypass_mode</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" compoundref="inv__mpu_8c" startline="49">delay_ms</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" compoundref="inv__mpu_8c" startline="267">chip_cfg_s::dmp_on</references>
        <references refid="group___d_r_i_v_e_r_s_1ga6a392b7ecae843c734db3d832f11af49" compoundref="inv__mpu_8c" startline="162">gyro_reg_s::fifo_en</references>
        <references refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" compoundref="inv__mpu_8c" startline="247">chip_cfg_s::fifo_enable</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1ga48b47844d4b0570e60aa6806faa59eae" compoundref="inv__mpu_8c" startline="174">gyro_reg_s::int_enable</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa366c36057f31e6e0d4cf2ca4a1ef52f" compoundref="inv__mpu_8c" startline="249">chip_cfg_s::int_enable</references>
        <references refid="group___d_r_i_v_e_r_s_1ga7fc9c1dbdcb2ac8cc2a4128a5799482a" compoundref="inv__mpu_8h" startline="34">INV_XYZ_COMPASS</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <references refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" compoundref="inv__mpu_8c" startline="161">gyro_reg_s::user_ctrl</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gaac712ef33727433f666b3861894873be" compoundref="inv__mpu__dmp__motion__driver_8c" startline="1176" endline="1190">dmp_enable_6x_lp_quat</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga70c485bdfa30515e5b869b081192caa1" compoundref="inv__mpu__dmp__motion__driver_8c" startline="997" endline="1112">dmp_enable_feature</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga4ee4339b79a58558d121ba8206056394" compoundref="inv__mpu__dmp__motion__driver_8c" startline="1152" endline="1167">dmp_enable_lp_quat</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga02db5f25359abe84be002c543cdc3803" compoundref="inv__mpu__dmp__motion__driver_8c" startline="1268" endline="1347">dmp_read_fifo</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gababbdda287e1f19323489f90a0889dd7" compoundref="inv__mpu_8c" startline="1531" endline="1566">mpu_configure_fifo</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga2da20453aafbbba4a0f6fb9fbdd25572" compoundref="inv__mpu_8c" startline="1698" endline="1770">mpu_read_fifo</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga13593044949b460e9f571eb57e9a0788" compoundref="inv__mpu_8c" startline="1779" endline="1810">mpu_read_fifo_stream</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga68ed20e6c9663cd7c50469329af8715f" compoundref="inv__mpu_8c" startline="2377" endline="2409">mpu_set_dmp_state</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gaf973c32c73ba912ff512aab948fc31ca" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_get_gyro_fsr</definition>
        <argsstring>(unsigned short *fsr)</argsstring>
        <name>mpu_get_gyro_fsr</name>
        <param>
          <type>unsigned short *</type>
          <declname>fsr</declname>
        </param>
        <briefdescription>
<para>Get the gyro full-scale range. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="out">fsr</parametername>
</parameternamelist>
<parameterdescription>
<para>Current full-scale range. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1154" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1154" bodyend="1174" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="83" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gab45a727aeee17380828a3e20ccb375c2" compoundref="inv__mpu_8c" startline="236">chip_cfg_s::gyro_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90aee922e0daa4fbb404c3db6c49d897a13" compoundref="inv__mpu_8c" startline="323">INV_FSR_1000DPS</references>
        <references refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90ac0c37efc1c8acd6f70c0c5a768e5b8be" compoundref="inv__mpu_8c" startline="324">INV_FSR_2000DPS</references>
        <references refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a5b8251a49db5cb8a676076b0b308ae35" compoundref="inv__mpu_8c" startline="321">INV_FSR_250DPS</references>
        <references refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a50901470ff389927fd010081e2b8fd09" compoundref="inv__mpu_8c" startline="322">INV_FSR_500DPS</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" compoundref="inv__mpu_8c" startline="2642" endline="2848">mpu_lp_motion_interrupt</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" compoundref="inv__mpu_8c" startline="2169" endline="2260">mpu_run_self_test</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gad09e6031c8677adc0b8a39b6deea8e27" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_set_gyro_fsr</definition>
        <argsstring>(unsigned short fsr)</argsstring>
        <name>mpu_set_gyro_fsr</name>
        <param>
          <type>unsigned short</type>
          <declname>fsr</declname>
        </param>
        <briefdescription>
<para>Set the gyro full-scale range. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">fsr</parametername>
</parameternamelist>
<parameterdescription>
<para>Desired full-scale range. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1181" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1181" bodyend="1211" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="84" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gada0b973f74cc874552f079fd58c435a6" compoundref="inv__mpu_8c" startline="163">gyro_reg_s::gyro_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gab45a727aeee17380828a3e20ccb375c2" compoundref="inv__mpu_8c" startline="236">chip_cfg_s::gyro_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90aee922e0daa4fbb404c3db6c49d897a13" compoundref="inv__mpu_8c" startline="323">INV_FSR_1000DPS</references>
        <references refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90ac0c37efc1c8acd6f70c0c5a768e5b8be" compoundref="inv__mpu_8c" startline="324">INV_FSR_2000DPS</references>
        <references refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a5b8251a49db5cb8a676076b0b308ae35" compoundref="inv__mpu_8c" startline="321">INV_FSR_250DPS</references>
        <references refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a50901470ff389927fd010081e2b8fd09" compoundref="inv__mpu_8c" startline="322">INV_FSR_500DPS</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gac48a36b51e23bc4191ec13916bbb9d0b" compoundref="inv__mpu_8c" startline="757" endline="871">mpu_init</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" compoundref="inv__mpu_8c" startline="2642" endline="2848">mpu_lp_motion_interrupt</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" compoundref="inv__mpu_8c" startline="2169" endline="2260">mpu_run_self_test</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gab6087a15ee23db23b6aec41590329a60" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_get_accel_fsr</definition>
        <argsstring>(unsigned char *fsr)</argsstring>
        <name>mpu_get_accel_fsr</name>
        <param>
          <type>unsigned char *</type>
          <declname>fsr</declname>
        </param>
        <briefdescription>
<para>Get the accel full-scale range. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="out">fsr</parametername>
</parameternamelist>
<parameterdescription>
<para>Current full-scale range. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1218" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1218" bodyend="1239" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="86" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gaf66873be1446ed552812e32d40eced61" compoundref="inv__mpu_8c" startline="238">chip_cfg_s::accel_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1gab72e3cead391dee41f28e041282d743f" compoundref="inv__mpu_8c" startline="256">chip_cfg_s::accel_half</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea6712e8563c97c11b458ef721d4f5f9d5" compoundref="inv__mpu_8c" startline="333">INV_FSR_16G</references>
        <references refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eae27c6f69463dab7de81fac0c51ff8aa7" compoundref="inv__mpu_8c" startline="330">INV_FSR_2G</references>
        <references refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eaa91e3a89d0bbd01149fe71148595be6d" compoundref="inv__mpu_8c" startline="331">INV_FSR_4G</references>
        <references refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea0a40371bdda397d234c53d0ee2f3be8b" compoundref="inv__mpu_8c" startline="332">INV_FSR_8G</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga15da67c0a6c94e0cdaceb8b165e13af9" compoundref="inv__mpu__dmp__motion__driver_8c" startline="722" endline="781">dmp_set_tap_thresh</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" compoundref="inv__mpu_8c" startline="2642" endline="2848">mpu_lp_motion_interrupt</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" compoundref="inv__mpu_8c" startline="2169" endline="2260">mpu_run_self_test</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga2713a96af104cfb2ae8e0ed4c3718119" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_set_accel_fsr</definition>
        <argsstring>(unsigned char fsr)</argsstring>
        <name>mpu_set_accel_fsr</name>
        <param>
          <type>unsigned char</type>
          <declname>fsr</declname>
        </param>
        <briefdescription>
<para>Set the accel full-scale range. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">fsr</parametername>
</parameternamelist>
<parameterdescription>
<para>Desired full-scale range. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1246" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1246" bodyend="1276" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="87" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gae93a446c54cc00bc7f11209d7af0025e" compoundref="inv__mpu_8c" startline="164">gyro_reg_s::accel_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaf66873be1446ed552812e32d40eced61" compoundref="inv__mpu_8c" startline="238">chip_cfg_s::accel_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea6712e8563c97c11b458ef721d4f5f9d5" compoundref="inv__mpu_8c" startline="333">INV_FSR_16G</references>
        <references refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eae27c6f69463dab7de81fac0c51ff8aa7" compoundref="inv__mpu_8c" startline="330">INV_FSR_2G</references>
        <references refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eaa91e3a89d0bbd01149fe71148595be6d" compoundref="inv__mpu_8c" startline="331">INV_FSR_4G</references>
        <references refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea0a40371bdda397d234c53d0ee2f3be8b" compoundref="inv__mpu_8c" startline="332">INV_FSR_8G</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gac48a36b51e23bc4191ec13916bbb9d0b" compoundref="inv__mpu_8c" startline="757" endline="871">mpu_init</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" compoundref="inv__mpu_8c" startline="2642" endline="2848">mpu_lp_motion_interrupt</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" compoundref="inv__mpu_8c" startline="2169" endline="2260">mpu_run_self_test</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gaa95c7e216dcb2d888e9796001ca555f8" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_get_lpf</definition>
        <argsstring>(unsigned short *lpf)</argsstring>
        <name>mpu_get_lpf</name>
        <param>
          <type>unsigned short *</type>
          <declname>lpf</declname>
        </param>
        <briefdescription>
<para>Get the current DLPF setting. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="out">lpf</parametername>
</parameternamelist>
<parameterdescription>
<para>Current LPF setting. 0 if successful. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1283" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1283" bodyend="1311" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="80" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a327619f406c6b2f6a221793881013508" compoundref="inv__mpu_8c" startline="313">INV_FILTER_10HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9ab58e52e0b6be4cbaf0c7f32705a9fcec" compoundref="inv__mpu_8c" startline="309">INV_FILTER_188HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9aebecb86604e475ed8e2cb68340010ff1" compoundref="inv__mpu_8c" startline="312">INV_FILTER_20HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a76de97a6c2f8eb3c5d1a73d717513f5d" compoundref="inv__mpu_8c" startline="315">INV_FILTER_2100HZ_NOLPF</references>
        <references refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a9f0263fbbdccd3c5a18fcb65be278d24" compoundref="inv__mpu_8c" startline="308">INV_FILTER_256HZ_NOLPF2</references>
        <references refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a995b18a52a5bd919aa9c1411a2292110" compoundref="inv__mpu_8c" startline="311">INV_FILTER_42HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9abdaaf85666fd6a490ee01dcd8a315678" compoundref="inv__mpu_8c" startline="314">INV_FILTER_5HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a0f288da0c97b325a6cb57f1223f0cf98" compoundref="inv__mpu_8c" startline="310">INV_FILTER_98HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1ga16ec8ca8298f62ac01419775377270fb" compoundref="inv__mpu_8c" startline="242">chip_cfg_s::lpf</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" compoundref="inv__mpu_8c" startline="2642" endline="2848">mpu_lp_motion_interrupt</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" compoundref="inv__mpu_8c" startline="2169" endline="2260">mpu_run_self_test</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga5661a9dee25152166769910767a2a93d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_set_lpf</definition>
        <argsstring>(unsigned short lpf)</argsstring>
        <name>mpu_set_lpf</name>
        <param>
          <type>unsigned short</type>
          <declname>lpf</declname>
        </param>
        <briefdescription>
<para>Set digital low pass filter. The following LPF settings are supported: 188, 98, 42, 20, 10, 5. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">lpf</parametername>
</parameternamelist>
<parameterdescription>
<para>Desired LPF setting. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1319" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1319" bodyend="1345" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="81" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a327619f406c6b2f6a221793881013508" compoundref="inv__mpu_8c" startline="313">INV_FILTER_10HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9ab58e52e0b6be4cbaf0c7f32705a9fcec" compoundref="inv__mpu_8c" startline="309">INV_FILTER_188HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9aebecb86604e475ed8e2cb68340010ff1" compoundref="inv__mpu_8c" startline="312">INV_FILTER_20HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a995b18a52a5bd919aa9c1411a2292110" compoundref="inv__mpu_8c" startline="311">INV_FILTER_42HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9abdaaf85666fd6a490ee01dcd8a315678" compoundref="inv__mpu_8c" startline="314">INV_FILTER_5HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a0f288da0c97b325a6cb57f1223f0cf98" compoundref="inv__mpu_8c" startline="310">INV_FILTER_98HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1ga22eeac0bd77e7d99b3e15dda52f1bd08" compoundref="inv__mpu_8c" startline="159">gyro_reg_s::lpf</references>
        <references refid="group___d_r_i_v_e_r_s_1ga16ec8ca8298f62ac01419775377270fb" compoundref="inv__mpu_8c" startline="242">chip_cfg_s::lpf</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gac48a36b51e23bc4191ec13916bbb9d0b" compoundref="inv__mpu_8c" startline="757" endline="871">mpu_init</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3a4fea75686ab7d2e68634e81ccac04c" compoundref="inv__mpu_8c" startline="888" endline="964">mpu_lp_accel_mode</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" compoundref="inv__mpu_8c" startline="2642" endline="2848">mpu_lp_motion_interrupt</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" compoundref="inv__mpu_8c" startline="2169" endline="2260">mpu_run_self_test</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga0144d666a67a82888b8580002afe8b55" compoundref="inv__mpu_8c" startline="1367" endline="1407">mpu_set_sample_rate</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga2487dd551b701c1c7ed4d6335f02b2f1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_get_sample_rate</definition>
        <argsstring>(unsigned short *rate)</argsstring>
        <name>mpu_get_sample_rate</name>
        <param>
          <type>unsigned short *</type>
          <declname>rate</declname>
        </param>
        <briefdescription>
<para>Get sampling rate. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="out">rate</parametername>
</parameternamelist>
<parameterdescription>
<para>Current sampling rate (Hz). </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1352" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1352" bodyend="1359" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="94" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" compoundref="inv__mpu_8c" startline="267">chip_cfg_s::dmp_on</references>
        <references refid="group___d_r_i_v_e_r_s_1ga2660470fcf7b53e2e832a397cbe6c354" compoundref="inv__mpu_8c" startline="245">chip_cfg_s::sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" compoundref="inv__mpu_8c" startline="2642" endline="2848">mpu_lp_motion_interrupt</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" compoundref="inv__mpu_8c" startline="2169" endline="2260">mpu_run_self_test</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga0144d666a67a82888b8580002afe8b55" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_set_sample_rate</definition>
        <argsstring>(unsigned short rate)</argsstring>
        <name>mpu_set_sample_rate</name>
        <param>
          <type>unsigned short</type>
          <declname>rate</declname>
        </param>
        <briefdescription>
<para>Set sampling rate. Sampling rate must be between 4Hz and 1kHz. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">rate</parametername>
</parameternamelist>
<parameterdescription>
<para>Desired sampling rate (Hz). </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1367" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1367" bodyend="1407" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="95" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" compoundref="inv__mpu_8c" startline="267">chip_cfg_s::dmp_on</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1ga33e138d8a49744eb9b4ea0e9086cef1c" compoundref="inv__mpu_8c" startline="258">chip_cfg_s::lp_accel_mode</references>
        <references refid="group___d_r_i_v_e_r_s_1gac6afabdc09a49a433ee19d8a9486056d" compoundref="inv__mpu_8c" startline="62">min</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3a4fea75686ab7d2e68634e81ccac04c" compoundref="inv__mpu_8c" startline="888" endline="964">mpu_lp_accel_mode</references>
        <references refid="group___d_r_i_v_e_r_s_1ga78da3828de0ef9d080c4d03e7bc45e7b" compoundref="inv__mpu_8c" startline="1436" endline="1451">mpu_set_compass_sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1ga5661a9dee25152166769910767a2a93d" compoundref="inv__mpu_8c" startline="1319" endline="1345">mpu_set_lpf</references>
        <references refid="group___d_r_i_v_e_r_s_1ga27dd9db31f16ca170520b3009255e6d0" compoundref="inv__mpu_8c" startline="158">gyro_reg_s::rate_div</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga2660470fcf7b53e2e832a397cbe6c354" compoundref="inv__mpu_8c" startline="245">chip_cfg_s::sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gafac8fcbf24cfa1b69737e02238580f3a" compoundref="inv__mpu_8c" startline="2937" endline="2963">mpu_dmp_init</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gac48a36b51e23bc4191ec13916bbb9d0b" compoundref="inv__mpu_8c" startline="757" endline="871">mpu_init</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" compoundref="inv__mpu_8c" startline="2642" endline="2848">mpu_lp_motion_interrupt</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" compoundref="inv__mpu_8c" startline="2169" endline="2260">mpu_run_self_test</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga68ed20e6c9663cd7c50469329af8715f" compoundref="inv__mpu_8c" startline="2377" endline="2409">mpu_set_dmp_state</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gab5a45cd7783f6937788c0decb0b18b16" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_get_compass_sample_rate</definition>
        <argsstring>(unsigned short *rate)</argsstring>
        <name>mpu_get_compass_sample_rate</name>
        <param>
          <type>unsigned short *</type>
          <declname>rate</declname>
        </param>
        <briefdescription>
<para>Get compass sampling rate. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="out">rate</parametername>
</parameternamelist>
<parameterdescription>
<para>Current compass sampling rate (Hz). </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1414" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1414" bodyend="1423" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="96" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga78da3828de0ef9d080c4d03e7bc45e7b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_set_compass_sample_rate</definition>
        <argsstring>(unsigned short rate)</argsstring>
        <name>mpu_set_compass_sample_rate</name>
        <param>
          <type>unsigned short</type>
          <declname>rate</declname>
        </param>
        <briefdescription>
<para>Set compass sampling rate. The compass on the auxiliary I2C bus is read by the MPU hardware at a maximum of 100Hz. The actual rate can be set to a fraction of the gyro sampling rate. </para>
        </briefdescription>
        <detaileddescription>
<para><linebreak/>
 WARNING: The new rate may be different than what was requested. Call mpu_get_compass_sample_rate to check the actual setting. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">rate</parametername>
</parameternamelist>
<parameterdescription>
<para>Desired compass sampling rate (Hz). </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1436" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1436" bodyend="1451" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="97" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga2660470fcf7b53e2e832a397cbe6c354" compoundref="inv__mpu_8c" startline="245">chip_cfg_s::sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gac48a36b51e23bc4191ec13916bbb9d0b" compoundref="inv__mpu_8c" startline="757" endline="871">mpu_init</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga0144d666a67a82888b8580002afe8b55" compoundref="inv__mpu_8c" startline="1367" endline="1407">mpu_set_sample_rate</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga023c0cc94aa8f162dc33b15048a49421" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_get_gyro_sens</definition>
        <argsstring>(float *sens)</argsstring>
        <name>mpu_get_gyro_sens</name>
        <param>
          <type>float *</type>
          <declname>sens</declname>
        </param>
        <briefdescription>
<para>Get gyro sensitivity scale factor. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="out">sens</parametername>
</parameternamelist>
<parameterdescription>
<para>Conversion from hardware units to dps. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1458" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1458" bodyend="1477" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="91" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gab45a727aeee17380828a3e20ccb375c2" compoundref="inv__mpu_8c" startline="236">chip_cfg_s::gyro_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90aee922e0daa4fbb404c3db6c49d897a13" compoundref="inv__mpu_8c" startline="323">INV_FSR_1000DPS</references>
        <references refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90ac0c37efc1c8acd6f70c0c5a768e5b8be" compoundref="inv__mpu_8c" startline="324">INV_FSR_2000DPS</references>
        <references refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a5b8251a49db5cb8a676076b0b308ae35" compoundref="inv__mpu_8c" startline="321">INV_FSR_250DPS</references>
        <references refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a50901470ff389927fd010081e2b8fd09" compoundref="inv__mpu_8c" startline="322">INV_FSR_500DPS</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gaff893f93277595387023c71d46b03c42" compoundref="inv__mpu_8c" startline="2874" endline="2896">run_self_test</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga620408949052b96e856cad920f856583" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_get_accel_sens</definition>
        <argsstring>(unsigned short *sens)</argsstring>
        <name>mpu_get_accel_sens</name>
        <param>
          <type>unsigned short *</type>
          <declname>sens</declname>
        </param>
        <briefdescription>
<para>Get accel sensitivity scale factor. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="out">sens</parametername>
</parameternamelist>
<parameterdescription>
<para>Conversion from hardware units to g&apos;s. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1484" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1484" bodyend="1505" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="92" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gaf66873be1446ed552812e32d40eced61" compoundref="inv__mpu_8c" startline="238">chip_cfg_s::accel_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1gab72e3cead391dee41f28e041282d743f" compoundref="inv__mpu_8c" startline="256">chip_cfg_s::accel_half</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea6712e8563c97c11b458ef721d4f5f9d5" compoundref="inv__mpu_8c" startline="333">INV_FSR_16G</references>
        <references refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eae27c6f69463dab7de81fac0c51ff8aa7" compoundref="inv__mpu_8c" startline="330">INV_FSR_2G</references>
        <references refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eaa91e3a89d0bbd01149fe71148595be6d" compoundref="inv__mpu_8c" startline="331">INV_FSR_4G</references>
        <references refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea0a40371bdda397d234c53d0ee2f3be8b" compoundref="inv__mpu_8c" startline="332">INV_FSR_8G</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gafbd714aee6086836f70aaea847771669" compoundref="inv__mpu__dmp__motion__driver_8c" startline="632" endline="676">dmp_set_accel_bias</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gaff893f93277595387023c71d46b03c42" compoundref="inv__mpu_8c" startline="2874" endline="2896">run_self_test</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga093f11eb10b2639a4b9fe344ea348c54" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_get_fifo_config</definition>
        <argsstring>(unsigned char *sensors)</argsstring>
        <name>mpu_get_fifo_config</name>
        <param>
          <type>unsigned char *</type>
          <declname>sensors</declname>
        </param>
        <briefdescription>
<para>Get current FIFO configuration. <emphasis>sensors</emphasis> can contain a combination of the following flags: <linebreak/>
 INV_X_GYRO, INV_Y_GYRO, INV_Z_GYRO <linebreak/>
 INV_XYZ_GYRO <linebreak/>
 INV_XYZ_ACCEL </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="out">sensors</parametername>
</parameternamelist>
<parameterdescription>
<para>Mask of sensors in FIFO. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1516" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1516" bodyend="1520" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="99" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" compoundref="inv__mpu_8c" startline="247">chip_cfg_s::fifo_enable</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" compoundref="inv__mpu_8c" startline="2642" endline="2848">mpu_lp_motion_interrupt</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" compoundref="inv__mpu_8c" startline="2169" endline="2260">mpu_run_self_test</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gababbdda287e1f19323489f90a0889dd7" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_configure_fifo</definition>
        <argsstring>(unsigned char sensors)</argsstring>
        <name>mpu_configure_fifo</name>
        <param>
          <type>unsigned char</type>
          <declname>sensors</declname>
        </param>
        <briefdescription>
<para>Select which sensors are pushed to FIFO. <emphasis>sensors</emphasis> can contain a combination of the following flags: <linebreak/>
 INV_X_GYRO, INV_Y_GYRO, INV_Z_GYRO <linebreak/>
 INV_XYZ_GYRO <linebreak/>
 INV_XYZ_ACCEL </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">sensors</parametername>
</parameternamelist>
<parameterdescription>
<para>Mask of sensors to push to FIFO. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1531" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1531" bodyend="1566" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="100" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" compoundref="inv__mpu_8c" startline="267">chip_cfg_s::dmp_on</references>
        <references refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" compoundref="inv__mpu_8c" startline="247">chip_cfg_s::fifo_enable</references>
        <references refid="group___d_r_i_v_e_r_s_1ga33e138d8a49744eb9b4ea0e9086cef1c" compoundref="inv__mpu_8c" startline="258">chip_cfg_s::lp_accel_mode</references>
        <references refid="group___d_r_i_v_e_r_s_1gaf23e9f57c0059be6ec57862f0584de10" compoundref="inv__mpu_8c" startline="1092" endline="1147">mpu_reset_fifo</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1gafd5ebff6b0179e1dce0b68c2272cae07" compoundref="inv__mpu_8c" startline="681" endline="707">set_int_enable</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gafac8fcbf24cfa1b69737e02238580f3a" compoundref="inv__mpu_8c" startline="2937" endline="2963">mpu_dmp_init</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gac48a36b51e23bc4191ec13916bbb9d0b" compoundref="inv__mpu_8c" startline="757" endline="871">mpu_init</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3a4fea75686ab7d2e68634e81ccac04c" compoundref="inv__mpu_8c" startline="888" endline="964">mpu_lp_accel_mode</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" compoundref="inv__mpu_8c" startline="2642" endline="2848">mpu_lp_motion_interrupt</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" compoundref="inv__mpu_8c" startline="2169" endline="2260">mpu_run_self_test</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gaec8fa7a067988d174516bb735a4a0bc9" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_get_power_state</definition>
        <argsstring>(unsigned char *power_on)</argsstring>
        <name>mpu_get_power_state</name>
        <param>
          <type>unsigned char *</type>
          <declname>power_on</declname>
        </param>
        <briefdescription>
<para>Get current power state. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">power_on</parametername>
</parameternamelist>
<parameterdescription>
<para>1 if turned on, 0 if suspended. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1573" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1573" bodyend="1580" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="102" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga6e77e7cc1cf6be5e8fdf617c5b4586d1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_set_sensors</definition>
        <argsstring>(unsigned char sensors)</argsstring>
        <name>mpu_set_sensors</name>
        <param>
          <type>unsigned char</type>
          <declname>sensors</declname>
        </param>
        <briefdescription>
<para>Turn specific sensors on/off. <emphasis>sensors</emphasis> can contain a combination of the following flags: <linebreak/>
 INV_X_GYRO, INV_Y_GYRO, INV_Z_GYRO <linebreak/>
 INV_XYZ_GYRO <linebreak/>
 INV_XYZ_ACCEL <linebreak/>
 INV_XYZ_COMPASS </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">sensors</parametername>
</parameternamelist>
<parameterdescription>
<para>Mask of sensors to wake. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1592" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1592" bodyend="1662" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="103" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1gabcdedbd3098140aa14ad17bcaca8e176" compoundref="inv__mpu_8c" startline="393">BIT_AUX_IF_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1ga02c3e9ddd63128f1c3cf50bf1e9b5fe6" compoundref="inv__mpu_8c" startline="369">BIT_DMP_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1ga1fed8bd436e9b7dfccb1cae99ca89103" compoundref="inv__mpu_8c" startline="384">BIT_SLEEP</references>
        <references refid="group___d_r_i_v_e_r_s_1ga82256fedeffe5b2443ab3ae34cf032d9" compoundref="inv__mpu_8c" startline="403">BIT_STBY_XG</references>
        <references refid="group___d_r_i_v_e_r_s_1ga04a57159e34387dafe9b86b171c4654c" compoundref="inv__mpu_8c" startline="406">BIT_STBY_XYZA</references>
        <references refid="group___d_r_i_v_e_r_s_1gabf1c0a844906a5e887a659971a4af417" compoundref="inv__mpu_8c" startline="404">BIT_STBY_YG</references>
        <references refid="group___d_r_i_v_e_r_s_1ga30967a4efdf3c3f1e39814e72a4168b0" compoundref="inv__mpu_8c" startline="405">BIT_STBY_ZG</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gab7bd5165d6e62cb0d814cf3401958445" compoundref="inv__mpu_8c" startline="243">chip_cfg_s::clk_src</references>
        <references refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" compoundref="inv__mpu_8c" startline="49">delay_ms</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" compoundref="inv__mpu_8c" startline="267">chip_cfg_s::dmp_on</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1gga75570f009627c6f4ddfb2d936d81e207a01b240917a78674d3e387110a6a8f94c" compoundref="inv__mpu_8c" startline="340">INV_CLK_PLL</references>
        <references refid="group___d_r_i_v_e_r_s_1gabf02bf28541421d59f8be764f2b95407" compoundref="inv__mpu_8h" startline="29">INV_X_GYRO</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa03f025a17ed491e70b88274e89c75c5" compoundref="inv__mpu_8h" startline="33">INV_XYZ_ACCEL</references>
        <references refid="group___d_r_i_v_e_r_s_1ga7fc9c1dbdcb2ac8cc2a4128a5799482a" compoundref="inv__mpu_8h" startline="34">INV_XYZ_COMPASS</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3fdc30f9c0a26c2c4e2bb88921f91629" compoundref="inv__mpu_8h" startline="32">INV_XYZ_GYRO</references>
        <references refid="group___d_r_i_v_e_r_s_1gacdd8ff833a34dba08ca2aa145eb92b44" compoundref="inv__mpu_8h" startline="30">INV_Y_GYRO</references>
        <references refid="group___d_r_i_v_e_r_s_1ga50205b5cc6089b33b2561c854eb8b0fd" compoundref="inv__mpu_8h" startline="31">INV_Z_GYRO</references>
        <references refid="group___d_r_i_v_e_r_s_1ga33e138d8a49744eb9b4ea0e9086cef1c" compoundref="inv__mpu_8c" startline="258">chip_cfg_s::lp_accel_mode</references>
        <references refid="group___d_r_i_v_e_r_s_1ga36f70f38371b48d81094d3b061233e15" compoundref="inv__mpu_8c" startline="1817" endline="1860">mpu_set_bypass</references>
        <references refid="group___d_r_i_v_e_r_s_1ga653cb855300bff9285ce4b8dca6a503b" compoundref="inv__mpu_8c" startline="1879" endline="1897">mpu_set_int_latched</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa01fb0872030e8e2932f8d1d257ea86a" compoundref="inv__mpu_8c" startline="178">gyro_reg_s::pwr_mgmt_1</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3e378b0c77e9529ee93ac6eba11e1031" compoundref="inv__mpu_8c" startline="179">gyro_reg_s::pwr_mgmt_2</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <references refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" compoundref="inv__mpu_8c" startline="161">gyro_reg_s::user_ctrl</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gafac8fcbf24cfa1b69737e02238580f3a" compoundref="inv__mpu_8c" startline="2937" endline="2963">mpu_dmp_init</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gac48a36b51e23bc4191ec13916bbb9d0b" compoundref="inv__mpu_8c" startline="757" endline="871">mpu_init</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" compoundref="inv__mpu_8c" startline="2642" endline="2848">mpu_lp_motion_interrupt</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" compoundref="inv__mpu_8c" startline="2169" endline="2260">mpu_run_self_test</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga0afd02d8c76d3278b488ef7038c26e3e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_get_int_status</definition>
        <argsstring>(short *status)</argsstring>
        <name>mpu_get_int_status</name>
        <param>
          <type>short *</type>
          <declname>status</declname>
        </param>
        <briefdescription>
<para>Read the MPU interrupt status registers. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="out">status</parametername>
</parameternamelist>
<parameterdescription>
<para>Mask of interrupt bits. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1669" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1669" bodyend="1678" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="113" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaea6ad456241786750b3f211bc92032eb" compoundref="inv__mpu_8c" startline="175">gyro_reg_s::dmp_int_status</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga2da20453aafbbba4a0f6fb9fbdd25572" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_read_fifo</definition>
        <argsstring>(short *gyro, short *accel, unsigned long *timestamp, unsigned char *sensors, unsigned char *more)</argsstring>
        <name>mpu_read_fifo</name>
        <param>
          <type>short *</type>
          <declname>gyro</declname>
        </param>
        <param>
          <type>short *</type>
          <declname>accel</declname>
        </param>
        <param>
          <type>unsigned long *</type>
          <declname>timestamp</declname>
        </param>
        <param>
          <type>unsigned char *</type>
          <declname>sensors</declname>
        </param>
        <param>
          <type>unsigned char *</type>
          <declname>more</declname>
        </param>
        <briefdescription>
<para>Get one packet from the FIFO. If <emphasis>sensors</emphasis> does not contain a particular sensor, disregard the data returned to that pointer. <linebreak/>
 <emphasis>sensors</emphasis> can contain a combination of the following flags: <linebreak/>
 INV_X_GYRO, INV_Y_GYRO, INV_Z_GYRO <linebreak/>
 INV_XYZ_GYRO <linebreak/>
 INV_XYZ_ACCEL <linebreak/>
 If the FIFO has no new data, <emphasis>sensors</emphasis> will be zero. <linebreak/>
 If the FIFO is disabled, <emphasis>sensors</emphasis> will be zero and this function will return a non-zero error code. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="out">gyro</parametername>
</parameternamelist>
<parameterdescription>
<para>Gyro data in hardware units. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="out">accel</parametername>
</parameternamelist>
<parameterdescription>
<para>Accel data in hardware units. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="out">timestamp</parametername>
</parameternamelist>
<parameterdescription>
<para>Timestamp in milliseconds. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="out">sensors</parametername>
</parameternamelist>
<parameterdescription>
<para>Mask of sensors read from FIFO. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="out">more</parametername>
</parameternamelist>
<parameterdescription>
<para>Number of remaining packets. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1698" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1698" bodyend="1770" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="114" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1gafb9b49ce5dd973b3c29ae72680924fa7" compoundref="inv__mpu_8c" startline="372">BIT_FIFO_OVERFLOW</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" compoundref="inv__mpu_8c" startline="267">chip_cfg_s::dmp_on</references>
        <references refid="group___d_r_i_v_e_r_s_1gab7503974d62cf9c2d688579fcd1abd48" compoundref="inv__mpu_8c" startline="169">gyro_reg_s::fifo_count_h</references>
        <references refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" compoundref="inv__mpu_8c" startline="247">chip_cfg_s::fifo_enable</references>
        <references refid="group___d_r_i_v_e_r_s_1gacb6763dc5f368ea01ef7c733cea9dab4" compoundref="inv__mpu_8c" startline="170">gyro_reg_s::fifo_r_w</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3e6b6bc6d1cd2956353a31bfadd3c332" compoundref="inv__mpu_8c" startline="50">get_ms</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1ga837724080c34ff5a190751427febaf91" compoundref="inv__mpu_8c" startline="176">gyro_reg_s::int_status</references>
        <references refid="group___d_r_i_v_e_r_s_1gabf02bf28541421d59f8be764f2b95407" compoundref="inv__mpu_8h" startline="29">INV_X_GYRO</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa03f025a17ed491e70b88274e89c75c5" compoundref="inv__mpu_8h" startline="33">INV_XYZ_ACCEL</references>
        <references refid="group___d_r_i_v_e_r_s_1gacdd8ff833a34dba08ca2aa145eb92b44" compoundref="inv__mpu_8h" startline="30">INV_Y_GYRO</references>
        <references refid="group___d_r_i_v_e_r_s_1ga50205b5cc6089b33b2561c854eb8b0fd" compoundref="inv__mpu_8h" startline="31">INV_Z_GYRO</references>
        <references refid="group___d_r_i_v_e_r_s_1ga5f77e9f55285abb4d214b80281f69c1f" compoundref="inv__mpu_8c" startline="207">hw_s::max_fifo</references>
        <references refid="group___d_r_i_v_e_r_s_1ga973c680573b37fc359fc68d0707da355" compoundref="inv__mpu_8c" startline="667">MAX_PACKET_LENGTH</references>
        <references refid="group___d_r_i_v_e_r_s_1gaf23e9f57c0059be6ec57862f0584de10" compoundref="inv__mpu_8c" startline="1092" endline="1147">mpu_reset_fifo</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga13593044949b460e9f571eb57e9a0788" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_read_fifo_stream</definition>
        <argsstring>(unsigned short length, unsigned char *data, unsigned char *more)</argsstring>
        <name>mpu_read_fifo_stream</name>
        <param>
          <type>unsigned short</type>
          <declname>length</declname>
        </param>
        <param>
          <type>unsigned char *</type>
          <declname>data</declname>
        </param>
        <param>
          <type>unsigned char *</type>
          <declname>more</declname>
        </param>
        <briefdescription>
<para>Get one unparsed packet from the FIFO. This function should be used if the packet is to be parsed elsewhere. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">length</parametername>
</parameternamelist>
<parameterdescription>
<para>Length of one FIFO packet. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">data</parametername>
</parameternamelist>
<parameterdescription>
<para>FIFO packet. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">more</parametername>
</parameternamelist>
<parameterdescription>
<para>Number of remaining packets. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1779" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1779" bodyend="1810" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="116" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1gafb9b49ce5dd973b3c29ae72680924fa7" compoundref="inv__mpu_8c" startline="372">BIT_FIFO_OVERFLOW</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" compoundref="inv__mpu_8c" startline="267">chip_cfg_s::dmp_on</references>
        <references refid="group___d_r_i_v_e_r_s_1gab7503974d62cf9c2d688579fcd1abd48" compoundref="inv__mpu_8c" startline="169">gyro_reg_s::fifo_count_h</references>
        <references refid="group___d_r_i_v_e_r_s_1gacb6763dc5f368ea01ef7c733cea9dab4" compoundref="inv__mpu_8c" startline="170">gyro_reg_s::fifo_r_w</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1ga837724080c34ff5a190751427febaf91" compoundref="inv__mpu_8c" startline="176">gyro_reg_s::int_status</references>
        <references refid="group___d_r_i_v_e_r_s_1ga5f77e9f55285abb4d214b80281f69c1f" compoundref="inv__mpu_8c" startline="207">hw_s::max_fifo</references>
        <references refid="group___d_r_i_v_e_r_s_1gaf23e9f57c0059be6ec57862f0584de10" compoundref="inv__mpu_8c" startline="1092" endline="1147">mpu_reset_fifo</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga02db5f25359abe84be002c543cdc3803" compoundref="inv__mpu__dmp__motion__driver_8c" startline="1268" endline="1347">dmp_read_fifo</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga36f70f38371b48d81094d3b061233e15" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_set_bypass</definition>
        <argsstring>(unsigned char bypass_on)</argsstring>
        <name>mpu_set_bypass</name>
        <param>
          <type>unsigned char</type>
          <declname>bypass_on</declname>
        </param>
        <briefdescription>
<para>Set device to bypass mode. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">bypass_on</parametername>
</parameternamelist>
<parameterdescription>
<para>1 to enable bypass mode. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1817" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1817" bodyend="1860" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="68" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1ga6f12e54ae8c7f2dd77954f3ab619bbb9" compoundref="inv__mpu_8c" startline="263">chip_cfg_s::active_low_int</references>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8467782bedc44051c95643e303543655" compoundref="inv__mpu_8c" startline="394">BIT_ACTL</references>
        <references refid="group___d_r_i_v_e_r_s_1ga1f50796ca0363292d9ac9cc1d29d9225" compoundref="inv__mpu_8c" startline="396">BIT_ANY_RD_CLR</references>
        <references refid="group___d_r_i_v_e_r_s_1gabcdedbd3098140aa14ad17bcaca8e176" compoundref="inv__mpu_8c" startline="393">BIT_AUX_IF_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1gadd12a8d89e1a4c4e008b12a96dd4c75d" compoundref="inv__mpu_8c" startline="397">BIT_BYPASS_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1ga588b5a95724c4a68c6868faa78fd3a7f" compoundref="inv__mpu_8c" startline="395">BIT_LATCH_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1ga6d3a962d6435644c7ea68e7d65934636" compoundref="inv__mpu_8c" startline="251">chip_cfg_s::bypass_mode</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" compoundref="inv__mpu_8c" startline="49">delay_ms</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1gaae7bdbff2a1029245890b555b2d8d519" compoundref="inv__mpu_8c" startline="180">gyro_reg_s::int_pin_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga7fc9c1dbdcb2ac8cc2a4128a5799482a" compoundref="inv__mpu_8h" startline="34">INV_XYZ_COMPASS</references>
        <references refid="group___d_r_i_v_e_r_s_1ga55ce40fc460a62829ec149edaccffe7c" compoundref="inv__mpu_8c" startline="265">chip_cfg_s::latched_int</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <references refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" compoundref="inv__mpu_8c" startline="161">gyro_reg_s::user_ctrl</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gac48a36b51e23bc4191ec13916bbb9d0b" compoundref="inv__mpu_8c" startline="757" endline="871">mpu_init</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga68ed20e6c9663cd7c50469329af8715f" compoundref="inv__mpu_8c" startline="2377" endline="2409">mpu_set_dmp_state</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga6e77e7cc1cf6be5e8fdf617c5b4586d1" compoundref="inv__mpu_8c" startline="1592" endline="1662">mpu_set_sensors</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga4764ce0ba4e07a4c774f69ab3b83d1f9" compoundref="inv__mpu_8c" startline="2424" endline="2527">setup_compass</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gacc92fb1489ef32a04bcb6b0ebde4d657" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_set_int_level</definition>
        <argsstring>(unsigned char active_low)</argsstring>
        <name>mpu_set_int_level</name>
        <param>
          <type>unsigned char</type>
          <declname>active_low</declname>
        </param>
        <briefdescription>
<para>Set interrupt level. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">active_low</parametername>
</parameternamelist>
<parameterdescription>
<para>1 for active low, 0 for active high. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1867" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1867" bodyend="1871" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="74" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1ga6f12e54ae8c7f2dd77954f3ab619bbb9" compoundref="inv__mpu_8c" startline="263">chip_cfg_s::active_low_int</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga653cb855300bff9285ce4b8dca6a503b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_set_int_latched</definition>
        <argsstring>(unsigned char enable)</argsstring>
        <name>mpu_set_int_latched</name>
        <param>
          <type>unsigned char</type>
          <declname>enable</declname>
        </param>
        <briefdescription>
<para>Enable latched interrupts. Any MPU register will clear the interrupt. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">enable</parametername>
</parameternamelist>
<parameterdescription>
<para>1 to enable, 0 to disable. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1879" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1879" bodyend="1897" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="75" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1ga6f12e54ae8c7f2dd77954f3ab619bbb9" compoundref="inv__mpu_8c" startline="263">chip_cfg_s::active_low_int</references>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8467782bedc44051c95643e303543655" compoundref="inv__mpu_8c" startline="394">BIT_ACTL</references>
        <references refid="group___d_r_i_v_e_r_s_1ga1f50796ca0363292d9ac9cc1d29d9225" compoundref="inv__mpu_8c" startline="396">BIT_ANY_RD_CLR</references>
        <references refid="group___d_r_i_v_e_r_s_1gadd12a8d89e1a4c4e008b12a96dd4c75d" compoundref="inv__mpu_8c" startline="397">BIT_BYPASS_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1ga588b5a95724c4a68c6868faa78fd3a7f" compoundref="inv__mpu_8c" startline="395">BIT_LATCH_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1ga6d3a962d6435644c7ea68e7d65934636" compoundref="inv__mpu_8c" startline="251">chip_cfg_s::bypass_mode</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1gaae7bdbff2a1029245890b555b2d8d519" compoundref="inv__mpu_8c" startline="180">gyro_reg_s::int_pin_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga55ce40fc460a62829ec149edaccffe7c" compoundref="inv__mpu_8c" startline="265">chip_cfg_s::latched_int</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3a4fea75686ab7d2e68634e81ccac04c" compoundref="inv__mpu_8c" startline="888" endline="964">mpu_lp_accel_mode</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga6e77e7cc1cf6be5e8fdf617c5b4586d1" compoundref="inv__mpu_8c" startline="1592" endline="1662">mpu_set_sensors</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gab7ebbe13328466605a20f6ce1a106de8" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int get_accel_prod_shift</definition>
        <argsstring>(float *st_shift)</argsstring>
        <name>get_accel_prod_shift</name>
        <param>
          <type>float *</type>
          <declname>st_shift</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1900" column="12" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1900" bodyend="1923"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gaab48ddb3bd05cea3f0fc85a68db9934d" compoundref="inv__mpu_8c" startline="1925" endline="1943">accel_self_test</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gaab48ddb3bd05cea3f0fc85a68db9934d" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int accel_self_test</definition>
        <argsstring>(long *bias_regular, long *bias_st)</argsstring>
        <name>accel_self_test</name>
        <param>
          <type>long *</type>
          <declname>bias_regular</declname>
        </param>
        <param>
          <type>long *</type>
          <declname>bias_st</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1925" column="12" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1925" bodyend="1943"/>
        <references refid="group___d_r_i_v_e_r_s_1ga95bcc5f260df5ce993730008a1dcb45a" compoundref="inv__mpu_8c" startline="61">fabs</references>
        <references refid="group___d_r_i_v_e_r_s_1gab7ebbe13328466605a20f6ce1a106de8" compoundref="inv__mpu_8c" startline="1900" endline="1923">get_accel_prod_shift</references>
        <references refid="group___d_r_i_v_e_r_s_1ga7f6071fb91426f467d9223c712560ee6" compoundref="inv__mpu_8c" startline="295">test_s::max_accel_var</references>
        <references refid="group___d_r_i_v_e_r_s_1ga9ebd3195ac2f460f82873b9e6c36eb2c" compoundref="inv__mpu_8c" startline="294">test_s::max_g</references>
        <references refid="group___d_r_i_v_e_r_s_1gae86aec181d0f1e4a29e9f9ae0735e8e1" compoundref="inv__mpu_8c" startline="293">test_s::min_g</references>
        <references refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" compoundref="inv__mpu_8c" startline="555">test</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" compoundref="inv__mpu_8c" startline="2169" endline="2260">mpu_run_self_test</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga267d6f443d5be8b2a7a06aa007116f7a" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int gyro_self_test</definition>
        <argsstring>(long *bias_regular, long *bias_st)</argsstring>
        <name>gyro_self_test</name>
        <param>
          <type>long *</type>
          <declname>bias_regular</declname>
        </param>
        <param>
          <type>long *</type>
          <declname>bias_st</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="1945" column="12" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="1945" bodyend="1972"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga95bcc5f260df5ce993730008a1dcb45a" compoundref="inv__mpu_8c" startline="61">fabs</references>
        <references refid="group___d_r_i_v_e_r_s_1ga330290a347407b0d92b1d77aa274993c" compoundref="inv__mpu_8c" startline="282">test_s::gyro_sens</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1gae588d6c0105bcd8f9144f42eee6c4835" compoundref="inv__mpu_8c" startline="291">test_s::max_dps</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3b47b72fbf8c152cb4389e3cd866ded9" compoundref="inv__mpu_8c" startline="292">test_s::max_gyro_var</references>
        <references refid="group___d_r_i_v_e_r_s_1gafacfcf92f07cd846fb0aaf889a30c582" compoundref="inv__mpu_8c" startline="290">test_s::min_dps</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <references refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" compoundref="inv__mpu_8c" startline="555">test</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" compoundref="inv__mpu_8c" startline="2169" endline="2260">mpu_run_self_test</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga8d087842b07e9710be2267adea4b497a" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int get_st_biases</definition>
        <argsstring>(long *gyro, long *accel, unsigned char hw_test)</argsstring>
        <name>get_st_biases</name>
        <param>
          <type>long *</type>
          <declname>gyro</declname>
        </param>
        <param>
          <type>long *</type>
          <declname>accel</declname>
        </param>
        <param>
          <type>unsigned char</type>
          <declname>hw_test</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2029" column="12" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2029" bodyend="2147"/>
        <references refid="group___d_r_i_v_e_r_s_1gae93a446c54cc00bc7f11209d7af0025e" compoundref="inv__mpu_8c" startline="164">gyro_reg_s::accel_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga5f602885d6a544a9039b13a0cc7ac085" compoundref="inv__mpu_8c" startline="283">test_s::accel_sens</references>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga37d5ceb74c3568e4bab6dcdd0afaa95b" compoundref="inv__mpu_8c" startline="371">BIT_DMP_RST</references>
        <references refid="group___d_r_i_v_e_r_s_1gae3c4a18accb84992faaf2534a84a147c" compoundref="inv__mpu_8c" startline="368">BIT_FIFO_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1gaeae2cc64314ad05f3a93d2358a2369db" compoundref="inv__mpu_8c" startline="370">BIT_FIFO_RST</references>
        <references refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" compoundref="inv__mpu_8c" startline="49">delay_ms</references>
        <references refid="group___d_r_i_v_e_r_s_1gab7503974d62cf9c2d688579fcd1abd48" compoundref="inv__mpu_8c" startline="169">gyro_reg_s::fifo_count_h</references>
        <references refid="group___d_r_i_v_e_r_s_1ga6a392b7ecae843c734db3d832f11af49" compoundref="inv__mpu_8c" startline="162">gyro_reg_s::fifo_en</references>
        <references refid="group___d_r_i_v_e_r_s_1gacb6763dc5f368ea01ef7c733cea9dab4" compoundref="inv__mpu_8c" startline="170">gyro_reg_s::fifo_r_w</references>
        <references refid="group___d_r_i_v_e_r_s_1gada0b973f74cc874552f079fd58c435a6" compoundref="inv__mpu_8c" startline="163">gyro_reg_s::gyro_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga330290a347407b0d92b1d77aa274993c" compoundref="inv__mpu_8c" startline="282">test_s::gyro_sens</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga2bf6dc826bcb17168013f303c904544b" compoundref="inv__mpu_8c" startline="183">gyro_reg_s::i2c_mst</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1ga48b47844d4b0570e60aa6806faa59eae" compoundref="inv__mpu_8c" startline="174">gyro_reg_s::int_enable</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa03f025a17ed491e70b88274e89c75c5" compoundref="inv__mpu_8h" startline="33">INV_XYZ_ACCEL</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3fdc30f9c0a26c2c4e2bb88921f91629" compoundref="inv__mpu_8h" startline="32">INV_XYZ_GYRO</references>
        <references refid="group___d_r_i_v_e_r_s_1ga22eeac0bd77e7d99b3e15dda52f1bd08" compoundref="inv__mpu_8c" startline="159">gyro_reg_s::lpf</references>
        <references refid="group___d_r_i_v_e_r_s_1ga973c680573b37fc359fc68d0707da355" compoundref="inv__mpu_8c" startline="667">MAX_PACKET_LENGTH</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa01fb0872030e8e2932f8d1d257ea86a" compoundref="inv__mpu_8c" startline="178">gyro_reg_s::pwr_mgmt_1</references>
        <references refid="group___d_r_i_v_e_r_s_1ga27dd9db31f16ca170520b3009255e6d0" compoundref="inv__mpu_8c" startline="158">gyro_reg_s::rate_div</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3b54f67ea7f1dd47fd8aa48dda051032" compoundref="inv__mpu_8c" startline="287">test_s::reg_accel_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa0dfe8b2c29358e9e045aaa8beff244d" compoundref="inv__mpu_8c" startline="286">test_s::reg_gyro_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga09f5a9ab86d36f3b83e7f4abdea73e39" compoundref="inv__mpu_8c" startline="285">test_s::reg_lpf</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3bef0c9f009cea4cbe01d0ee91126d83" compoundref="inv__mpu_8c" startline="284">test_s::reg_rate_div</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <references refid="group___d_r_i_v_e_r_s_1ga5a1563d12b0aab5e65317621742f6f62" compoundref="inv__mpu_8c" startline="303">gyro_state_s::test</references>
        <references refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" compoundref="inv__mpu_8c" startline="555">test</references>
        <references refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" compoundref="inv__mpu_8c" startline="161">gyro_reg_s::user_ctrl</references>
        <references refid="group___d_r_i_v_e_r_s_1gaf5d495939c8ca761ac2bbe7791dcd727" compoundref="inv__mpu_8c" startline="288">test_s::wait_ms</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" compoundref="inv__mpu_8c" startline="2169" endline="2260">mpu_run_self_test</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_run_self_test</definition>
        <argsstring>(long *gyro, long *accel)</argsstring>
        <name>mpu_run_self_test</name>
        <param>
          <type>long *</type>
          <declname>gyro</declname>
        </param>
        <param>
          <type>long *</type>
          <declname>accel</declname>
        </param>
        <briefdescription>
<para>Trigger gyro/accel/compass self-test. On success/error, the self-test returns a mask representing the sensor(s) that failed. For each bit, a one (1) represents a &quot;pass&quot; case; conversely, a zero (0) indicates a failure. </para>
        </briefdescription>
        <detaileddescription>
<para><linebreak/>
 The mask is defined as follows: <linebreak/>
 Bit 0: Gyro. <linebreak/>
 Bit 1: Accel. <linebreak/>
 Bit 2: Compass.</para>
<para><linebreak/>
 Currently, the hardware self-test is unsupported for MPU6500. However, this function can still be used to obtain the accel and gyro biases.</para>
<para><linebreak/>
 This function must be called with the device either face-up or face-down (z-axis is parallel to gravity). <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="out">gyro</parametername>
</parameternamelist>
<parameterdescription>
<para>Gyro biases in q16 format. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="out">accel</parametername>
</parameternamelist>
<parameterdescription>
<para>Accel biases (if applicable) in q16 format. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Result mask (see above). </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2169" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2169" bodyend="2260" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="129" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gaf66873be1446ed552812e32d40eced61" compoundref="inv__mpu_8c" startline="238">chip_cfg_s::accel_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1gaab48ddb3bd05cea3f0fc85a68db9934d" compoundref="inv__mpu_8c" startline="1925" endline="1943">accel_self_test</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gab7bd5165d6e62cb0d814cf3401958445" compoundref="inv__mpu_8c" startline="243">chip_cfg_s::clk_src</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" compoundref="inv__mpu_8c" startline="267">chip_cfg_s::dmp_on</references>
        <references refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" compoundref="inv__mpu_8c" startline="247">chip_cfg_s::fifo_enable</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8d087842b07e9710be2267adea4b497a" compoundref="inv__mpu_8c" startline="2029" endline="2147">get_st_biases</references>
        <references refid="group___d_r_i_v_e_r_s_1gab45a727aeee17380828a3e20ccb375c2" compoundref="inv__mpu_8c" startline="236">chip_cfg_s::gyro_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga267d6f443d5be8b2a7a06aa007116f7a" compoundref="inv__mpu_8c" startline="1945" endline="1972">gyro_self_test</references>
        <references refid="group___d_r_i_v_e_r_s_1gga75570f009627c6f4ddfb2d936d81e207a01b240917a78674d3e387110a6a8f94c" compoundref="inv__mpu_8c" startline="340">INV_CLK_PLL</references>
        <references refid="group___d_r_i_v_e_r_s_1ga16ec8ca8298f62ac01419775377270fb" compoundref="inv__mpu_8c" startline="242">chip_cfg_s::lpf</references>
        <references refid="group___d_r_i_v_e_r_s_1gababbdda287e1f19323489f90a0889dd7" compoundref="inv__mpu_8c" startline="1531" endline="1566">mpu_configure_fifo</references>
        <references refid="group___d_r_i_v_e_r_s_1gab6087a15ee23db23b6aec41590329a60" compoundref="inv__mpu_8c" startline="1218" endline="1239">mpu_get_accel_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga093f11eb10b2639a4b9fe344ea348c54" compoundref="inv__mpu_8c" startline="1516" endline="1520">mpu_get_fifo_config</references>
        <references refid="group___d_r_i_v_e_r_s_1gaf973c32c73ba912ff512aab948fc31ca" compoundref="inv__mpu_8c" startline="1154" endline="1174">mpu_get_gyro_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa95c7e216dcb2d888e9796001ca555f8" compoundref="inv__mpu_8c" startline="1283" endline="1311">mpu_get_lpf</references>
        <references refid="group___d_r_i_v_e_r_s_1ga2487dd551b701c1c7ed4d6335f02b2f1" compoundref="inv__mpu_8c" startline="1352" endline="1359">mpu_get_sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1ga2713a96af104cfb2ae8e0ed4c3718119" compoundref="inv__mpu_8c" startline="1246" endline="1276">mpu_set_accel_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga68ed20e6c9663cd7c50469329af8715f" compoundref="inv__mpu_8c" startline="2377" endline="2409">mpu_set_dmp_state</references>
        <references refid="group___d_r_i_v_e_r_s_1gad09e6031c8677adc0b8a39b6deea8e27" compoundref="inv__mpu_8c" startline="1181" endline="1211">mpu_set_gyro_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga5661a9dee25152166769910767a2a93d" compoundref="inv__mpu_8c" startline="1319" endline="1345">mpu_set_lpf</references>
        <references refid="group___d_r_i_v_e_r_s_1ga0144d666a67a82888b8580002afe8b55" compoundref="inv__mpu_8c" startline="1367" endline="1407">mpu_set_sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1ga6e77e7cc1cf6be5e8fdf617c5b4586d1" compoundref="inv__mpu_8c" startline="1592" endline="1662">mpu_set_sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga2660470fcf7b53e2e832a397cbe6c354" compoundref="inv__mpu_8c" startline="245">chip_cfg_s::sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gaff893f93277595387023c71d46b03c42" compoundref="inv__mpu_8c" startline="2874" endline="2896">run_self_test</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gafea59910bc3dd30ba3356b1c75213a5f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_write_mem</definition>
        <argsstring>(unsigned short mem_addr, unsigned short length, unsigned char *data)</argsstring>
        <name>mpu_write_mem</name>
        <param>
          <type>unsigned short</type>
          <declname>mem_addr</declname>
        </param>
        <param>
          <type>unsigned short</type>
          <declname>length</declname>
        </param>
        <param>
          <type>unsigned char *</type>
          <declname>data</declname>
        </param>
        <briefdescription>
<para>Write to the DMP memory. This function prevents I2C writes past the bank boundaries. The DMP memory is only accessible when the chip is awake. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">mem_addr</parametername>
</parameternamelist>
<parameterdescription>
<para>Memory location (bank &lt;&lt; 8 | start address) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">length</parametername>
</parameternamelist>
<parameterdescription>
<para>Number of bytes to write. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">data</parametername>
</parameternamelist>
<parameterdescription>
<para>Bytes to write to memory. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2271" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2271" bodyend="2293" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="120" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1gaf1b74c33fa828ea4dc172bfbaaf47216" compoundref="inv__mpu_8c" startline="184">gyro_reg_s::bank_sel</references>
        <references refid="group___d_r_i_v_e_r_s_1gaef4a2014cd6e3d5faeb8f713ee3606ed" compoundref="inv__mpu_8c" startline="211">hw_s::bank_size</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1gae17166b43fa12a960c0eced9a3c04bf0" compoundref="inv__mpu_8c" startline="181">gyro_reg_s::mem_r_w</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gaac712ef33727433f666b3861894873be" compoundref="inv__mpu__dmp__motion__driver_8c" startline="1176" endline="1190">dmp_enable_6x_lp_quat</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga70c485bdfa30515e5b869b081192caa1" compoundref="inv__mpu__dmp__motion__driver_8c" startline="997" endline="1112">dmp_enable_feature</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga653ebcec6758f006dd89939e8f3c6ebb" compoundref="inv__mpu__dmp__motion__driver_8c" startline="1134" endline="1143">dmp_enable_gyro_cal</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga4ee4339b79a58558d121ba8206056394" compoundref="inv__mpu__dmp__motion__driver_8c" startline="1152" endline="1167">dmp_enable_lp_quat</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gafbd714aee6086836f70aaea847771669" compoundref="inv__mpu__dmp__motion__driver_8c" startline="632" endline="676">dmp_set_accel_bias</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga5399728fd572a7694af20286cc9d4121" compoundref="inv__mpu__dmp__motion__driver_8c" startline="684" endline="703">dmp_set_fifo_rate</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga4766e37ef95cbf0044c8f9594ed811d1" compoundref="inv__mpu__dmp__motion__driver_8c" startline="580" endline="624">dmp_set_gyro_bias</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gaf10c08103d2aec9aa5555a5694bafced" compoundref="inv__mpu__dmp__motion__driver_8c" startline="1229" endline="1246">dmp_set_interrupt_mode</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga6cb5ff144ce6e1546f00809de8bb24a4" compoundref="inv__mpu__dmp__motion__driver_8c" startline="525" endline="568">dmp_set_orientation</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga568562c19998f585b1d2ba056cd209db" compoundref="inv__mpu__dmp__motion__driver_8c" startline="931" endline="940">dmp_set_pedometer_step_count</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga62f469269047f8cba16a2b7f5349acc0" compoundref="inv__mpu__dmp__motion__driver_8c" startline="967" endline="978">dmp_set_pedometer_walk_time</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga62efdae1330d5bcaf4c75b069ded0ed0" compoundref="inv__mpu__dmp__motion__driver_8c" startline="858" endline="867">dmp_set_shake_reject_thresh</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga09d7a6d90e1bd2e907f1866d850c5608" compoundref="inv__mpu__dmp__motion__driver_8c" startline="877" endline="885">dmp_set_shake_reject_time</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga5d44d1a32535000e6902cdc5224d1b54" compoundref="inv__mpu__dmp__motion__driver_8c" startline="895" endline="903">dmp_set_shake_reject_timeout</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga66bc5c8fc26fcb498df53fc62aa87e4f" compoundref="inv__mpu__dmp__motion__driver_8c" startline="788" endline="799">dmp_set_tap_axes</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga819f947b2cb107ada7b9a94c41be0dad" compoundref="inv__mpu__dmp__motion__driver_8c" startline="806" endline="817">dmp_set_tap_count</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga15da67c0a6c94e0cdaceb8b165e13af9" compoundref="inv__mpu__dmp__motion__driver_8c" startline="722" endline="781">dmp_set_tap_thresh</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga97466067f4a23368f4d7e2547fe359d9" compoundref="inv__mpu__dmp__motion__driver_8c" startline="824" endline="833">dmp_set_tap_time</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gaeca250a90eb816eb2609229849481337" compoundref="inv__mpu__dmp__motion__driver_8c" startline="840" endline="849">dmp_set_tap_time_multi</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga8fbdfe1a50285d4ab438e29c2efc70f5" compoundref="inv__mpu_8c" startline="2336" endline="2370">mpu_load_firmware</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga3374bececb6743893c9eab27645c1182" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_read_mem</definition>
        <argsstring>(unsigned short mem_addr, unsigned short length, unsigned char *data)</argsstring>
        <name>mpu_read_mem</name>
        <param>
          <type>unsigned short</type>
          <declname>mem_addr</declname>
        </param>
        <param>
          <type>unsigned short</type>
          <declname>length</declname>
        </param>
        <param>
          <type>unsigned char *</type>
          <declname>data</declname>
        </param>
        <briefdescription>
<para>Read from the DMP memory. This function prevents I2C reads past the bank boundaries. The DMP memory is only accessible when the chip is awake. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">mem_addr</parametername>
</parameternamelist>
<parameterdescription>
<para>Memory location (bank &lt;&lt; 8 | start address) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">length</parametername>
</parameternamelist>
<parameterdescription>
<para>Number of bytes to read. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="out">data</parametername>
</parameternamelist>
<parameterdescription>
<para>Bytes read from memory. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2304" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2304" bodyend="2326" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="122" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1gaf1b74c33fa828ea4dc172bfbaaf47216" compoundref="inv__mpu_8c" startline="184">gyro_reg_s::bank_sel</references>
        <references refid="group___d_r_i_v_e_r_s_1gaef4a2014cd6e3d5faeb8f713ee3606ed" compoundref="inv__mpu_8c" startline="211">hw_s::bank_size</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1gae17166b43fa12a960c0eced9a3c04bf0" compoundref="inv__mpu_8c" startline="181">gyro_reg_s::mem_r_w</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gad8f4d1a93e0f03d950559501c5a7255b" compoundref="inv__mpu__dmp__motion__driver_8c" startline="910" endline="922">dmp_get_pedometer_step_count</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga62c8e5e99986b0e60ca0dc9a9b9c3fcc" compoundref="inv__mpu__dmp__motion__driver_8c" startline="947" endline="959">dmp_get_pedometer_walk_time</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1gac48a36b51e23bc4191ec13916bbb9d0b" compoundref="inv__mpu_8c" startline="757" endline="871">mpu_init</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga8fbdfe1a50285d4ab438e29c2efc70f5" compoundref="inv__mpu_8c" startline="2336" endline="2370">mpu_load_firmware</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga8fbdfe1a50285d4ab438e29c2efc70f5" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_load_firmware</definition>
        <argsstring>(unsigned short length, const unsigned char *firmware, unsigned short start_addr, unsigned short sample_rate)</argsstring>
        <name>mpu_load_firmware</name>
        <param>
          <type>unsigned short</type>
          <declname>length</declname>
        </param>
        <param>
          <type>const unsigned char *</type>
          <declname>firmware</declname>
        </param>
        <param>
          <type>unsigned short</type>
          <declname>start_addr</declname>
        </param>
        <param>
          <type>unsigned short</type>
          <declname>sample_rate</declname>
        </param>
        <briefdescription>
<para>Load and verify DMP image. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">length</parametername>
</parameternamelist>
<parameterdescription>
<para>Length of DMP image. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">firmware</parametername>
</parameternamelist>
<parameterdescription>
<para>DMP code. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">start_addr</parametername>
</parameternamelist>
<parameterdescription>
<para>Starting address of DMP code memory. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">sample_rate</parametername>
</parameternamelist>
<parameterdescription>
<para>Fixed sampling rate used when DMP is enabled. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2336" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2336" bodyend="2370" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="124" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga1d2ff55e17aae1459dfad61d76054b1b" compoundref="inv__mpu_8c" startline="269">chip_cfg_s::dmp_loaded</references>
        <references refid="group___d_r_i_v_e_r_s_1ga5f42b7e1e740f2fb64427417e9e2dab7" compoundref="inv__mpu_8c" startline="271">chip_cfg_s::dmp_sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="inv__mpu_8c_1a7750730ae7e5c713b619e347d44185fe">LOAD_CHUNK</references>
        <references refid="group___d_r_i_v_e_r_s_1gac6afabdc09a49a433ee19d8a9486056d" compoundref="inv__mpu_8c" startline="62">min</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3374bececb6743893c9eab27645c1182" compoundref="inv__mpu_8c" startline="2304" endline="2326">mpu_read_mem</references>
        <references refid="group___d_r_i_v_e_r_s_1gafea59910bc3dd30ba3356b1c75213a5f" compoundref="inv__mpu_8c" startline="2271" endline="2293">mpu_write_mem</references>
        <references refid="group___d_r_i_v_e_r_s_1gaac4aac12b0e82272affd408b24dc9c95" compoundref="inv__mpu_8c" startline="186">gyro_reg_s::prgm_start_h</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga66626a842452f444e9af29cb0d2c6150" compoundref="inv__mpu__dmp__motion__driver_8c" startline="512" endline="516">dmp_load_motion_driver_firmware</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga68ed20e6c9663cd7c50469329af8715f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_set_dmp_state</definition>
        <argsstring>(unsigned char enable)</argsstring>
        <name>mpu_set_dmp_state</name>
        <param>
          <type>unsigned char</type>
          <declname>enable</declname>
        </param>
        <briefdescription>
<para>Enable/disable DMP support. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">enable</parametername>
</parameternamelist>
<parameterdescription>
<para>1 to turn on the DMP. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2377" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2377" bodyend="2409" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="77" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga1d2ff55e17aae1459dfad61d76054b1b" compoundref="inv__mpu_8c" startline="269">chip_cfg_s::dmp_loaded</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" compoundref="inv__mpu_8c" startline="267">chip_cfg_s::dmp_on</references>
        <references refid="group___d_r_i_v_e_r_s_1ga5f42b7e1e740f2fb64427417e9e2dab7" compoundref="inv__mpu_8c" startline="271">chip_cfg_s::dmp_sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" compoundref="inv__mpu_8c" startline="247">chip_cfg_s::fifo_enable</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1gaf23e9f57c0059be6ec57862f0584de10" compoundref="inv__mpu_8c" startline="1092" endline="1147">mpu_reset_fifo</references>
        <references refid="group___d_r_i_v_e_r_s_1ga36f70f38371b48d81094d3b061233e15" compoundref="inv__mpu_8c" startline="1817" endline="1860">mpu_set_bypass</references>
        <references refid="group___d_r_i_v_e_r_s_1ga0144d666a67a82888b8580002afe8b55" compoundref="inv__mpu_8c" startline="1367" endline="1407">mpu_set_sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1gafd5ebff6b0179e1dce0b68c2272cae07" compoundref="inv__mpu_8c" startline="681" endline="707">set_int_enable</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gafac8fcbf24cfa1b69737e02238580f3a" compoundref="inv__mpu_8c" startline="2937" endline="2963">mpu_dmp_init</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" compoundref="inv__mpu_8c" startline="2642" endline="2848">mpu_lp_motion_interrupt</referencedby>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" compoundref="inv__mpu_8c" startline="2169" endline="2260">mpu_run_self_test</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gafe0f60ed0d7f8fd2dcd55d45b95a2363" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_get_dmp_state</definition>
        <argsstring>(unsigned char *enabled)</argsstring>
        <name>mpu_get_dmp_state</name>
        <param>
          <type>unsigned char *</type>
          <declname>enabled</declname>
        </param>
        <briefdescription>
<para>Get DMP state. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="out">enabled</parametername>
</parameternamelist>
<parameterdescription>
<para>1 if enabled. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2416" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2416" bodyend="2420" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="78" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" compoundref="inv__mpu_8c" startline="267">chip_cfg_s::dmp_on</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga4764ce0ba4e07a4c774f69ab3b83d1f9" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int setup_compass</definition>
        <argsstring>(void)</argsstring>
        <name>setup_compass</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2424" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2424" bodyend="2527"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1gac52d7caf4efc485ef6faa1211bfe60dc" compoundref="inv__mpu_8c" startline="367">BIT_I2C_MST_VDDIO</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8ef1963ec6fb3df5586e50959cf00a70" compoundref="inv__mpu_8c" startline="391">BIT_I2C_READ</references>
        <references refid="group___d_r_i_v_e_r_s_1gae9440f48b6d70d900366dc040a8714d7" compoundref="inv__mpu_8c" startline="390">BIT_SLAVE_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" compoundref="inv__mpu_8c" startline="49">delay_ms</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga2bf6dc826bcb17168013f303c904544b" compoundref="inv__mpu_8c" startline="183">gyro_reg_s::i2c_mst</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1gab354affc295f7d61fe8a355c9361cc5a" compoundref="inv__mpu_8c" startline="58">log_e</references>
        <references refid="group___d_r_i_v_e_r_s_1ga36f70f38371b48d81094d3b061233e15" compoundref="inv__mpu_8c" startline="1817" endline="1860">mpu_set_bypass</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gac48a36b51e23bc4191ec13916bbb9d0b" compoundref="inv__mpu_8c" startline="757" endline="871">mpu_init</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga65e6b0ce980b8c0255d7be9b55c88c08" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_get_compass_reg</definition>
        <argsstring>(short *data, unsigned long *timestamp)</argsstring>
        <name>mpu_get_compass_reg</name>
        <param>
          <type>short *</type>
          <declname>data</declname>
        </param>
        <param>
          <type>unsigned long *</type>
          <declname>timestamp</declname>
        </param>
        <briefdescription>
<para>Read raw compass data. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="out">data</parametername>
</parameternamelist>
<parameterdescription>
<para>Raw data in hardware units. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="out">timestamp</parametername>
</parameternamelist>
<parameterdescription>
<para>Timestamp in milliseconds. Null if not needed. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2535" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2535" bodyend="2581" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="110" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3e6b6bc6d1cd2956353a31bfadd3c332" compoundref="inv__mpu_8c" startline="50">get_ms</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" compoundref="inv__mpu_8c" startline="48">i2c_read</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1ga7fc9c1dbdcb2ac8cc2a4128a5799482a" compoundref="inv__mpu_8h" startline="34">INV_XYZ_COMPASS</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gade8589573d09e0f14b84130428f286df" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_get_compass_fsr</definition>
        <argsstring>(unsigned short *fsr)</argsstring>
        <name>mpu_get_compass_fsr</name>
        <param>
          <type>unsigned short *</type>
          <declname>fsr</declname>
        </param>
        <briefdescription>
<para>Get the compass full-scale range. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="out">fsr</parametername>
</parameternamelist>
<parameterdescription>
<para>Current full-scale range. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2588" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2588" bodyend="2596" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="89" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mpu_lp_motion_interrupt</definition>
        <argsstring>(unsigned short thresh, unsigned char time, unsigned char lpa_freq)</argsstring>
        <name>mpu_lp_motion_interrupt</name>
        <param>
          <type>unsigned short</type>
          <declname>thresh</declname>
        </param>
        <param>
          <type>unsigned char</type>
          <declname>time</declname>
        </param>
        <param>
          <type>unsigned char</type>
          <declname>lpa_freq</declname>
        </param>
        <briefdescription>
<para>Enters LP accel motion interrupt mode. The behavior of this feature is very different between the MPU6050 and the MPU6500. Each chip&apos;s version of this feature is explained below. </para>
        </briefdescription>
        <detaileddescription>
<para><linebreak/>
 MPU6050: <linebreak/>
 When this mode is first enabled, the hardware captures a single accel sample, and subsequent samples are compared with this one to determine if the device is in motion. Therefore, whenever this &quot;locked&quot; sample needs to be changed, this function must be called again.</para>
<para><linebreak/>
 The hardware motion threshold can be between 32mg and 8160mg in 32mg increments.</para>
<para><linebreak/>
 Low-power accel mode supports the following frequencies: <linebreak/>
 1.25Hz, 5Hz, 20Hz, 40Hz</para>
<para><linebreak/>
 MPU6500: <linebreak/>
 Unlike the MPU6050 version, the hardware does not &quot;lock in&quot; a reference sample. The hardware monitors the accel data and detects any large change over a short period of time.</para>
<para><linebreak/>
 The hardware motion threshold can be between 4mg and 1020mg in 4mg increments.</para>
<para><linebreak/>
 MPU6500 Low-power accel mode supports the following frequencies: <linebreak/>
 1.25Hz, 2.5Hz, 5Hz, 10Hz, 20Hz, 40Hz, 80Hz, 160Hz, 320Hz, 640Hz</para>
<para><linebreak/>
<linebreak/>
 NOTES: <linebreak/>
 The driver will round down <emphasis>thresh</emphasis> to the nearest supported value if an unsupported threshold is selected. <linebreak/>
 To select a fractional wake-up frequency, round down the value passed to <emphasis>lpa_freq</emphasis>. <linebreak/>
 The MPU6500 does not support a delay parameter. If this function is used for the MPU6500, the value passed to <emphasis>time</emphasis> will be ignored. <linebreak/>
 To disable this mode, set <emphasis>lpa_freq</emphasis> to zero. The driver will restore the previous configuration.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">thresh</parametername>
</parameternamelist>
<parameterdescription>
<para>Motion threshold in mg. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">time</parametername>
</parameternamelist>
<parameterdescription>
<para>Duration in milliseconds that the accel data must exceed <emphasis>thresh</emphasis> before motion is reported. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">lpa_freq</parametername>
</parameternamelist>
<parameterdescription>
<para>Minimum sampling rate, or zero to disable. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 if successful. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2642" column="5" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2642" bodyend="2848" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="72" declcolumn="5"/>
        <references refid="group___d_r_i_v_e_r_s_1gae93a446c54cc00bc7f11209d7af0025e" compoundref="inv__mpu_8c" startline="164">gyro_reg_s::accel_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gacfb901facda5ef8a02d47726db98e58e" compoundref="inv__mpu_8c" startline="223">motion_int_cache_s::accel_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1gaf66873be1446ed552812e32d40eced61" compoundref="inv__mpu_8c" startline="238">chip_cfg_s::accel_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" compoundref="inv__mpu_8c" startline="206">hw_s::addr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga63e6f23af37626aa1498d8c248f259e7" compoundref="inv__mpu_8c" startline="399">BIT_LPA_CYCLE</references>
        <references refid="group___d_r_i_v_e_r_s_1ga6a8f2f7f3dd17bc05d9c6286d15c7ada" compoundref="inv__mpu_8c" startline="375">BIT_MOT_INT_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4e2ef22b94b90f9b83394dfe1f688ce4" compoundref="inv__mpu_8c" startline="407">BIT_STBY_XYZG</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3c9c0234d4a71c9d35bb0da64ea867eb" compoundref="inv__mpu_8c" startline="378">BITS_HPF</references>
        <references refid="group___d_r_i_v_e_r_s_1ga75b1479e451b747afb3b24cbc4df99f7" compoundref="inv__mpu_8c" startline="398">BITS_WOM_EN</references>
        <references refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" compoundref="inv__mpu_8c" startline="261">chip_cfg_s::cache</references>
        <references refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" compoundref="inv__mpu_8c" startline="302">gyro_state_s::chip_cfg</references>
        <references refid="group___d_r_i_v_e_r_s_1gab7bd5165d6e62cb0d814cf3401958445" compoundref="inv__mpu_8c" startline="243">chip_cfg_s::clk_src</references>
        <references refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" compoundref="inv__mpu_8c" startline="49">delay_ms</references>
        <references refid="group___d_r_i_v_e_r_s_1ga6461e400e336d2ccbc8c7d95ace9461d" compoundref="inv__mpu_8c" startline="228">motion_int_cache_s::dmp_on</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" compoundref="inv__mpu_8c" startline="267">chip_cfg_s::dmp_on</references>
        <references refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" compoundref="inv__mpu_8c" startline="247">chip_cfg_s::fifo_enable</references>
        <references refid="group___d_r_i_v_e_r_s_1ga41501694a84bdf70e9c660852b653273" compoundref="inv__mpu_8c" startline="227">motion_int_cache_s::fifo_sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1gae9614e4c92be9fc08f2aec7f34853fbc" compoundref="inv__mpu_8c" startline="222">motion_int_cache_s::gyro_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1gab45a727aeee17380828a3e20ccb375c2" compoundref="inv__mpu_8c" startline="236">chip_cfg_s::gyro_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" compoundref="inv__mpu_8c" startline="301">gyro_state_s::hw</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" compoundref="inv__mpu_8c" startline="47">i2c_write</references>
        <references refid="group___d_r_i_v_e_r_s_1ga48b47844d4b0570e60aa6806faa59eae" compoundref="inv__mpu_8c" startline="174">gyro_reg_s::int_enable</references>
        <references refid="group___d_r_i_v_e_r_s_1ga279cd5d5d78890357f2d42905d7471df" compoundref="inv__mpu_8c" startline="260">chip_cfg_s::int_motion_only</references>
        <references refid="group___d_r_i_v_e_r_s_1gga75570f009627c6f4ddfb2d936d81e207a01b240917a78674d3e387110a6a8f94c" compoundref="inv__mpu_8c" startline="340">INV_CLK_PLL</references>
        <references refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a9f0263fbbdccd3c5a18fcb65be278d24" compoundref="inv__mpu_8c" startline="308">INV_FILTER_256HZ_NOLPF2</references>
        <references refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7ab44c7d0127a9466747853533a537b567" compoundref="inv__mpu_8c" startline="347">INV_LPA_1_25HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7accaaf47c58dfe32cbf2ffa11fdb83108" compoundref="inv__mpu_8c" startline="349">INV_LPA_20HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a798d2b86eafcf3fc7c7fe775f46cb4cb" compoundref="inv__mpu_8c" startline="350">INV_LPA_40HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a474cac76bff369dd656cc973207a1ca5" compoundref="inv__mpu_8c" startline="348">INV_LPA_5HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1ga22eeac0bd77e7d99b3e15dda52f1bd08" compoundref="inv__mpu_8c" startline="159">gyro_reg_s::lpf</references>
        <references refid="group___d_r_i_v_e_r_s_1gac1a1eb41631eb71481d6d247d9c67d4a" compoundref="inv__mpu_8c" startline="224">motion_int_cache_s::lpf</references>
        <references refid="group___d_r_i_v_e_r_s_1ga16ec8ca8298f62ac01419775377270fb" compoundref="inv__mpu_8c" startline="242">chip_cfg_s::lpf</references>
        <references refid="group___d_r_i_v_e_r_s_1gab2065a062ea7d6179cd8407b2ab4d146" compoundref="inv__mpu_8c" startline="167">gyro_reg_s::motion_thr</references>
        <references refid="group___d_r_i_v_e_r_s_1gababbdda287e1f19323489f90a0889dd7" compoundref="inv__mpu_8c" startline="1531" endline="1566">mpu_configure_fifo</references>
        <references refid="group___d_r_i_v_e_r_s_1gab6087a15ee23db23b6aec41590329a60" compoundref="inv__mpu_8c" startline="1218" endline="1239">mpu_get_accel_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga093f11eb10b2639a4b9fe344ea348c54" compoundref="inv__mpu_8c" startline="1516" endline="1520">mpu_get_fifo_config</references>
        <references refid="group___d_r_i_v_e_r_s_1gaf973c32c73ba912ff512aab948fc31ca" compoundref="inv__mpu_8c" startline="1154" endline="1174">mpu_get_gyro_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa95c7e216dcb2d888e9796001ca555f8" compoundref="inv__mpu_8c" startline="1283" endline="1311">mpu_get_lpf</references>
        <references refid="group___d_r_i_v_e_r_s_1ga2487dd551b701c1c7ed4d6335f02b2f1" compoundref="inv__mpu_8c" startline="1352" endline="1359">mpu_get_sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3a4fea75686ab7d2e68634e81ccac04c" compoundref="inv__mpu_8c" startline="888" endline="964">mpu_lp_accel_mode</references>
        <references refid="group___d_r_i_v_e_r_s_1ga2713a96af104cfb2ae8e0ed4c3718119" compoundref="inv__mpu_8c" startline="1246" endline="1276">mpu_set_accel_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga68ed20e6c9663cd7c50469329af8715f" compoundref="inv__mpu_8c" startline="2377" endline="2409">mpu_set_dmp_state</references>
        <references refid="group___d_r_i_v_e_r_s_1gad09e6031c8677adc0b8a39b6deea8e27" compoundref="inv__mpu_8c" startline="1181" endline="1211">mpu_set_gyro_fsr</references>
        <references refid="group___d_r_i_v_e_r_s_1ga5661a9dee25152166769910767a2a93d" compoundref="inv__mpu_8c" startline="1319" endline="1345">mpu_set_lpf</references>
        <references refid="group___d_r_i_v_e_r_s_1ga0144d666a67a82888b8580002afe8b55" compoundref="inv__mpu_8c" startline="1367" endline="1407">mpu_set_sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1ga6e77e7cc1cf6be5e8fdf617c5b4586d1" compoundref="inv__mpu_8c" startline="1592" endline="1662">mpu_set_sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa01fb0872030e8e2932f8d1d257ea86a" compoundref="inv__mpu_8c" startline="178">gyro_reg_s::pwr_mgmt_1</references>
        <references refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" compoundref="inv__mpu_8c" startline="300">gyro_state_s::reg</references>
        <references refid="group___d_r_i_v_e_r_s_1ga1cf6b7edfe37a51209897ccc448ec0e6" compoundref="inv__mpu_8c" startline="225">motion_int_cache_s::sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1ga2660470fcf7b53e2e832a397cbe6c354" compoundref="inv__mpu_8c" startline="245">chip_cfg_s::sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" compoundref="inv__mpu_8c" startline="240">chip_cfg_s::sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1gae5416a4097b0cf39460df70094bc474d" compoundref="inv__mpu_8c" startline="226">motion_int_cache_s::sensors_on</references>
        <references refid="group___d_r_i_v_e_r_s_1gafd5ebff6b0179e1dce0b68c2272cae07" compoundref="inv__mpu_8c" startline="681" endline="707">set_int_enable</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" compoundref="inv__mpu_8c" startline="577">st</references>
        <references refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" compoundref="inv__mpu_8c" startline="161">gyro_reg_s::user_ctrl</references>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gaff893f93277595387023c71d46b03c42" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="varint_8h_1a92c50087ca0e64fa93fc59402c55f8ca" kindref="member">u8</ref></type>
        <definition>u8 run_self_test</definition>
        <argsstring>(void)</argsstring>
        <name>run_self_test</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2874" column="4" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2874" bodyend="2896" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="135" declcolumn="4"/>
        <references refid="group___d_r_i_v_e_r_s_1gafbd714aee6086836f70aaea847771669" compoundref="inv__mpu__dmp__motion__driver_8c" startline="632" endline="676">dmp_set_accel_bias</references>
        <references refid="group___d_r_i_v_e_r_s_1ga4766e37ef95cbf0044c8f9594ed811d1" compoundref="inv__mpu__dmp__motion__driver_8c" startline="580" endline="624">dmp_set_gyro_bias</references>
        <references refid="group___d_r_i_v_e_r_s_1ga620408949052b96e856cad920f856583" compoundref="inv__mpu_8c" startline="1484" endline="1505">mpu_get_accel_sens</references>
        <references refid="group___d_r_i_v_e_r_s_1ga023c0cc94aa8f162dc33b15048a49421" compoundref="inv__mpu_8c" startline="1458" endline="1477">mpu_get_gyro_sens</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" compoundref="inv__mpu_8c" startline="2169" endline="2260">mpu_run_self_test</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gafac8fcbf24cfa1b69737e02238580f3a" compoundref="inv__mpu_8c" startline="2937" endline="2963">mpu_dmp_init</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga3ff6037a69f37bb6174355936ad67ef3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>unsigned short</type>
        <definition>unsigned short inv_orientation_matrix_to_scalar</definition>
        <argsstring>(const signed char *mtx)</argsstring>
        <name>inv_orientation_matrix_to_scalar</name>
        <param>
          <type>const signed char *</type>
          <declname>mtx</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2898" column="16" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2898" bodyend="2912" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="134" declcolumn="16"/>
        <references refid="group___d_r_i_v_e_r_s_1ga2b58dae1c0567f3f9f6dcbfb07476de7" compoundref="inv__mpu_8c" startline="2914" endline="2931">inv_row_2_scale</references>
        <referencedby refid="group___d_r_i_v_e_r_s_1gafac8fcbf24cfa1b69737e02238580f3a" compoundref="inv__mpu_8c" startline="2937" endline="2963">mpu_dmp_init</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1ga2b58dae1c0567f3f9f6dcbfb07476de7" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>unsigned short</type>
        <definition>unsigned short inv_row_2_scale</definition>
        <argsstring>(const signed char *row)</argsstring>
        <name>inv_row_2_scale</name>
        <param>
          <type>const signed char *</type>
          <declname>row</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2914" column="16" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2914" bodyend="2931" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="133" declcolumn="16"/>
        <referencedby refid="group___d_r_i_v_e_r_s_1ga3ff6037a69f37bb6174355936ad67ef3" compoundref="inv__mpu_8c" startline="2898" endline="2912">inv_orientation_matrix_to_scalar</referencedby>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gafa3071c8321f6e8dd2036be8a1e57ad0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void mget_ms</definition>
        <argsstring>(unsigned long *time)</argsstring>
        <name>mget_ms</name>
        <param>
          <type>unsigned long *</type>
          <declname>time</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2933" column="6" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2933" bodyend="2933" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="132" declcolumn="6"/>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gafac8fcbf24cfa1b69737e02238580f3a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="varint_8h_1a92c50087ca0e64fa93fc59402c55f8ca" kindref="member">u8</ref></type>
        <definition>u8 mpu_dmp_init</definition>
        <argsstring>(void)</argsstring>
        <name>mpu_dmp_init</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2937" column="4" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2937" bodyend="2963" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="136" declcolumn="4"/>
        <references refid="group___d_r_i_v_e_r_s_1ga292d717406e906831952ce46612fe4cd" compoundref="inv__mpu_8h" startline="27">DEFAULT_MPU_HZ</references>
        <references refid="group___d_r_i_v_e_r_s_1ga70c485bdfa30515e5b869b081192caa1" compoundref="inv__mpu__dmp__motion__driver_8c" startline="997" endline="1112">dmp_enable_feature</references>
        <references refid="group___d_r_i_v_e_r_s_1gae879a3c9729f9e1be5e6d7c9211c69c0" compoundref="inv__mpu__dmp__motion__driver_8h" startline="44">DMP_FEATURE_6X_LP_QUAT</references>
        <references refid="group___d_r_i_v_e_r_s_1gaf2b250fc928390d562f7bd80300ce419" compoundref="inv__mpu__dmp__motion__driver_8h" startline="41">DMP_FEATURE_ANDROID_ORIENT</references>
        <references refid="group___d_r_i_v_e_r_s_1gaaf0ac890c1f83106c08b722f1e865fdb" compoundref="inv__mpu__dmp__motion__driver_8h" startline="45">DMP_FEATURE_GYRO_CAL</references>
        <references refid="group___d_r_i_v_e_r_s_1ga40462c6fd55b04b2f79723dd737ee795" compoundref="inv__mpu__dmp__motion__driver_8h" startline="48">DMP_FEATURE_SEND_CAL_GYRO</references>
        <references refid="group___d_r_i_v_e_r_s_1ga9eeb257febe4a305df7ad4cf31dc2755" compoundref="inv__mpu__dmp__motion__driver_8h" startline="46">DMP_FEATURE_SEND_RAW_ACCEL</references>
        <references refid="group___d_r_i_v_e_r_s_1ga87fac39cf95e2c56afdf507a986fa00b" compoundref="inv__mpu__dmp__motion__driver_8h" startline="40">DMP_FEATURE_TAP</references>
        <references refid="group___d_r_i_v_e_r_s_1ga66626a842452f444e9af29cb0d2c6150" compoundref="inv__mpu__dmp__motion__driver_8c" startline="512" endline="516">dmp_load_motion_driver_firmware</references>
        <references refid="group___d_r_i_v_e_r_s_1ga5399728fd572a7694af20286cc9d4121" compoundref="inv__mpu__dmp__motion__driver_8c" startline="684" endline="703">dmp_set_fifo_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1ga6cb5ff144ce6e1546f00809de8bb24a4" compoundref="inv__mpu__dmp__motion__driver_8c" startline="525" endline="568">dmp_set_orientation</references>
        <references refid="group___d_r_i_v_e_r_s_1gadcca9e3dfdbc53cc5509fabdaede02b8" compoundref="inv__mpu_8c" startline="2868">gyro_orientation</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3ff6037a69f37bb6174355936ad67ef3" compoundref="inv__mpu_8c" startline="2898" endline="2912">inv_orientation_matrix_to_scalar</references>
        <references refid="group___d_r_i_v_e_r_s_1gaa03f025a17ed491e70b88274e89c75c5" compoundref="inv__mpu_8h" startline="33">INV_XYZ_ACCEL</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3fdc30f9c0a26c2c4e2bb88921f91629" compoundref="inv__mpu_8h" startline="32">INV_XYZ_GYRO</references>
        <references refid="group___d_r_i_v_e_r_s_1gababbdda287e1f19323489f90a0889dd7" compoundref="inv__mpu_8c" startline="1531" endline="1566">mpu_configure_fifo</references>
        <references refid="group___d_r_i_v_e_r_s_1gac48a36b51e23bc4191ec13916bbb9d0b" compoundref="inv__mpu_8c" startline="757" endline="871">mpu_init</references>
        <references refid="group___d_r_i_v_e_r_s_1ga68ed20e6c9663cd7c50469329af8715f" compoundref="inv__mpu_8c" startline="2377" endline="2409">mpu_set_dmp_state</references>
        <references refid="group___d_r_i_v_e_r_s_1ga0144d666a67a82888b8580002afe8b55" compoundref="inv__mpu_8c" startline="1367" endline="1407">mpu_set_sample_rate</references>
        <references refid="group___d_r_i_v_e_r_s_1ga6e77e7cc1cf6be5e8fdf617c5b4586d1" compoundref="inv__mpu_8c" startline="1592" endline="1662">mpu_set_sensors</references>
        <references refid="group___d_r_i_v_e_r_s_1gaff893f93277595387023c71d46b03c42" compoundref="inv__mpu_8c" startline="2874" endline="2896">run_self_test</references>
      </memberdef>
      <memberdef kind="function" id="group___d_r_i_v_e_r_s_1gacb825f2fd99c3044d012a9b25608cc18" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="varint_8h_1a92c50087ca0e64fa93fc59402c55f8ca" kindref="member">u8</ref></type>
        <definition>u8 mpu_dmp_get_data</definition>
        <argsstring>(float *pitch, float *roll, float *yaw)</argsstring>
        <name>mpu_dmp_get_data</name>
        <param>
          <type>float *</type>
          <declname>pitch</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>roll</declname>
        </param>
        <param>
          <type>float *</type>
          <declname>yaw</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" line="2970" column="4" bodyfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c" bodystart="2970" bodyend="2999" declfile="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.h" declline="137" declcolumn="4"/>
        <references refid="group___d_r_i_v_e_r_s_1ga02db5f25359abe84be002c543cdc3803" compoundref="inv__mpu__dmp__motion__driver_8c" startline="1268" endline="1347">dmp_read_fifo</references>
        <references refid="group___d_r_i_v_e_r_s_1ga3d79cffe845a796a27d03432a1f2ade0" compoundref="inv__mpu__dmp__motion__driver_8h" startline="50">INV_WXYZ_QUAT</references>
        <references refid="group___d_r_i_v_e_r_s_1ga0c2ff73765f99e113d4f99826f9601e5" compoundref="inv__mpu_8c" startline="2865">q30</references>
      </memberdef>
      </sectiondef>
    <briefdescription>
<para>An I2C-based driver for Invensense gyroscopes. </para>
    </briefdescription>
    <detaileddescription>
<para>This driver currently works for the following devices: MPU6050 MPU6500 MPU9150 (or MPU6050 w/ AK8975 on the auxiliary bus) MPU9250 (or MPU6500 w/ AK8963 on the auxiliary bus) </para>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>$License:</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/><sp/><sp/><sp/>Copyright<sp/>(C)<sp/>2011-2012<sp/>InvenSense<sp/>Corporation,<sp/>All<sp/>Rights<sp/>Reserved.</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/><sp/><sp/><sp/>See<sp/>included<sp/>License.txt<sp/>for<sp/>License<sp/>information.</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>$</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdio.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdlib.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;string.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;math.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="inv__mpu_8h" kindref="compound">inv_mpu.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="inv__mpu__dmp__motion__driver_8h" kindref="compound">inv_mpu_dmp_motion_driver.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="mpu6050_8h" kindref="compound">mpu6050.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;usart.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="varint_8h" kindref="compound">varint.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30" refid="group___d_r_i_v_e_r_s_1ga6d132f914f18cb144a0eaf36312045c8" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MPU6050<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//定义我们使用的传感器为MPU6050</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31" refid="group___d_r_i_v_e_r_s_1gaf5aa4c072d42b67d74043f642b68ddd7" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MOTION_DRIVER_TARGET_MSP430<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//定义驱动部分,采用MSP430的驱动(移植到STM32F1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>The<sp/>following<sp/>functions<sp/>must<sp/>be<sp/>defined<sp/>for<sp/>this<sp/>platform:</highlight></codeline>
<codeline lineno="34"><highlight class="comment"><sp/>*<sp/>i2c_write(unsigned<sp/>char<sp/>slave_addr,<sp/>unsigned<sp/>char<sp/>reg_addr,</highlight></codeline>
<codeline lineno="35"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/>unsigned<sp/>char<sp/>length,<sp/>unsigned<sp/>char<sp/>const<sp/>*data)</highlight></codeline>
<codeline lineno="36"><highlight class="comment"><sp/>*<sp/>i2c_read(unsigned<sp/>char<sp/>slave_addr,<sp/>unsigned<sp/>char<sp/>reg_addr,</highlight></codeline>
<codeline lineno="37"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/>unsigned<sp/>char<sp/>length,<sp/>unsigned<sp/>char<sp/>*data)</highlight></codeline>
<codeline lineno="38"><highlight class="comment"><sp/>*<sp/>delay_ms(unsigned<sp/>long<sp/>num_ms)</highlight></codeline>
<codeline lineno="39"><highlight class="comment"><sp/>*<sp/>get_ms(unsigned<sp/>long<sp/>*count)</highlight></codeline>
<codeline lineno="40"><highlight class="comment"><sp/>*<sp/>reg_int_cb(void<sp/>(*cb)(void),<sp/>unsigned<sp/>char<sp/>port,<sp/>unsigned<sp/>char<sp/>pin)</highlight></codeline>
<codeline lineno="41"><highlight class="comment"><sp/>*<sp/>labs(long<sp/>x)</highlight></codeline>
<codeline lineno="42"><highlight class="comment"><sp/>*<sp/>fabsf(float<sp/>x)</highlight></codeline>
<codeline lineno="43"><highlight class="comment"><sp/>*<sp/>min(int<sp/>a,<sp/>int<sp/>b)</highlight></codeline>
<codeline lineno="44"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>MOTION_DRIVER_TARGET_MSP430</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight></codeline>
<codeline lineno="47" refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>i2c_write<sp/><sp/><sp/>MPU_Write_Len</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48" refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>i2c_read<sp/><sp/><sp/><sp/>MPU_Read_Len</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49" refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>delay_ms<sp/><sp/><sp/><sp/>HAL_Delay</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50" refid="group___d_r_i_v_e_r_s_1ga3e6b6bc6d1cd2956353a31bfadd3c332" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>get_ms<sp/><sp/><sp/><sp/><sp/><sp/>mget_ms</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight><highlight class="comment">//static<sp/>inline<sp/>int<sp/>reg_int_cb(struct<sp/>int_param_s<sp/>*int_param)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight><highlight class="comment">//{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>return<sp/>msp430_reg_int_cb(int_param-&gt;cb,<sp/>int_param-&gt;pin,<sp/>int_param-&gt;lp_exit,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int_param-&gt;active_low);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight><highlight class="comment">//}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56" refid="group___d_r_i_v_e_r_s_1ga69f90a1116c37ff659a096f2932c3988" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga69f90a1116c37ff659a096f2932c3988" kindref="member">log_none</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*fmt,...){;}</highlight></codeline>
<codeline lineno="57" refid="group___d_r_i_v_e_r_s_1ga2905fba7885cd95057e1655cb4d16bda" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>log_i<sp/><sp/><sp/>log_none<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//打印信息</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58" refid="group___d_r_i_v_e_r_s_1gab354affc295f7d61fe8a355c9361cc5a" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>log_e<sp/><sp/><sp/>log_none<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//打印信息</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>labs<sp/>is<sp/>already<sp/>defined<sp/>by<sp/>TI&apos;s<sp/>toolchain.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>fabs<sp/>is<sp/>for<sp/>doubles.<sp/>fabsf<sp/>is<sp/>for<sp/>floats.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61" refid="group___d_r_i_v_e_r_s_1ga95bcc5f260df5ce993730008a1dcb45a" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>fabs<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fabsf</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62" refid="group___d_r_i_v_e_r_s_1gac6afabdc09a49a433ee19d8a9486056d" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>min(a,b)<sp/>((a&lt;b)?a:b)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined<sp/>EMPL_TARGET_MSP430</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;msp430.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;msp430_i2c.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;msp430_clock.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;msp430_interrupt.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;log.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>i2c_write<sp/><sp/><sp/>msp430_i2c_write</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>i2c_read<sp/><sp/><sp/><sp/>msp430_i2c_read</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>delay_ms<sp/><sp/><sp/><sp/>msp430_delay_ms</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>get_ms<sp/><sp/><sp/><sp/><sp/><sp/>msp430_get_clock_ms</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>reg_int_cb(</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structint__param__s" kindref="compound">int_param_s</ref><sp/>*int_param)</highlight></codeline>
<codeline lineno="74"><highlight class="normal">{</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>msp430_reg_int_cb(int_param-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga97093754f1f13b06492990e3da77965d" kindref="member">cb</ref>,<sp/>int_param-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga5c682e1b664acf566f985b48dd7acbb7" kindref="member">pin</ref>,<sp/>int_param-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga46dfad5a278a8b40a68d71beca0d2be4" kindref="member">lp_exit</ref>,</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int_param-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga9b859a3332d9bd9287d5766494f261fb" kindref="member">active_low</ref>);</highlight></codeline>
<codeline lineno="77"><highlight class="normal">}</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>log_i<sp/><sp/><sp/><sp/><sp/><sp/><sp/>MPL_LOGI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>log_e<sp/><sp/><sp/><sp/><sp/><sp/><sp/>MPL_LOGE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>labs<sp/>is<sp/>already<sp/>defined<sp/>by<sp/>TI&apos;s<sp/>toolchain.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>fabs<sp/>is<sp/>for<sp/>doubles.<sp/>fabsf<sp/>is<sp/>for<sp/>floats.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>fabs<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fabsf</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>min(a,b)<sp/>((a&lt;b)?a:b)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined<sp/>EMPL_TARGET_UC3L0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Instead<sp/>of<sp/>using<sp/>the<sp/>standard<sp/>TWI<sp/>driver<sp/>from<sp/>the<sp/>ASF<sp/>library,<sp/>we&apos;re<sp/>using</highlight></codeline>
<codeline lineno="86"><highlight class="comment"><sp/>*<sp/>a<sp/>TWI<sp/>driver<sp/>that<sp/>follows<sp/>the<sp/>slave<sp/>address<sp/>+<sp/>register<sp/>address<sp/>convention.</highlight></codeline>
<codeline lineno="87"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;twi.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;delay.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;sysclk.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;log.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;sensors_xplained.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;uc3l0_clock.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>i2c_write(a,<sp/>b,<sp/>c,<sp/>d)<sp/><sp/><sp/>twi_write(a,<sp/>b,<sp/>d,<sp/>c)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>i2c_read(a,<sp/>b,<sp/>c,<sp/>d)<sp/><sp/><sp/><sp/>twi_read(a,<sp/>b,<sp/>d,<sp/>c)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>delay_ms<sp/>is<sp/>a<sp/>function<sp/>already<sp/>defined<sp/>in<sp/>ASF.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>get_ms<sp/><sp/>uc3l0_get_clock_ms</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>reg_int_cb(</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structint__param__s" kindref="compound">int_param_s</ref><sp/>*int_param)</highlight></codeline>
<codeline lineno="99"><highlight class="normal">{</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/>sensor_board_irq_connect(int_param-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga5c682e1b664acf566f985b48dd7acbb7" kindref="member">pin</ref>,<sp/>int_param-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga97093754f1f13b06492990e3da77965d" kindref="member">cb</ref>,<sp/>int_param-&gt;arg);</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="102"><highlight class="normal">}</highlight></codeline>
<codeline lineno="103"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>log_i<sp/><sp/><sp/><sp/><sp/><sp/><sp/>MPL_LOGI</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>log_e<sp/><sp/><sp/><sp/><sp/><sp/><sp/>MPL_LOGE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>UC3<sp/>is<sp/>a<sp/>32-bit<sp/>processor,<sp/>so<sp/>abs<sp/>and<sp/>labs<sp/>are<sp/>equivalent.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>labs<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>abs</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>fabs(x)<sp/><sp/><sp/><sp/><sp/>(((x)&gt;0)?(x):-(x))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight><highlight class="preprocessor">#error<sp/><sp/>Gyro<sp/>driver<sp/>is<sp/>missing<sp/>the<sp/>system<sp/>layer<sp/>implementations.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>!defined<sp/>MPU6050<sp/>&amp;&amp;<sp/>!defined<sp/>MPU9150<sp/>&amp;&amp;<sp/>!defined<sp/>MPU6500<sp/>&amp;&amp;<sp/>!defined<sp/>MPU9250</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight><highlight class="preprocessor">#error<sp/><sp/>Which<sp/>gyro<sp/>are<sp/>you<sp/>using?<sp/>Define<sp/>MPUxxxx<sp/>in<sp/>your<sp/>compiler<sp/>options.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Time<sp/>for<sp/>some<sp/>messy<sp/>macro<sp/>work.<sp/>=]</highlight></codeline>
<codeline lineno="117"><highlight class="comment"><sp/>*<sp/>#define<sp/>MPU9150</highlight></codeline>
<codeline lineno="118"><highlight class="comment"><sp/>*<sp/>is<sp/>equivalent<sp/>to..</highlight></codeline>
<codeline lineno="119"><highlight class="comment"><sp/>*<sp/>#define<sp/>MPU6050</highlight></codeline>
<codeline lineno="120"><highlight class="comment"><sp/>*<sp/>#define<sp/>AK8975_SECONDARY</highlight></codeline>
<codeline lineno="121"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="122"><highlight class="comment"><sp/>*<sp/>#define<sp/>MPU9250</highlight></codeline>
<codeline lineno="123"><highlight class="comment"><sp/>*<sp/>is<sp/>equivalent<sp/>to..</highlight></codeline>
<codeline lineno="124"><highlight class="comment"><sp/>*<sp/>#define<sp/>MPU6500</highlight></codeline>
<codeline lineno="125"><highlight class="comment"><sp/>*<sp/>#define<sp/>AK8963_SECONDARY</highlight></codeline>
<codeline lineno="126"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>MPU9150</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>MPU6050</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MPU6050</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>MPU6050<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>AK8963_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight><highlight class="preprocessor">#error<sp/>&quot;MPU9150<sp/>and<sp/>AK8963_SECONDARY<sp/>cannot<sp/>both<sp/>be<sp/>defined.&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>!defined<sp/>AK8975_SECONDARY<sp/></highlight><highlight class="comment">/*<sp/>#if<sp/>defined<sp/>AK8963_SECONDARY<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AK8975_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>#if<sp/>defined<sp/>AK8963_SECONDARY<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined<sp/>MPU9250<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>#if<sp/>defined<sp/>MPU9150<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>MPU6500</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MPU6500</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>MPU6500<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>AK8975_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"></highlight><highlight class="preprocessor">#error<sp/>&quot;MPU9250<sp/>and<sp/>AK8975_SECONDARY<sp/>cannot<sp/>both<sp/>be<sp/>defined.&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>!defined<sp/>AK8963_SECONDARY<sp/></highlight><highlight class="comment">/*<sp/>#if<sp/>defined<sp/>AK8975_SECONDARY<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AK8963_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>#if<sp/>defined<sp/>AK8975_SECONDARY<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>#if<sp/>defined<sp/>MPU9150<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>AK8975_SECONDARY<sp/>||<sp/>defined<sp/>AK8963_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="150"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>#warning<sp/>&quot;No<sp/>compass<sp/>=<sp/>less<sp/>profit<sp/>for<sp/>Invensense.<sp/>Lame.&quot;<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gafd5ebff6b0179e1dce0b68c2272cae07" kindref="member">set_int_enable</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>enable);</highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Hardware<sp/>registers<sp/>needed<sp/>by<sp/>driver.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156" refid="structgyro__reg__s" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structgyro__reg__s" kindref="compound">gyro_reg_s</ref><sp/>{</highlight></codeline>
<codeline lineno="157" refid="group___d_r_i_v_e_r_s_1ga51068a36efe9d2aedc9cb8fffacbf15b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga51068a36efe9d2aedc9cb8fffacbf15b" kindref="member">who_am_i</ref>;</highlight></codeline>
<codeline lineno="158" refid="group___d_r_i_v_e_r_s_1ga27dd9db31f16ca170520b3009255e6d0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga27dd9db31f16ca170520b3009255e6d0" kindref="member">rate_div</ref>;</highlight></codeline>
<codeline lineno="159" refid="group___d_r_i_v_e_r_s_1ga22eeac0bd77e7d99b3e15dda52f1bd08" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga22eeac0bd77e7d99b3e15dda52f1bd08" kindref="member">lpf</ref>;</highlight></codeline>
<codeline lineno="160" refid="group___d_r_i_v_e_r_s_1gaf418d8a6b0e262df54ab8a6a5228011c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaf418d8a6b0e262df54ab8a6a5228011c" kindref="member">prod_id</ref>;</highlight></codeline>
<codeline lineno="161" refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" kindref="member">user_ctrl</ref>;</highlight></codeline>
<codeline lineno="162" refid="group___d_r_i_v_e_r_s_1ga6a392b7ecae843c734db3d832f11af49" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga6a392b7ecae843c734db3d832f11af49" kindref="member">fifo_en</ref>;</highlight></codeline>
<codeline lineno="163" refid="group___d_r_i_v_e_r_s_1gada0b973f74cc874552f079fd58c435a6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gada0b973f74cc874552f079fd58c435a6" kindref="member">gyro_cfg</ref>;</highlight></codeline>
<codeline lineno="164" refid="group___d_r_i_v_e_r_s_1gae93a446c54cc00bc7f11209d7af0025e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gae93a446c54cc00bc7f11209d7af0025e" kindref="member">accel_cfg</ref>;</highlight></codeline>
<codeline lineno="165"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>unsigned<sp/>char<sp/>accel_cfg2;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>unsigned<sp/>char<sp/>lp_accel_odr;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="167" refid="group___d_r_i_v_e_r_s_1gab2065a062ea7d6179cd8407b2ab4d146" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gab2065a062ea7d6179cd8407b2ab4d146" kindref="member">motion_thr</ref>;</highlight></codeline>
<codeline lineno="168" refid="group___d_r_i_v_e_r_s_1ga57d7f3d79c8227e1795764222e2a4a6e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga57d7f3d79c8227e1795764222e2a4a6e" kindref="member">motion_dur</ref>;</highlight></codeline>
<codeline lineno="169" refid="group___d_r_i_v_e_r_s_1gab7503974d62cf9c2d688579fcd1abd48" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gab7503974d62cf9c2d688579fcd1abd48" kindref="member">fifo_count_h</ref>;</highlight></codeline>
<codeline lineno="170" refid="group___d_r_i_v_e_r_s_1gacb6763dc5f368ea01ef7c733cea9dab4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gacb6763dc5f368ea01ef7c733cea9dab4" kindref="member">fifo_r_w</ref>;</highlight></codeline>
<codeline lineno="171" refid="group___d_r_i_v_e_r_s_1gab5c2246c44bb36b21596fe5acf7ec0d4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gab5c2246c44bb36b21596fe5acf7ec0d4" kindref="member">raw_gyro</ref>;</highlight></codeline>
<codeline lineno="172" refid="group___d_r_i_v_e_r_s_1ga9b7c162cea6a3deeaac41444c613b7bc" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga9b7c162cea6a3deeaac41444c613b7bc" kindref="member">raw_accel</ref>;</highlight></codeline>
<codeline lineno="173" refid="group___d_r_i_v_e_r_s_1ga47674fab0681811c1b733462944e0233" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga47674fab0681811c1b733462944e0233" kindref="member">temp</ref>;</highlight></codeline>
<codeline lineno="174" refid="group___d_r_i_v_e_r_s_1ga48b47844d4b0570e60aa6806faa59eae" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga48b47844d4b0570e60aa6806faa59eae" kindref="member">int_enable</ref>;</highlight></codeline>
<codeline lineno="175" refid="group___d_r_i_v_e_r_s_1gaea6ad456241786750b3f211bc92032eb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaea6ad456241786750b3f211bc92032eb" kindref="member">dmp_int_status</ref>;</highlight></codeline>
<codeline lineno="176" refid="group___d_r_i_v_e_r_s_1ga837724080c34ff5a190751427febaf91" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga837724080c34ff5a190751427febaf91" kindref="member">int_status</ref>;</highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>unsigned<sp/>char<sp/>accel_intel;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="178" refid="group___d_r_i_v_e_r_s_1gaa01fb0872030e8e2932f8d1d257ea86a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaa01fb0872030e8e2932f8d1d257ea86a" kindref="member">pwr_mgmt_1</ref>;</highlight></codeline>
<codeline lineno="179" refid="group___d_r_i_v_e_r_s_1ga3e378b0c77e9529ee93ac6eba11e1031" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3e378b0c77e9529ee93ac6eba11e1031" kindref="member">pwr_mgmt_2</ref>;</highlight></codeline>
<codeline lineno="180" refid="group___d_r_i_v_e_r_s_1gaae7bdbff2a1029245890b555b2d8d519" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaae7bdbff2a1029245890b555b2d8d519" kindref="member">int_pin_cfg</ref>;</highlight></codeline>
<codeline lineno="181" refid="group___d_r_i_v_e_r_s_1gae17166b43fa12a960c0eced9a3c04bf0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gae17166b43fa12a960c0eced9a3c04bf0" kindref="member">mem_r_w</ref>;</highlight></codeline>
<codeline lineno="182" refid="group___d_r_i_v_e_r_s_1gab745dd73e0c3ef01f30f96444358cb89" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gab745dd73e0c3ef01f30f96444358cb89" kindref="member">accel_offs</ref>;</highlight></codeline>
<codeline lineno="183" refid="group___d_r_i_v_e_r_s_1ga2bf6dc826bcb17168013f303c904544b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga2bf6dc826bcb17168013f303c904544b" kindref="member">i2c_mst</ref>;</highlight></codeline>
<codeline lineno="184" refid="group___d_r_i_v_e_r_s_1gaf1b74c33fa828ea4dc172bfbaaf47216" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaf1b74c33fa828ea4dc172bfbaaf47216" kindref="member">bank_sel</ref>;</highlight></codeline>
<codeline lineno="185" refid="group___d_r_i_v_e_r_s_1ga7cf5696d5640d63b078f9c5ed9aceda8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga7cf5696d5640d63b078f9c5ed9aceda8" kindref="member">mem_start_addr</ref>;</highlight></codeline>
<codeline lineno="186" refid="group___d_r_i_v_e_r_s_1gaac4aac12b0e82272affd408b24dc9c95" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaac4aac12b0e82272affd408b24dc9c95" kindref="member">prgm_start_h</ref>;</highlight></codeline>
<codeline lineno="187"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>s0_addr;</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>s0_reg;</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>s0_ctrl;</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>s1_addr;</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>s1_reg;</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>s1_ctrl;</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>s4_ctrl;</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>s0_do;</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>s1_do;</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>i2c_delay_ctrl;</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>raw_compass;</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>I2C_MST_VDDIO<sp/>bit<sp/>is<sp/>in<sp/>this<sp/>register.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>yg_offs_tc;</highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal">};</highlight></codeline>
<codeline lineno="203"><highlight class="normal"></highlight></codeline>
<codeline lineno="204"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Information<sp/>specific<sp/>to<sp/>a<sp/>particular<sp/>device.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="205" refid="structhw__s" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structhw__s" kindref="compound">hw_s</ref><sp/>{</highlight></codeline>
<codeline lineno="206" refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>;</highlight></codeline>
<codeline lineno="207" refid="group___d_r_i_v_e_r_s_1ga5f77e9f55285abb4d214b80281f69c1f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga5f77e9f55285abb4d214b80281f69c1f" kindref="member">max_fifo</ref>;</highlight></codeline>
<codeline lineno="208" refid="group___d_r_i_v_e_r_s_1ga1039fa66b110194727938cd86be8c3c5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga1039fa66b110194727938cd86be8c3c5" kindref="member">num_reg</ref>;</highlight></codeline>
<codeline lineno="209" refid="group___d_r_i_v_e_r_s_1gab2397f792a86b32b0957c24e3912bc63" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gab2397f792a86b32b0957c24e3912bc63" kindref="member">temp_sens</ref>;</highlight></codeline>
<codeline lineno="210" refid="group___d_r_i_v_e_r_s_1ga56f98c91a7c4d60ccea1ade1f3e88d04" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga56f98c91a7c4d60ccea1ade1f3e88d04" kindref="member">temp_offset</ref>;</highlight></codeline>
<codeline lineno="211" refid="group___d_r_i_v_e_r_s_1gaef4a2014cd6e3d5faeb8f713ee3606ed" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaef4a2014cd6e3d5faeb8f713ee3606ed" kindref="member">bank_size</ref>;</highlight></codeline>
<codeline lineno="212"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>compass_fsr;</highlight></codeline>
<codeline lineno="214"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="215"><highlight class="normal">};</highlight></codeline>
<codeline lineno="216"><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>When<sp/>entering<sp/>motion<sp/>interrupt<sp/>mode,<sp/>the<sp/>driver<sp/>keeps<sp/>track<sp/>of<sp/>the</highlight></codeline>
<codeline lineno="218"><highlight class="comment"><sp/>*<sp/>previous<sp/>state<sp/>so<sp/>that<sp/>it<sp/>can<sp/>be<sp/>restored<sp/>at<sp/>a<sp/>later<sp/>time.</highlight></codeline>
<codeline lineno="219"><highlight class="comment"><sp/>*<sp/>TODO:<sp/>This<sp/>is<sp/>tacky.<sp/>Fix<sp/>it.</highlight></codeline>
<codeline lineno="220"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="221" refid="structmotion__int__cache__s" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structmotion__int__cache__s" kindref="compound">motion_int_cache_s</ref><sp/>{</highlight></codeline>
<codeline lineno="222" refid="group___d_r_i_v_e_r_s_1gae9614e4c92be9fc08f2aec7f34853fbc" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gae9614e4c92be9fc08f2aec7f34853fbc" kindref="member">gyro_fsr</ref>;</highlight></codeline>
<codeline lineno="223" refid="group___d_r_i_v_e_r_s_1gacfb901facda5ef8a02d47726db98e58e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gacfb901facda5ef8a02d47726db98e58e" kindref="member">accel_fsr</ref>;</highlight></codeline>
<codeline lineno="224" refid="group___d_r_i_v_e_r_s_1gac1a1eb41631eb71481d6d247d9c67d4a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gac1a1eb41631eb71481d6d247d9c67d4a" kindref="member">lpf</ref>;</highlight></codeline>
<codeline lineno="225" refid="group___d_r_i_v_e_r_s_1ga1cf6b7edfe37a51209897ccc448ec0e6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga1cf6b7edfe37a51209897ccc448ec0e6" kindref="member">sample_rate</ref>;</highlight></codeline>
<codeline lineno="226" refid="group___d_r_i_v_e_r_s_1gae5416a4097b0cf39460df70094bc474d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gae5416a4097b0cf39460df70094bc474d" kindref="member">sensors_on</ref>;</highlight></codeline>
<codeline lineno="227" refid="group___d_r_i_v_e_r_s_1ga41501694a84bdf70e9c660852b653273" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga41501694a84bdf70e9c660852b653273" kindref="member">fifo_sensors</ref>;</highlight></codeline>
<codeline lineno="228" refid="group___d_r_i_v_e_r_s_1ga6461e400e336d2ccbc8c7d95ace9461d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga6461e400e336d2ccbc8c7d95ace9461d" kindref="member">dmp_on</ref>;</highlight></codeline>
<codeline lineno="229"><highlight class="normal">};</highlight></codeline>
<codeline lineno="230"><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Cached<sp/>chip<sp/>configuration<sp/>data.</highlight></codeline>
<codeline lineno="232"><highlight class="comment"><sp/>*<sp/>TODO:<sp/>A<sp/>lot<sp/>of<sp/>these<sp/>can<sp/>be<sp/>handled<sp/>with<sp/>a<sp/>bitmask.</highlight></codeline>
<codeline lineno="233"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="234" refid="structchip__cfg__s" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structchip__cfg__s" kindref="compound">chip_cfg_s</ref><sp/>{</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Matches<sp/>gyro_cfg<sp/>&gt;&gt;<sp/>3<sp/>&amp;<sp/>0x03<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="236" refid="group___d_r_i_v_e_r_s_1gab45a727aeee17380828a3e20ccb375c2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gab45a727aeee17380828a3e20ccb375c2" kindref="member">gyro_fsr</ref>;</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Matches<sp/>accel_cfg<sp/>&gt;&gt;<sp/>3<sp/>&amp;<sp/>0x03<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="238" refid="group___d_r_i_v_e_r_s_1gaf66873be1446ed552812e32d40eced61" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaf66873be1446ed552812e32d40eced61" kindref="member">accel_fsr</ref>;</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enabled<sp/>sensors.<sp/>Uses<sp/>same<sp/>masks<sp/>as<sp/>fifo_en,<sp/>NOT<sp/>pwr_mgmt_2.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="240" refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>;</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Matches<sp/>config<sp/>register.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="242" refid="group___d_r_i_v_e_r_s_1ga16ec8ca8298f62ac01419775377270fb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga16ec8ca8298f62ac01419775377270fb" kindref="member">lpf</ref>;</highlight></codeline>
<codeline lineno="243" refid="group___d_r_i_v_e_r_s_1gab7bd5165d6e62cb0d814cf3401958445" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gab7bd5165d6e62cb0d814cf3401958445" kindref="member">clk_src</ref>;</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Sample<sp/>rate,<sp/>NOT<sp/>rate<sp/>divider.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="245" refid="group___d_r_i_v_e_r_s_1ga2660470fcf7b53e2e832a397cbe6c354" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga2660470fcf7b53e2e832a397cbe6c354" kindref="member">sample_rate</ref>;</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Matches<sp/>fifo_en<sp/>register.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="247" refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref>;</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Matches<sp/>int<sp/>enable<sp/>register.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="249" refid="group___d_r_i_v_e_r_s_1gaa366c36057f31e6e0d4cf2ca4a1ef52f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaa366c36057f31e6e0d4cf2ca4a1ef52f" kindref="member">int_enable</ref>;</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>1<sp/>if<sp/>devices<sp/>on<sp/>auxiliary<sp/>I2C<sp/>bus<sp/>appear<sp/>on<sp/>the<sp/>primary.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="251" refid="group___d_r_i_v_e_r_s_1ga6d3a962d6435644c7ea68e7d65934636" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga6d3a962d6435644c7ea68e7d65934636" kindref="member">bypass_mode</ref>;</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>1<sp/>if<sp/>half-sensitivity.</highlight></codeline>
<codeline lineno="253"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>NOTE:<sp/>This<sp/>doesn&apos;t<sp/>belong<sp/>here,<sp/>but<sp/>everything<sp/>else<sp/>in<sp/>hw_s<sp/>is<sp/>const,</highlight></codeline>
<codeline lineno="254"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>and<sp/>this<sp/>allows<sp/>us<sp/>to<sp/>save<sp/>some<sp/>precious<sp/>RAM.</highlight></codeline>
<codeline lineno="255"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="256" refid="group___d_r_i_v_e_r_s_1gab72e3cead391dee41f28e041282d743f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gab72e3cead391dee41f28e041282d743f" kindref="member">accel_half</ref>;</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>1<sp/>if<sp/>device<sp/>in<sp/>low-power<sp/>accel-only<sp/>mode.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="258" refid="group___d_r_i_v_e_r_s_1ga33e138d8a49744eb9b4ea0e9086cef1c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga33e138d8a49744eb9b4ea0e9086cef1c" kindref="member">lp_accel_mode</ref>;</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>1<sp/>if<sp/>interrupts<sp/>are<sp/>only<sp/>triggered<sp/>on<sp/>motion<sp/>events.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="260" refid="group___d_r_i_v_e_r_s_1ga279cd5d5d78890357f2d42905d7471df" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga279cd5d5d78890357f2d42905d7471df" kindref="member">int_motion_only</ref>;</highlight></codeline>
<codeline lineno="261" refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structmotion__int__cache__s" kindref="compound">motion_int_cache_s</ref><sp/><ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>;</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>1<sp/>for<sp/>active<sp/>low<sp/>interrupts.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="263" refid="group___d_r_i_v_e_r_s_1ga6f12e54ae8c7f2dd77954f3ab619bbb9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga6f12e54ae8c7f2dd77954f3ab619bbb9" kindref="member">active_low_int</ref>;</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>1<sp/>for<sp/>latched<sp/>interrupts.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="265" refid="group___d_r_i_v_e_r_s_1ga55ce40fc460a62829ec149edaccffe7c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga55ce40fc460a62829ec149edaccffe7c" kindref="member">latched_int</ref>;</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>1<sp/>if<sp/>DMP<sp/>is<sp/>enabled.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="267" refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" kindref="member">dmp_on</ref>;</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Ensures<sp/>that<sp/>DMP<sp/>will<sp/>only<sp/>be<sp/>loaded<sp/>once.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="269" refid="group___d_r_i_v_e_r_s_1ga1d2ff55e17aae1459dfad61d76054b1b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga1d2ff55e17aae1459dfad61d76054b1b" kindref="member">dmp_loaded</ref>;</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Sampling<sp/>rate<sp/>used<sp/>when<sp/>DMP<sp/>is<sp/>enabled.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="271" refid="group___d_r_i_v_e_r_s_1ga5f42b7e1e740f2fb64427417e9e2dab7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga5f42b7e1e740f2fb64427417e9e2dab7" kindref="member">dmp_sample_rate</ref>;</highlight></codeline>
<codeline lineno="272"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Compass<sp/>sample<sp/>rate.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>compass_sample_rate;</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>compass_addr;</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>mag_sens_adj[3];</highlight></codeline>
<codeline lineno="277"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="278"><highlight class="normal">};</highlight></codeline>
<codeline lineno="279"><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Information<sp/>for<sp/>self-test.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="281" refid="structtest__s" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structtest__s" kindref="compound">test_s</ref><sp/>{</highlight></codeline>
<codeline lineno="282" refid="group___d_r_i_v_e_r_s_1ga330290a347407b0d92b1d77aa274993c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga330290a347407b0d92b1d77aa274993c" kindref="member">gyro_sens</ref>;</highlight></codeline>
<codeline lineno="283" refid="group___d_r_i_v_e_r_s_1ga5f602885d6a544a9039b13a0cc7ac085" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga5f602885d6a544a9039b13a0cc7ac085" kindref="member">accel_sens</ref>;</highlight></codeline>
<codeline lineno="284" refid="group___d_r_i_v_e_r_s_1ga3bef0c9f009cea4cbe01d0ee91126d83" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3bef0c9f009cea4cbe01d0ee91126d83" kindref="member">reg_rate_div</ref>;</highlight></codeline>
<codeline lineno="285" refid="group___d_r_i_v_e_r_s_1ga09f5a9ab86d36f3b83e7f4abdea73e39" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga09f5a9ab86d36f3b83e7f4abdea73e39" kindref="member">reg_lpf</ref>;</highlight></codeline>
<codeline lineno="286" refid="group___d_r_i_v_e_r_s_1gaa0dfe8b2c29358e9e045aaa8beff244d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaa0dfe8b2c29358e9e045aaa8beff244d" kindref="member">reg_gyro_fsr</ref>;</highlight></codeline>
<codeline lineno="287" refid="group___d_r_i_v_e_r_s_1ga3b54f67ea7f1dd47fd8aa48dda051032" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3b54f67ea7f1dd47fd8aa48dda051032" kindref="member">reg_accel_fsr</ref>;</highlight></codeline>
<codeline lineno="288" refid="group___d_r_i_v_e_r_s_1gaf5d495939c8ca761ac2bbe7791dcd727" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaf5d495939c8ca761ac2bbe7791dcd727" kindref="member">wait_ms</ref>;</highlight></codeline>
<codeline lineno="289" refid="group___d_r_i_v_e_r_s_1ga8af20793fdb7764bfa90f80bd74b87e7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga8af20793fdb7764bfa90f80bd74b87e7" kindref="member">packet_thresh</ref>;</highlight></codeline>
<codeline lineno="290" refid="group___d_r_i_v_e_r_s_1gafacfcf92f07cd846fb0aaf889a30c582" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gafacfcf92f07cd846fb0aaf889a30c582" kindref="member">min_dps</ref>;</highlight></codeline>
<codeline lineno="291" refid="group___d_r_i_v_e_r_s_1gae588d6c0105bcd8f9144f42eee6c4835" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gae588d6c0105bcd8f9144f42eee6c4835" kindref="member">max_dps</ref>;</highlight></codeline>
<codeline lineno="292" refid="group___d_r_i_v_e_r_s_1ga3b47b72fbf8c152cb4389e3cd866ded9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3b47b72fbf8c152cb4389e3cd866ded9" kindref="member">max_gyro_var</ref>;</highlight></codeline>
<codeline lineno="293" refid="group___d_r_i_v_e_r_s_1gae86aec181d0f1e4a29e9f9ae0735e8e1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gae86aec181d0f1e4a29e9f9ae0735e8e1" kindref="member">min_g</ref>;</highlight></codeline>
<codeline lineno="294" refid="group___d_r_i_v_e_r_s_1ga9ebd3195ac2f460f82873b9e6c36eb2c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga9ebd3195ac2f460f82873b9e6c36eb2c" kindref="member">max_g</ref>;</highlight></codeline>
<codeline lineno="295" refid="group___d_r_i_v_e_r_s_1ga7f6071fb91426f467d9223c712560ee6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga7f6071fb91426f467d9223c712560ee6" kindref="member">max_accel_var</ref>;</highlight></codeline>
<codeline lineno="296"><highlight class="normal">};</highlight></codeline>
<codeline lineno="297"><highlight class="normal"></highlight></codeline>
<codeline lineno="298"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Gyro<sp/>driver<sp/>state<sp/>variables.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="299" refid="structgyro__state__s" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structgyro__state__s" kindref="compound">gyro_state_s</ref><sp/>{</highlight></codeline>
<codeline lineno="300" refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structgyro__reg__s" kindref="compound">gyro_reg_s</ref><sp/>*<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>;</highlight></codeline>
<codeline lineno="301" refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structhw__s" kindref="compound">hw_s</ref><sp/>*<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>;</highlight></codeline>
<codeline lineno="302" refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structchip__cfg__s" kindref="compound">chip_cfg_s</ref><sp/><ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>;</highlight></codeline>
<codeline lineno="303" refid="group___d_r_i_v_e_r_s_1ga5a1563d12b0aab5e65317621742f6f62" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structtest__s" kindref="compound">test_s</ref><sp/>*<ref refid="group___d_r_i_v_e_r_s_1ga5a1563d12b0aab5e65317621742f6f62" kindref="member">test</ref>;</highlight></codeline>
<codeline lineno="304"><highlight class="normal">};</highlight></codeline>
<codeline lineno="305"><highlight class="normal"></highlight></codeline>
<codeline lineno="306"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Filter<sp/>configurations.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="307" refid="group___d_r_i_v_e_r_s_1ga91c762a5bd71461f7911dc49ee7696e9" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga91c762a5bd71461f7911dc49ee7696e9" kindref="member">lpf_e</ref><sp/>{</highlight></codeline>
<codeline lineno="308" refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a9f0263fbbdccd3c5a18fcb65be278d24" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a9f0263fbbdccd3c5a18fcb65be278d24" kindref="member">INV_FILTER_256HZ_NOLPF2</ref><sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="309" refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9ab58e52e0b6be4cbaf0c7f32705a9fcec" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9ab58e52e0b6be4cbaf0c7f32705a9fcec" kindref="member">INV_FILTER_188HZ</ref>,</highlight></codeline>
<codeline lineno="310" refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a0f288da0c97b325a6cb57f1223f0cf98" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a0f288da0c97b325a6cb57f1223f0cf98" kindref="member">INV_FILTER_98HZ</ref>,</highlight></codeline>
<codeline lineno="311" refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a995b18a52a5bd919aa9c1411a2292110" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a995b18a52a5bd919aa9c1411a2292110" kindref="member">INV_FILTER_42HZ</ref>,</highlight></codeline>
<codeline lineno="312" refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9aebecb86604e475ed8e2cb68340010ff1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9aebecb86604e475ed8e2cb68340010ff1" kindref="member">INV_FILTER_20HZ</ref>,</highlight></codeline>
<codeline lineno="313" refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a327619f406c6b2f6a221793881013508" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a327619f406c6b2f6a221793881013508" kindref="member">INV_FILTER_10HZ</ref>,</highlight></codeline>
<codeline lineno="314" refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9abdaaf85666fd6a490ee01dcd8a315678" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9abdaaf85666fd6a490ee01dcd8a315678" kindref="member">INV_FILTER_5HZ</ref>,</highlight></codeline>
<codeline lineno="315" refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a76de97a6c2f8eb3c5d1a73d717513f5d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a76de97a6c2f8eb3c5d1a73d717513f5d" kindref="member">INV_FILTER_2100HZ_NOLPF</ref>,</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a053f39f04904f6103090bcba3002c4a3" kindref="member">NUM_FILTER</ref></highlight></codeline>
<codeline lineno="317" refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a053f39f04904f6103090bcba3002c4a3" refkind="member"><highlight class="normal">};</highlight></codeline>
<codeline lineno="318"><highlight class="normal"></highlight></codeline>
<codeline lineno="319"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Full<sp/>scale<sp/>ranges.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="320" refid="group___d_r_i_v_e_r_s_1ga83acdc0eb37e8bfe0c2ae2348ded0a90" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga83acdc0eb37e8bfe0c2ae2348ded0a90" kindref="member">gyro_fsr_e</ref><sp/>{</highlight></codeline>
<codeline lineno="321" refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a5b8251a49db5cb8a676076b0b308ae35" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a5b8251a49db5cb8a676076b0b308ae35" kindref="member">INV_FSR_250DPS</ref><sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="322" refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a50901470ff389927fd010081e2b8fd09" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a50901470ff389927fd010081e2b8fd09" kindref="member">INV_FSR_500DPS</ref>,</highlight></codeline>
<codeline lineno="323" refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90aee922e0daa4fbb404c3db6c49d897a13" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90aee922e0daa4fbb404c3db6c49d897a13" kindref="member">INV_FSR_1000DPS</ref>,</highlight></codeline>
<codeline lineno="324" refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90ac0c37efc1c8acd6f70c0c5a768e5b8be" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90ac0c37efc1c8acd6f70c0c5a768e5b8be" kindref="member">INV_FSR_2000DPS</ref>,</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90ab50b300433c5bc3cbc7ae8adb980c815" kindref="member">NUM_GYRO_FSR</ref></highlight></codeline>
<codeline lineno="326" refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90ab50b300433c5bc3cbc7ae8adb980c815" refkind="member"><highlight class="normal">};</highlight></codeline>
<codeline lineno="327"><highlight class="normal"></highlight></codeline>
<codeline lineno="328"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Full<sp/>scale<sp/>ranges.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="329" refid="group___d_r_i_v_e_r_s_1gaec8501b935143099e5f729dee221a81e" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaec8501b935143099e5f729dee221a81e" kindref="member">accel_fsr_e</ref><sp/>{</highlight></codeline>
<codeline lineno="330" refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eae27c6f69463dab7de81fac0c51ff8aa7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eae27c6f69463dab7de81fac0c51ff8aa7" kindref="member">INV_FSR_2G</ref><sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="331" refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eaa91e3a89d0bbd01149fe71148595be6d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eaa91e3a89d0bbd01149fe71148595be6d" kindref="member">INV_FSR_4G</ref>,</highlight></codeline>
<codeline lineno="332" refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea0a40371bdda397d234c53d0ee2f3be8b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea0a40371bdda397d234c53d0ee2f3be8b" kindref="member">INV_FSR_8G</ref>,</highlight></codeline>
<codeline lineno="333" refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea6712e8563c97c11b458ef721d4f5f9d5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea6712e8563c97c11b458ef721d4f5f9d5" kindref="member">INV_FSR_16G</ref>,</highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea6d466b2f73b176f1dfc8a3f94ae8a4df" kindref="member">NUM_ACCEL_FSR</ref></highlight></codeline>
<codeline lineno="335" refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea6d466b2f73b176f1dfc8a3f94ae8a4df" refkind="member"><highlight class="normal">};</highlight></codeline>
<codeline lineno="336"><highlight class="normal"></highlight></codeline>
<codeline lineno="337"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Clock<sp/>sources.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="338" refid="group___d_r_i_v_e_r_s_1ga75570f009627c6f4ddfb2d936d81e207" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga75570f009627c6f4ddfb2d936d81e207" kindref="member">clock_sel_e</ref><sp/>{</highlight></codeline>
<codeline lineno="339" refid="group___d_r_i_v_e_r_s_1gga75570f009627c6f4ddfb2d936d81e207a92059acf8d0ff5b7e12580c15f88466f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga75570f009627c6f4ddfb2d936d81e207a92059acf8d0ff5b7e12580c15f88466f" kindref="member">INV_CLK_INTERNAL</ref><sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="340" refid="group___d_r_i_v_e_r_s_1gga75570f009627c6f4ddfb2d936d81e207a01b240917a78674d3e387110a6a8f94c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga75570f009627c6f4ddfb2d936d81e207a01b240917a78674d3e387110a6a8f94c" kindref="member">INV_CLK_PLL</ref>,</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga75570f009627c6f4ddfb2d936d81e207a7f075b0360037232fdf24f90de7be1d7" kindref="member">NUM_CLK</ref></highlight></codeline>
<codeline lineno="342" refid="group___d_r_i_v_e_r_s_1gga75570f009627c6f4ddfb2d936d81e207a7f075b0360037232fdf24f90de7be1d7" refkind="member"><highlight class="normal">};</highlight></codeline>
<codeline lineno="343"><highlight class="normal"></highlight></codeline>
<codeline lineno="344"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Low-power<sp/>accel<sp/>wakeup<sp/>rates.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="345" refid="group___d_r_i_v_e_r_s_1ga23c3fcde795e5aa2b141232d490c9ca7" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga23c3fcde795e5aa2b141232d490c9ca7" kindref="member">lp_accel_rate_e</ref><sp/>{</highlight></codeline>
<codeline lineno="346"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>MPU6050</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="347" refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7ab44c7d0127a9466747853533a537b567" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7ab44c7d0127a9466747853533a537b567" kindref="member">INV_LPA_1_25HZ</ref>,</highlight></codeline>
<codeline lineno="348" refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a474cac76bff369dd656cc973207a1ca5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a474cac76bff369dd656cc973207a1ca5" kindref="member">INV_LPA_5HZ</ref>,</highlight></codeline>
<codeline lineno="349" refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7accaaf47c58dfe32cbf2ffa11fdb83108" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7accaaf47c58dfe32cbf2ffa11fdb83108" kindref="member">INV_LPA_20HZ</ref>,</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a798d2b86eafcf3fc7c7fe775f46cb4cb" kindref="member">INV_LPA_40HZ</ref></highlight></codeline>
<codeline lineno="351"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined<sp/>MPU6500</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/>INV_LPA_0_3125HZ,</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/>INV_LPA_0_625HZ,</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7ab44c7d0127a9466747853533a537b567" kindref="member">INV_LPA_1_25HZ</ref>,</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/>INV_LPA_2_5HZ,</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a474cac76bff369dd656cc973207a1ca5" kindref="member">INV_LPA_5HZ</ref>,</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/>INV_LPA_10HZ,</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7accaaf47c58dfe32cbf2ffa11fdb83108" kindref="member">INV_LPA_20HZ</ref>,</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a798d2b86eafcf3fc7c7fe775f46cb4cb" kindref="member">INV_LPA_40HZ</ref>,</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/>INV_LPA_80HZ,</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/>INV_LPA_160HZ,</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/>INV_LPA_320HZ,</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/>INV_LPA_640HZ</highlight></codeline>
<codeline lineno="364"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="365" refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a798d2b86eafcf3fc7c7fe775f46cb4cb" refkind="member"><highlight class="normal">};</highlight></codeline>
<codeline lineno="366"><highlight class="normal"></highlight></codeline>
<codeline lineno="367" refid="group___d_r_i_v_e_r_s_1gac52d7caf4efc485ef6faa1211bfe60dc" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_I2C_MST_VDDIO<sp/><sp/><sp/>(0x80)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="368" refid="group___d_r_i_v_e_r_s_1gae3c4a18accb84992faaf2534a84a147c" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_FIFO_EN<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x40)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="369" refid="group___d_r_i_v_e_r_s_1ga02c3e9ddd63128f1c3cf50bf1e9b5fe6" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_DMP_EN<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x80)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="370" refid="group___d_r_i_v_e_r_s_1gaeae2cc64314ad05f3a93d2358a2369db" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_FIFO_RST<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x04)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="371" refid="group___d_r_i_v_e_r_s_1ga37d5ceb74c3568e4bab6dcdd0afaa95b" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_DMP_RST<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x08)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="372" refid="group___d_r_i_v_e_r_s_1gafb9b49ce5dd973b3c29ae72680924fa7" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_FIFO_OVERFLOW<sp/><sp/><sp/>(0x10)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="373" refid="group___d_r_i_v_e_r_s_1ga45eec9dbc46778c356703dcf90b9e0c3" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_DATA_RDY_EN<sp/><sp/><sp/><sp/><sp/>(0x01)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="374" refid="group___d_r_i_v_e_r_s_1ga4dc5309ed09fc683d8e5a247feaad69d" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_DMP_INT_EN<sp/><sp/><sp/><sp/><sp/><sp/>(0x02)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="375" refid="group___d_r_i_v_e_r_s_1ga6a8f2f7f3dd17bc05d9c6286d15c7ada" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_MOT_INT_EN<sp/><sp/><sp/><sp/><sp/><sp/>(0x40)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="376" refid="group___d_r_i_v_e_r_s_1ga2d9aff1be96b1fc021ca96f251c3e72b" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BITS_FSR<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x18)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="377" refid="group___d_r_i_v_e_r_s_1ga4d83411e736da86163a61828816a200a" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BITS_LPF<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x07)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="378" refid="group___d_r_i_v_e_r_s_1ga3c9c0234d4a71c9d35bb0da64ea867eb" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BITS_HPF<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x07)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="379" refid="group___d_r_i_v_e_r_s_1ga1823f90ac353cf4cde25d297a8627dd4" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BITS_CLK<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x07)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="380" refid="group___d_r_i_v_e_r_s_1ga3769fd3fa71deaef1e77ce14c26f679d" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_FIFO_SIZE_1024<sp/><sp/>(0x40)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="381" refid="group___d_r_i_v_e_r_s_1ga0fa95b278851b0c05a9995f65ba2b895" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_FIFO_SIZE_2048<sp/><sp/>(0x80)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="382" refid="group___d_r_i_v_e_r_s_1gac067df9d789eaae04585abfc5ffdb2b6" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_FIFO_SIZE_4096<sp/><sp/>(0xC0)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="383" refid="group___d_r_i_v_e_r_s_1gaf4ce49fd1fc9b1461b5241f9ef4812f4" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_RESET<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x80)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="384" refid="group___d_r_i_v_e_r_s_1ga1fed8bd436e9b7dfccb1cae99ca89103" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_SLEEP<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x40)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="385" refid="group___d_r_i_v_e_r_s_1gac4b33689dd697c1cf2411638a017c009" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_S0_DELAY_EN<sp/><sp/><sp/><sp/><sp/>(0x01)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="386" refid="group___d_r_i_v_e_r_s_1ga22e4452fe8abca7fe12a2dc45194e6df" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_S2_DELAY_EN<sp/><sp/><sp/><sp/><sp/>(0x04)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="387" refid="group___d_r_i_v_e_r_s_1gabc5c2ee59baeb02a0f761740466f3c28" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BITS_SLAVE_LENGTH<sp/><sp/><sp/>(0x0F)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="388" refid="group___d_r_i_v_e_r_s_1ga5e8f3ccff1b3eeb95a938b207ca873ff" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_SLAVE_BYTE_SW<sp/><sp/><sp/>(0x40)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="389" refid="group___d_r_i_v_e_r_s_1gaf616c3ecf97ffd7bde444f0b74e7453e" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_SLAVE_GROUP<sp/><sp/><sp/><sp/><sp/>(0x10)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="390" refid="group___d_r_i_v_e_r_s_1gae9440f48b6d70d900366dc040a8714d7" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_SLAVE_EN<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x80)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="391" refid="group___d_r_i_v_e_r_s_1ga8ef1963ec6fb3df5586e50959cf00a70" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_I2C_READ<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x80)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="392" refid="group___d_r_i_v_e_r_s_1gab470b625fa05ff228b3fdb94802b1c0d" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BITS_I2C_MASTER_DLY<sp/>(0x1F)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="393" refid="group___d_r_i_v_e_r_s_1gabcdedbd3098140aa14ad17bcaca8e176" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_AUX_IF_EN<sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x20)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="394" refid="group___d_r_i_v_e_r_s_1ga8467782bedc44051c95643e303543655" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_ACTL<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x80)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="395" refid="group___d_r_i_v_e_r_s_1ga588b5a95724c4a68c6868faa78fd3a7f" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_LATCH_EN<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x20)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="396" refid="group___d_r_i_v_e_r_s_1ga1f50796ca0363292d9ac9cc1d29d9225" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_ANY_RD_CLR<sp/><sp/><sp/><sp/><sp/><sp/>(0x10)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="397" refid="group___d_r_i_v_e_r_s_1gadd12a8d89e1a4c4e008b12a96dd4c75d" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_BYPASS_EN<sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x02)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="398" refid="group___d_r_i_v_e_r_s_1ga75b1479e451b747afb3b24cbc4df99f7" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BITS_WOM_EN<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0xC0)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="399" refid="group___d_r_i_v_e_r_s_1ga63e6f23af37626aa1498d8c248f259e7" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_LPA_CYCLE<sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x20)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="400" refid="group___d_r_i_v_e_r_s_1gacfc46ee2ea036d16b3df45c8fb241b5b" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_STBY_XA<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x20)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="401" refid="group___d_r_i_v_e_r_s_1ga49e6d38569bfc4b58ccc45dbb19001fa" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_STBY_YA<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x10)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="402" refid="group___d_r_i_v_e_r_s_1gafac8114288bae2db7ea7dbf0f6fb755c" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_STBY_ZA<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x08)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="403" refid="group___d_r_i_v_e_r_s_1ga82256fedeffe5b2443ab3ae34cf032d9" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_STBY_XG<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x04)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="404" refid="group___d_r_i_v_e_r_s_1gabf1c0a844906a5e887a659971a4af417" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_STBY_YG<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x02)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="405" refid="group___d_r_i_v_e_r_s_1ga30967a4efdf3c3f1e39814e72a4168b0" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_STBY_ZG<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x01)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="406" refid="group___d_r_i_v_e_r_s_1ga04a57159e34387dafe9b86b171c4654c" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_STBY_XYZA<sp/><sp/><sp/><sp/><sp/><sp/><sp/>(BIT_STBY_XA<sp/>|<sp/>BIT_STBY_YA<sp/>|<sp/>BIT_STBY_ZA)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="407" refid="group___d_r_i_v_e_r_s_1ga4e2ef22b94b90f9b83394dfe1f688ce4" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BIT_STBY_XYZG<sp/><sp/><sp/><sp/><sp/><sp/><sp/>(BIT_STBY_XG<sp/>|<sp/>BIT_STBY_YG<sp/>|<sp/>BIT_STBY_ZG)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="408"><highlight class="normal"></highlight></codeline>
<codeline lineno="409"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>AK8975_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="410"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>SUPPORTS_AK89xx_HIGH_SENS<sp/><sp/><sp/>(0x00)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="411"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AK89xx_FSR<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(9830)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="412"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined<sp/>AK8963_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="413"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>SUPPORTS_AK89xx_HIGH_SENS<sp/><sp/><sp/>(0x10)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="414"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AK89xx_FSR<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(4915)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="415"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="416"><highlight class="normal"></highlight></codeline>
<codeline lineno="417"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="418"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_REG_WHOAMI<sp/><sp/><sp/><sp/><sp/><sp/>(0x00)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="419"><highlight class="normal"></highlight></codeline>
<codeline lineno="420"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_REG_ST1<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x02)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="421"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_REG_HXL<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x03)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="422"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_REG_ST2<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x09)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="423"><highlight class="normal"></highlight></codeline>
<codeline lineno="424"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_REG_CNTL<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x0A)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="425"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_REG_ASTC<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x0C)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="426"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_REG_ASAX<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x10)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="427"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_REG_ASAY<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x11)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="428"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_REG_ASAZ<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x12)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="429"><highlight class="normal"></highlight></codeline>
<codeline lineno="430"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_DATA_READY<sp/><sp/><sp/><sp/><sp/><sp/>(0x01)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="431"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_DATA_OVERRUN<sp/><sp/><sp/><sp/>(0x02)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="432"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_OVERFLOW<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x80)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="433"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_DATA_ERROR<sp/><sp/><sp/><sp/><sp/><sp/>(0x40)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal"></highlight></codeline>
<codeline lineno="435"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_BIT_SELF_TEST<sp/><sp/><sp/>(0x40)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="436"><highlight class="normal"></highlight></codeline>
<codeline lineno="437"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_POWER_DOWN<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0x00<sp/>|<sp/>SUPPORTS_AK89xx_HIGH_SENS)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="438"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_SINGLE_MEASUREMENT<sp/><sp/>(0x01<sp/>|<sp/>SUPPORTS_AK89xx_HIGH_SENS)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="439"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_FUSE_ROM_ACCESS<sp/><sp/><sp/><sp/><sp/>(0x0F<sp/>|<sp/>SUPPORTS_AK89xx_HIGH_SENS)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="440"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_MODE_SELF_TEST<sp/><sp/><sp/><sp/><sp/><sp/>(0x08<sp/>|<sp/>SUPPORTS_AK89xx_HIGH_SENS)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="441"><highlight class="normal"></highlight></codeline>
<codeline lineno="442"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>AKM_WHOAMI<sp/><sp/><sp/><sp/><sp/><sp/>(0x48)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="443"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="444"><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>MPU6050</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="446"><highlight class="normal"></highlight><highlight class="comment">//const<sp/>struct<sp/>gyro_reg_s<sp/>reg<sp/>=<sp/>{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="447"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.who_am_i<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x75,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="448"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.rate_div<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x19,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="449"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.lpf<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x1A,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="450"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.prod_id<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x0C,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="451"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.user_ctrl<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x6A,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="452"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.fifo_en<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x23,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="453"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.gyro_cfg<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x1B,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="454"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.accel_cfg<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x1C,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="455"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.motion_thr<sp/><sp/><sp/><sp/><sp/>=<sp/>0x1F,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="456"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.motion_dur<sp/><sp/><sp/><sp/><sp/>=<sp/>0x20,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="457"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.fifo_count_h<sp/><sp/><sp/>=<sp/>0x72,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="458"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.fifo_r_w<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x74,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="459"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.raw_gyro<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x43,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="460"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.raw_accel<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x3B,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="461"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.temp<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x41,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="462"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.int_enable<sp/><sp/><sp/><sp/><sp/>=<sp/>0x38,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="463"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.dmp_int_status<sp/>=<sp/>0x39,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="464"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.int_status<sp/><sp/><sp/><sp/><sp/>=<sp/>0x3A,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="465"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.pwr_mgmt_1<sp/><sp/><sp/><sp/><sp/>=<sp/>0x6B,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="466"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.pwr_mgmt_2<sp/><sp/><sp/><sp/><sp/>=<sp/>0x6C,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="467"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.int_pin_cfg<sp/><sp/><sp/><sp/>=<sp/>0x37,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="468"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.mem_r_w<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x6F,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="469"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.accel_offs<sp/><sp/><sp/><sp/><sp/>=<sp/>0x06,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="470"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.i2c_mst<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x24,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="471"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.bank_sel<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x6D,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="472"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.mem_start_addr<sp/>=<sp/>0x6E,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="473"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.prgm_start_h<sp/><sp/><sp/>=<sp/>0x70</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="474"><highlight class="normal"></highlight><highlight class="comment">//#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="475"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>,.raw_compass<sp/><sp/><sp/>=<sp/>0x49,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="476"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.yg_offs_tc<sp/><sp/><sp/><sp/><sp/>=<sp/>0x01,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="477"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.s0_addr<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x25,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="478"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.s0_reg<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x26,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="479"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.s0_ctrl<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x27,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="480"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.s1_addr<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x28,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="481"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.s1_reg<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x29,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="482"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.s1_ctrl<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x2A,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="483"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.s4_ctrl<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x34,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="484"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.s0_do<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x63,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="485"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.s1_do<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x64,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="486"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.i2c_delay_ctrl<sp/>=<sp/>0x67</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="487"><highlight class="normal"></highlight><highlight class="comment">//#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="488"><highlight class="normal"></highlight><highlight class="comment">//};</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="489" refid="group___d_r_i_v_e_r_s_1ga5448c351fc95ff052b110eee80e5f75c" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structgyro__reg__s" kindref="compound">gyro_reg_s</ref><sp/><ref refid="group___d_r_i_v_e_r_s_1ga5448c351fc95ff052b110eee80e5f75c" kindref="member">reg</ref><sp/>=<sp/>{</highlight></codeline>
<codeline lineno="490"><highlight class="normal">0x75,<sp/><sp/></highlight><highlight class="comment">//who_am_i</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="491"><highlight class="normal">0x19,<sp/><sp/></highlight><highlight class="comment">//rate_div</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="492"><highlight class="normal">0x1A,<sp/><sp/></highlight><highlight class="comment">//lpf</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="493"><highlight class="normal">0x0C,<sp/><sp/></highlight><highlight class="comment">//prod_id</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="494"><highlight class="normal">0x6A,<sp/><sp/></highlight><highlight class="comment">//user_ctrl</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="495"><highlight class="normal">0x23,<sp/><sp/></highlight><highlight class="comment">//fifo_en</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="496"><highlight class="normal">0x1B,<sp/><sp/></highlight><highlight class="comment">//gyro_cfg</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="497"><highlight class="normal">0x1C,<sp/><sp/></highlight><highlight class="comment">//accel_cfg</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="498"><highlight class="normal">0x1F,<sp/><sp/></highlight><highlight class="comment">//<sp/>motion_thr</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="499"><highlight class="normal">0x20,<sp/><sp/></highlight><highlight class="comment">//<sp/>motion_dur</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="500"><highlight class="normal">0x72,<sp/><sp/></highlight><highlight class="comment">//<sp/>fifo_count_h</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="501"><highlight class="normal">0x74,<sp/><sp/></highlight><highlight class="comment">//<sp/>fifo_r_w</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="502"><highlight class="normal">0x43,<sp/><sp/></highlight><highlight class="comment">//<sp/>raw_gyro</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="503"><highlight class="normal">0x3B,<sp/><sp/></highlight><highlight class="comment">//<sp/>raw_accel</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="504"><highlight class="normal">0x41,<sp/><sp/></highlight><highlight class="comment">//<sp/>temp</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="505"><highlight class="normal">0x38,<sp/><sp/></highlight><highlight class="comment">//<sp/>int_enable</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="506"><highlight class="normal">0x39,<sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>dmp_int_status</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="507"><highlight class="normal">0x3A,<sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>int_status</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="508"><highlight class="normal">0x6B,<sp/><sp/></highlight><highlight class="comment">//<sp/>pwr_mgmt_1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="509"><highlight class="normal">0x6C,<sp/><sp/></highlight><highlight class="comment">//<sp/>pwr_mgmt_2</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="510"><highlight class="normal">0x37,<sp/><sp/></highlight><highlight class="comment">//<sp/>int_pin_cfg</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="511"><highlight class="normal">0x6F,<sp/><sp/></highlight><highlight class="comment">//<sp/>mem_r_w</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="512"><highlight class="normal">0x06,<sp/><sp/></highlight><highlight class="comment">//<sp/>accel_offs</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="513"><highlight class="normal">0x24,<sp/><sp/></highlight><highlight class="comment">//<sp/>i2c_mst</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="514"><highlight class="normal">0x6D,<sp/><sp/></highlight><highlight class="comment">//<sp/>bank_sel</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="515"><highlight class="normal">0x6E,<sp/><sp/></highlight><highlight class="comment">//<sp/>mem_start_addr</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="516"><highlight class="normal">0x70<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>prgm_start_h</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="517"><highlight class="normal">};</highlight></codeline>
<codeline lineno="518"><highlight class="normal"></highlight></codeline>
<codeline lineno="519"><highlight class="normal"></highlight><highlight class="comment">//const<sp/>struct<sp/>hw_s<sp/>hw<sp/>=<sp/>{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="520"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.addr<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x68,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="521"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.max_fifo<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>1024,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="522"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.num_reg<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>118,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="523"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.temp_sens<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>340,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="524"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.temp_offset<sp/><sp/><sp/><sp/>=<sp/>-521,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="525"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.bank_size<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>256</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="526"><highlight class="normal"></highlight><highlight class="comment">//#if<sp/>defined<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="527"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>,.compass_fsr<sp/><sp/><sp/><sp/>=<sp/>AK89xx_FSR</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="528"><highlight class="normal"></highlight><highlight class="comment">//#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="529"><highlight class="normal"></highlight><highlight class="comment">//};</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="530" refid="group___d_r_i_v_e_r_s_1ga7fefd0bb47e09b7e39e25e9795cd7edc" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structhw__s" kindref="compound">hw_s</ref><sp/><ref refid="group___d_r_i_v_e_r_s_1ga7fefd0bb47e09b7e39e25e9795cd7edc" kindref="member">hw</ref>={</highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/>0x68,<sp/><sp/></highlight><highlight class="comment">//addr</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/>1024,<sp/><sp/></highlight><highlight class="comment">//max_fifo</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/>118,<sp/><sp/><sp/></highlight><highlight class="comment">//num_reg</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/>340,<sp/><sp/><sp/></highlight><highlight class="comment">//temp_sens</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/>-521,<sp/><sp/></highlight><highlight class="comment">//temp_offset</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/>256<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//bank_size</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="537"><highlight class="normal">};</highlight></codeline>
<codeline lineno="538"><highlight class="normal"></highlight></codeline>
<codeline lineno="539"><highlight class="normal"></highlight><highlight class="comment">//const<sp/>struct<sp/>test_s<sp/>test<sp/>=<sp/>{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="540"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.gyro_sens<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>32768/250,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="541"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.accel_sens<sp/><sp/><sp/><sp/><sp/>=<sp/>32768/16,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="542"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.reg_rate_div<sp/><sp/><sp/>=<sp/>0,<sp/><sp/><sp/><sp/>/*<sp/>1kHz.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="543"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.reg_lpf<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>1,<sp/><sp/><sp/><sp/>/*<sp/>188Hz.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="544"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.reg_gyro_fsr<sp/><sp/><sp/>=<sp/>0,<sp/><sp/><sp/><sp/>/*<sp/>250dps.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="545"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.reg_accel_fsr<sp/><sp/>=<sp/>0x18,<sp/>/*<sp/>16g.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="546"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.wait_ms<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>50,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="547"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.packet_thresh<sp/><sp/>=<sp/>5,<sp/><sp/><sp/><sp/>/*<sp/>5%<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="548"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.min_dps<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>10.f,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="549"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.max_dps<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>105.f,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="550"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.max_gyro_var<sp/><sp/><sp/>=<sp/>0.14f,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="551"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.min_g<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0.3f,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="552"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.max_g<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0.95f,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="553"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.max_accel_var<sp/><sp/>=<sp/>0.14f</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="554"><highlight class="normal"></highlight><highlight class="comment">//};</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="555" refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structtest__s" kindref="compound">test_s</ref><sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>={</highlight></codeline>
<codeline lineno="556"><highlight class="normal">32768/250,<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//gyro_sens</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="557"><highlight class="normal">32768/16,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>accel_sens</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="558"><highlight class="normal">0,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>reg_rate_div</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="559"><highlight class="normal">1,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>reg_lpf</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="560"><highlight class="normal">0,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>reg_gyro_fsr</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="561"><highlight class="normal">0x18,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>reg_accel_fsr</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="562"><highlight class="normal">50,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>wait_ms</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="563"><highlight class="normal">5,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>packet_thresh</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="564"><highlight class="normal">10.0f,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>min_dps</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="565"><highlight class="normal">105.0f,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>max_dps</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="566"><highlight class="normal">0.14f,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>max_gyro_var</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="567"><highlight class="normal">0.3f,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>min_g</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="568"><highlight class="normal">0.95f,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>max_g</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="569"><highlight class="normal">0.14f<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>max_accel_var</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="570"><highlight class="normal">};</highlight></codeline>
<codeline lineno="571"><highlight class="normal"></highlight></codeline>
<codeline lineno="572"><highlight class="normal"></highlight><highlight class="comment">//static<sp/>struct<sp/>gyro_state_s<sp/>st<sp/>=<sp/>{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="573"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.reg<sp/>=<sp/>&amp;reg,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="574"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.hw<sp/>=<sp/>&amp;hw,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="575"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>.test<sp/>=<sp/>&amp;test</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="576"><highlight class="normal"></highlight><highlight class="comment">//};</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="577" refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structgyro__state__s" kindref="compound">gyro_state_s</ref><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>={</highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/>&amp;<ref refid="group___d_r_i_v_e_r_s_1ga5448c351fc95ff052b110eee80e5f75c" kindref="member">reg</ref>,</highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/>&amp;<ref refid="group___d_r_i_v_e_r_s_1ga7fefd0bb47e09b7e39e25e9795cd7edc" kindref="member">hw</ref>,</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/>{0},</highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/>&amp;<ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref></highlight></codeline>
<codeline lineno="582"><highlight class="normal">};</highlight></codeline>
<codeline lineno="583"><highlight class="normal"></highlight></codeline>
<codeline lineno="584"><highlight class="normal"></highlight></codeline>
<codeline lineno="585"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined<sp/>MPU6500</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="586"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structgyro__reg__s" kindref="compound">gyro_reg_s</ref><sp/><ref refid="group___d_r_i_v_e_r_s_1ga5448c351fc95ff052b110eee80e5f75c" kindref="member">reg</ref><sp/>=<sp/>{</highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/><sp/>.<ref refid="group___d_r_i_v_e_r_s_1ga51068a36efe9d2aedc9cb8fffacbf15b" kindref="member">who_am_i</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x75,</highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/><sp/><sp/>.rate_div<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x19,</highlight></codeline>
<codeline lineno="589"><highlight class="normal"><sp/><sp/><sp/><sp/>.lpf<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x1A,</highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/><sp/>.prod_id<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x0C,</highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/><sp/>.user_ctrl<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x6A,</highlight></codeline>
<codeline lineno="592"><highlight class="normal"><sp/><sp/><sp/><sp/>.fifo_en<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x23,</highlight></codeline>
<codeline lineno="593"><highlight class="normal"><sp/><sp/><sp/><sp/>.gyro_cfg<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x1B,</highlight></codeline>
<codeline lineno="594"><highlight class="normal"><sp/><sp/><sp/><sp/>.accel_cfg<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x1C,</highlight></codeline>
<codeline lineno="595"><highlight class="normal"><sp/><sp/><sp/><sp/>.accel_cfg2<sp/><sp/><sp/><sp/><sp/>=<sp/>0x1D,</highlight></codeline>
<codeline lineno="596"><highlight class="normal"><sp/><sp/><sp/><sp/>.lp_accel_odr<sp/><sp/><sp/>=<sp/>0x1E,</highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><sp/>.motion_thr<sp/><sp/><sp/><sp/><sp/>=<sp/>0x1F,</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/>.motion_dur<sp/><sp/><sp/><sp/><sp/>=<sp/>0x20,</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/>.fifo_count_h<sp/><sp/><sp/>=<sp/>0x72,</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/>.fifo_r_w<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x74,</highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><sp/>.raw_gyro<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x43,</highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/>.raw_accel<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x3B,</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/>.temp<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x41,</highlight></codeline>
<codeline lineno="604"><highlight class="normal"><sp/><sp/><sp/><sp/>.int_enable<sp/><sp/><sp/><sp/><sp/>=<sp/>0x38,</highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/>.dmp_int_status<sp/>=<sp/>0x39,</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/>.int_status<sp/><sp/><sp/><sp/><sp/>=<sp/>0x3A,</highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/>.accel_intel<sp/><sp/><sp/><sp/>=<sp/>0x69,</highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/>.pwr_mgmt_1<sp/><sp/><sp/><sp/><sp/>=<sp/>0x6B,</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/>.pwr_mgmt_2<sp/><sp/><sp/><sp/><sp/>=<sp/>0x6C,</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/>.int_pin_cfg<sp/><sp/><sp/><sp/>=<sp/>0x37,</highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/>.mem_r_w<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x6F,</highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/>.accel_offs<sp/><sp/><sp/><sp/><sp/>=<sp/>0x77,</highlight></codeline>
<codeline lineno="613"><highlight class="normal"><sp/><sp/><sp/><sp/>.i2c_mst<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x24,</highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><sp/>.bank_sel<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x6D,</highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><sp/>.mem_start_addr<sp/>=<sp/>0x6E,</highlight></codeline>
<codeline lineno="616"><highlight class="normal"><sp/><sp/><sp/><sp/>.prgm_start_h<sp/><sp/><sp/>=<sp/>0x70</highlight></codeline>
<codeline lineno="617"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/>,.raw_compass<sp/><sp/><sp/>=<sp/>0x49,</highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/><sp/>.s0_addr<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x25,</highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/>.s0_reg<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x26,</highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><sp/><sp/>.s0_ctrl<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x27,</highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><sp/><sp/>.s1_addr<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x28,</highlight></codeline>
<codeline lineno="623"><highlight class="normal"><sp/><sp/><sp/><sp/>.s1_reg<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x29,</highlight></codeline>
<codeline lineno="624"><highlight class="normal"><sp/><sp/><sp/><sp/>.s1_ctrl<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x2A,</highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/><sp/><sp/>.s4_ctrl<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x34,</highlight></codeline>
<codeline lineno="626"><highlight class="normal"><sp/><sp/><sp/><sp/>.s0_do<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x63,</highlight></codeline>
<codeline lineno="627"><highlight class="normal"><sp/><sp/><sp/><sp/>.s1_do<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x64,</highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/><sp/><sp/>.i2c_delay_ctrl<sp/>=<sp/>0x67</highlight></codeline>
<codeline lineno="629"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="630"><highlight class="normal">};</highlight></codeline>
<codeline lineno="631"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structhw__s" kindref="compound">hw_s</ref><sp/><ref refid="group___d_r_i_v_e_r_s_1ga7fefd0bb47e09b7e39e25e9795cd7edc" kindref="member">hw</ref><sp/>=<sp/>{</highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/><sp/>.<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x68,</highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/>.max_fifo<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>1024,</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/>.num_reg<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>128,</highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/>.temp_sens<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>321,</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/>.temp_offset<sp/><sp/><sp/><sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><sp/>.bank_size<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>256</highlight></codeline>
<codeline lineno="638"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/>,.compass_fsr<sp/><sp/><sp/><sp/>=<sp/>AK89xx_FSR</highlight></codeline>
<codeline lineno="640"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="641"><highlight class="normal">};</highlight></codeline>
<codeline lineno="642"><highlight class="normal"></highlight></codeline>
<codeline lineno="643"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structtest__s" kindref="compound">test_s</ref><sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref><sp/>=<sp/>{</highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/>.<ref refid="group___d_r_i_v_e_r_s_1ga330290a347407b0d92b1d77aa274993c" kindref="member">gyro_sens</ref><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>32768/250,</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/>.accel_sens<sp/><sp/><sp/><sp/><sp/>=<sp/>32768/16,</highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/>.reg_rate_div<sp/><sp/><sp/>=<sp/>0,<sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>1kHz.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/>.reg_lpf<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>1,<sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>188Hz.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/><sp/>.reg_gyro_fsr<sp/><sp/><sp/>=<sp/>0,<sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>250dps.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/>.reg_accel_fsr<sp/><sp/>=<sp/>0x18,<sp/></highlight><highlight class="comment">/*<sp/>16g.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/><sp/><sp/>.wait_ms<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>50,</highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/>.packet_thresh<sp/><sp/>=<sp/>5,<sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>5%<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/><sp/><sp/>.min_dps<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>10.f,</highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/>.max_dps<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>105.f,</highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/><sp/>.max_gyro_var<sp/><sp/><sp/>=<sp/>0.14f,</highlight></codeline>
<codeline lineno="655"><highlight class="normal"><sp/><sp/><sp/><sp/>.min_g<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0.3f,</highlight></codeline>
<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/><sp/>.max_g<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0.95f,</highlight></codeline>
<codeline lineno="657"><highlight class="normal"><sp/><sp/><sp/><sp/>.max_accel_var<sp/><sp/>=<sp/>0.14f</highlight></codeline>
<codeline lineno="658"><highlight class="normal">};</highlight></codeline>
<codeline lineno="659"><highlight class="normal"></highlight></codeline>
<codeline lineno="660"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structgyro__state__s" kindref="compound">gyro_state_s</ref><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref><sp/>=<sp/>{</highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><sp/><sp/>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref><sp/>=<sp/>&amp;<ref refid="group___d_r_i_v_e_r_s_1ga5448c351fc95ff052b110eee80e5f75c" kindref="member">reg</ref>,</highlight></codeline>
<codeline lineno="662"><highlight class="normal"><sp/><sp/><sp/><sp/>.hw<sp/>=<sp/>&amp;<ref refid="group___d_r_i_v_e_r_s_1ga7fefd0bb47e09b7e39e25e9795cd7edc" kindref="member">hw</ref>,</highlight></codeline>
<codeline lineno="663"><highlight class="normal"><sp/><sp/><sp/><sp/>.test<sp/>=<sp/>&amp;<ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref></highlight></codeline>
<codeline lineno="664"><highlight class="normal">};</highlight></codeline>
<codeline lineno="665"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="666"><highlight class="normal"></highlight></codeline>
<codeline lineno="667" refid="group___d_r_i_v_e_r_s_1ga973c680573b37fc359fc68d0707da355" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MAX_PACKET_LENGTH<sp/>(12)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="668"><highlight class="normal"></highlight></codeline>
<codeline lineno="669"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="670"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga4764ce0ba4e07a4c774f69ab3b83d1f9" kindref="member">setup_compass</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="671"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MAX_COMPASS_SAMPLE_RATE<sp/>(100)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="672"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="673"><highlight class="normal"></highlight></codeline>
<codeline lineno="681" refid="group___d_r_i_v_e_r_s_1gafd5ebff6b0179e1dce0b68c2272cae07" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gafd5ebff6b0179e1dce0b68c2272cae07" kindref="member">set_int_enable</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>enable)</highlight></codeline>
<codeline lineno="682"><highlight class="normal">{</highlight></codeline>
<codeline lineno="683"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tmp;</highlight></codeline>
<codeline lineno="684"><highlight class="normal"></highlight></codeline>
<codeline lineno="685"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" kindref="member">dmp_on</ref>)<sp/>{</highlight></codeline>
<codeline lineno="686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(enable)</highlight></codeline>
<codeline lineno="687"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga4dc5309ed09fc683d8e5a247feaad69d" kindref="member">BIT_DMP_INT_EN</ref>;</highlight></codeline>
<codeline lineno="688"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="689"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/>0x00;</highlight></codeline>
<codeline lineno="690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga48b47844d4b0570e60aa6806faa59eae" kindref="member">int_enable</ref>,<sp/>1,<sp/>&amp;tmp))</highlight></codeline>
<codeline lineno="691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa366c36057f31e6e0d4cf2ca4a1ef52f" kindref="member">int_enable</ref><sp/>=<sp/>tmp;</highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>)</highlight></codeline>
<codeline lineno="695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(enable<sp/>&amp;&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa366c36057f31e6e0d4cf2ca4a1ef52f" kindref="member">int_enable</ref>)</highlight></codeline>
<codeline lineno="697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="698"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(enable)</highlight></codeline>
<codeline lineno="699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga45eec9dbc46778c356703dcf90b9e0c3" kindref="member">BIT_DATA_RDY_EN</ref>;</highlight></codeline>
<codeline lineno="700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/>0x00;</highlight></codeline>
<codeline lineno="702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga48b47844d4b0570e60aa6806faa59eae" kindref="member">int_enable</ref>,<sp/>1,<sp/>&amp;tmp))</highlight></codeline>
<codeline lineno="703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa366c36057f31e6e0d4cf2ca4a1ef52f" kindref="member">int_enable</ref><sp/>=<sp/>tmp;</highlight></codeline>
<codeline lineno="705"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="706"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="707"><highlight class="normal">}</highlight></codeline>
<codeline lineno="708"><highlight class="normal"></highlight></codeline>
<codeline lineno="713" refid="group___d_r_i_v_e_r_s_1ga0e1201ecfd8453f1d89e4299528baaf6" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga0e1201ecfd8453f1d89e4299528baaf6" kindref="member">mpu_reg_dump</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="714"><highlight class="normal">{</highlight></codeline>
<codeline lineno="715"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>ii;</highlight></codeline>
<codeline lineno="716"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>data;</highlight></codeline>
<codeline lineno="717"><highlight class="normal"></highlight></codeline>
<codeline lineno="718"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(ii<sp/>=<sp/>0;<sp/>ii<sp/>&lt;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga1039fa66b110194727938cd86be8c3c5" kindref="member">num_reg</ref>;<sp/>ii++)<sp/>{</highlight></codeline>
<codeline lineno="719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ii<sp/>==<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb6763dc5f368ea01ef7c733cea9dab4" kindref="member">fifo_r_w</ref><sp/>||<sp/>ii<sp/>==<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gae17166b43fa12a960c0eced9a3c04bf0" kindref="member">mem_r_w</ref>)</highlight></codeline>
<codeline lineno="720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/>ii,<sp/>1,<sp/>&amp;data))</highlight></codeline>
<codeline lineno="722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga2905fba7885cd95057e1655cb4d16bda" kindref="member">log_i</ref>(</highlight><highlight class="stringliteral">&quot;%#5x:<sp/>%#5x\r\n&quot;</highlight><highlight class="normal">,<sp/>ii,<sp/>data);</highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="725"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="726"><highlight class="normal">}</highlight></codeline>
<codeline lineno="727"><highlight class="normal"></highlight></codeline>
<codeline lineno="735" refid="group___d_r_i_v_e_r_s_1ga5c35a3363337014e11769a0ea7c0dfa9" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga5c35a3363337014e11769a0ea7c0dfa9" kindref="member">mpu_read_reg</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga5448c351fc95ff052b110eee80e5f75c" kindref="member">reg</ref>,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*data)</highlight></codeline>
<codeline lineno="736"><highlight class="normal">{</highlight></codeline>
<codeline lineno="737"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga5448c351fc95ff052b110eee80e5f75c" kindref="member">reg</ref><sp/>==<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb6763dc5f368ea01ef7c733cea9dab4" kindref="member">fifo_r_w</ref><sp/>||<sp/><ref refid="group___d_r_i_v_e_r_s_1ga5448c351fc95ff052b110eee80e5f75c" kindref="member">reg</ref><sp/>==<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gae17166b43fa12a960c0eced9a3c04bf0" kindref="member">mem_r_w</ref>)</highlight></codeline>
<codeline lineno="738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="739"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga5448c351fc95ff052b110eee80e5f75c" kindref="member">reg</ref><sp/>&gt;=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga1039fa66b110194727938cd86be8c3c5" kindref="member">num_reg</ref>)</highlight></codeline>
<codeline lineno="740"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="741"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga5448c351fc95ff052b110eee80e5f75c" kindref="member">reg</ref>,<sp/>1,<sp/>data);</highlight></codeline>
<codeline lineno="742"><highlight class="normal">}</highlight></codeline>
<codeline lineno="743"><highlight class="normal"></highlight></codeline>
<codeline lineno="757" refid="group___d_r_i_v_e_r_s_1gac48a36b51e23bc4191ec13916bbb9d0b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gac48a36b51e23bc4191ec13916bbb9d0b" kindref="member">mpu_init</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="758"><highlight class="normal">{</highlight></codeline>
<codeline lineno="759"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>data[6],<sp/>rev;</highlight></codeline>
<codeline lineno="760"><highlight class="normal"></highlight></codeline>
<codeline lineno="761"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Reset<sp/>device.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="762"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gaf4ce49fd1fc9b1461b5241f9ef4812f4" kindref="member">BIT_RESET</ref>;</highlight></codeline>
<codeline lineno="763"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaa01fb0872030e8e2932f8d1d257ea86a" kindref="member">pwr_mgmt_1</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="764"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="765"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" kindref="member">delay_ms</ref>(100);</highlight></codeline>
<codeline lineno="766"><highlight class="normal"></highlight></codeline>
<codeline lineno="767"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Wake<sp/>up<sp/>chip.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="768"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>0x00;</highlight></codeline>
<codeline lineno="769"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaa01fb0872030e8e2932f8d1d257ea86a" kindref="member">pwr_mgmt_1</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="771"><highlight class="normal"></highlight></codeline>
<codeline lineno="772"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>MPU6050</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="773"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>product<sp/>revision.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="774"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gab745dd73e0c3ef01f30f96444358cb89" kindref="member">accel_offs</ref>,<sp/>6,<sp/>data))</highlight></codeline>
<codeline lineno="775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="776"><highlight class="normal"><sp/><sp/><sp/><sp/>rev<sp/>=<sp/>((data[5]<sp/>&amp;<sp/>0x01)<sp/>&lt;&lt;<sp/>2)<sp/>|<sp/>((data[3]<sp/>&amp;<sp/>0x01)<sp/>&lt;&lt;<sp/>1)<sp/>|</highlight></codeline>
<codeline lineno="777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(data[1]<sp/>&amp;<sp/>0x01);</highlight></codeline>
<codeline lineno="778"><highlight class="normal"></highlight></codeline>
<codeline lineno="779"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rev)<sp/>{</highlight></codeline>
<codeline lineno="780"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Congrats,<sp/>these<sp/>parts<sp/>are<sp/>better.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rev<sp/>==<sp/>1)</highlight></codeline>
<codeline lineno="782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab72e3cead391dee41f28e041282d743f" kindref="member">accel_half</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="783"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rev<sp/>==<sp/>2)</highlight></codeline>
<codeline lineno="784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab72e3cead391dee41f28e041282d743f" kindref="member">accel_half</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gab354affc295f7d61fe8a355c9361cc5a" kindref="member">log_e</ref>(</highlight><highlight class="stringliteral">&quot;Unsupported<sp/>software<sp/>product<sp/>rev<sp/>%d.\n&quot;</highlight><highlight class="normal">,<sp/>rev);</highlight></codeline>
<codeline lineno="787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="789"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaf418d8a6b0e262df54ab8a6a5228011c" kindref="member">prod_id</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="791"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rev<sp/>=<sp/>data[0]<sp/>&amp;<sp/>0x0F;</highlight></codeline>
<codeline lineno="793"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!rev)<sp/>{</highlight></codeline>
<codeline lineno="794"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gab354affc295f7d61fe8a355c9361cc5a" kindref="member">log_e</ref>(</highlight><highlight class="stringliteral">&quot;Product<sp/>ID<sp/>read<sp/>as<sp/>0<sp/>indicates<sp/>device<sp/>is<sp/>either<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="795"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;incompatible<sp/>or<sp/>an<sp/>MPU3050.\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="796"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="797"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rev<sp/>==<sp/>4)<sp/>{</highlight></codeline>
<codeline lineno="798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga2905fba7885cd95057e1655cb4d16bda" kindref="member">log_i</ref>(</highlight><highlight class="stringliteral">&quot;Half<sp/>sensitivity<sp/>part<sp/>found.\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="799"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab72e3cead391dee41f28e041282d743f" kindref="member">accel_half</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="800"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab72e3cead391dee41f28e041282d743f" kindref="member">accel_half</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="802"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="803"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined<sp/>MPU6500</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="804"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MPU6500_MEM_REV_ADDR<sp/><sp/><sp/><sp/>(0x17)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="805"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3374bececb6743893c9eab27645c1182" kindref="member">mpu_read_mem</ref>(MPU6500_MEM_REV_ADDR,<sp/>1,<sp/>&amp;rev))</highlight></codeline>
<codeline lineno="806"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="807"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rev<sp/>==<sp/>0x1)</highlight></codeline>
<codeline lineno="808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab72e3cead391dee41f28e041282d743f" kindref="member">accel_half</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="809"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gab354affc295f7d61fe8a355c9361cc5a" kindref="member">log_e</ref>(</highlight><highlight class="stringliteral">&quot;Unsupported<sp/>software<sp/>product<sp/>rev<sp/>%d.\n&quot;</highlight><highlight class="normal">,<sp/>rev);</highlight></codeline>
<codeline lineno="811"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="812"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="813"><highlight class="normal"></highlight></codeline>
<codeline lineno="814"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>MPU6500<sp/>shares<sp/>4kB<sp/>of<sp/>memory<sp/>between<sp/>the<sp/>DMP<sp/>and<sp/>the<sp/>FIFO.<sp/>Since<sp/>the</highlight></codeline>
<codeline lineno="815"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>first<sp/>3kB<sp/>are<sp/>needed<sp/>by<sp/>the<sp/>DMP,<sp/>we&apos;ll<sp/>use<sp/>the<sp/>last<sp/>1kB<sp/>for<sp/>the<sp/>FIFO.</highlight></codeline>
<codeline lineno="816"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="817"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3769fd3fa71deaef1e77ce14c26f679d" kindref="member">BIT_FIFO_SIZE_1024</ref><sp/>|<sp/>0x8;</highlight></codeline>
<codeline lineno="818"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;accel_cfg2,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="820"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="821"><highlight class="normal"></highlight></codeline>
<codeline lineno="822"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>to<sp/>invalid<sp/>values<sp/>to<sp/>ensure<sp/>no<sp/>I2C<sp/>writes<sp/>are<sp/>skipped.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="823"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref><sp/>=<sp/>0xFF;</highlight></codeline>
<codeline lineno="824"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab45a727aeee17380828a3e20ccb375c2" kindref="member">gyro_fsr</ref><sp/>=<sp/>0xFF;</highlight></codeline>
<codeline lineno="825"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaf66873be1446ed552812e32d40eced61" kindref="member">accel_fsr</ref><sp/>=<sp/>0xFF;</highlight></codeline>
<codeline lineno="826"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga16ec8ca8298f62ac01419775377270fb" kindref="member">lpf</ref><sp/>=<sp/>0xFF;</highlight></codeline>
<codeline lineno="827"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga2660470fcf7b53e2e832a397cbe6c354" kindref="member">sample_rate</ref><sp/>=<sp/>0xFFFF;</highlight></codeline>
<codeline lineno="828"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref><sp/>=<sp/>0xFF;</highlight></codeline>
<codeline lineno="829"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga6d3a962d6435644c7ea68e7d65934636" kindref="member">bypass_mode</ref><sp/>=<sp/>0xFF;</highlight></codeline>
<codeline lineno="830"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="831"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_sample_rate<sp/>=<sp/>0xFFFF;</highlight></codeline>
<codeline lineno="832"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="833"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>mpu_set_sensors<sp/>always<sp/>preserves<sp/>this<sp/>setting.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="834"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab7bd5165d6e62cb0d814cf3401958445" kindref="member">clk_src</ref><sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga75570f009627c6f4ddfb2d936d81e207a01b240917a78674d3e387110a6a8f94c" kindref="member">INV_CLK_PLL</ref>;</highlight></codeline>
<codeline lineno="835"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Handled<sp/>in<sp/>next<sp/>call<sp/>to<sp/>mpu_set_bypass.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="836"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga6f12e54ae8c7f2dd77954f3ab619bbb9" kindref="member">active_low_int</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="837"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga55ce40fc460a62829ec149edaccffe7c" kindref="member">latched_int</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="838"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga279cd5d5d78890357f2d42905d7471df" kindref="member">int_motion_only</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="839"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga33e138d8a49744eb9b4ea0e9086cef1c" kindref="member">lp_accel_mode</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="840"><highlight class="normal"><sp/><sp/><sp/><sp/>memset(&amp;<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>,<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>));</highlight></codeline>
<codeline lineno="841"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" kindref="member">dmp_on</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="842"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga1d2ff55e17aae1459dfad61d76054b1b" kindref="member">dmp_loaded</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="843"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga5f42b7e1e740f2fb64427417e9e2dab7" kindref="member">dmp_sample_rate</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="844"><highlight class="normal"></highlight></codeline>
<codeline lineno="845"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gad09e6031c8677adc0b8a39b6deea8e27" kindref="member">mpu_set_gyro_fsr</ref>(2000))</highlight></codeline>
<codeline lineno="846"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="847"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga2713a96af104cfb2ae8e0ed4c3718119" kindref="member">mpu_set_accel_fsr</ref>(2))</highlight></codeline>
<codeline lineno="848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="849"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga5661a9dee25152166769910767a2a93d" kindref="member">mpu_set_lpf</ref>(42))</highlight></codeline>
<codeline lineno="850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="851"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga0144d666a67a82888b8580002afe8b55" kindref="member">mpu_set_sample_rate</ref>(50))</highlight></codeline>
<codeline lineno="852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="853"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gababbdda287e1f19323489f90a0889dd7" kindref="member">mpu_configure_fifo</ref>(0))</highlight></codeline>
<codeline lineno="854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="855"><highlight class="normal"></highlight></codeline>
<codeline lineno="856"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>if<sp/>(int_param)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="857"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reg_int_cb(int_param);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="858"><highlight class="normal"></highlight></codeline>
<codeline lineno="859"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="860"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga4764ce0ba4e07a4c774f69ab3b83d1f9" kindref="member">setup_compass</ref>();</highlight></codeline>
<codeline lineno="861"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga78da3828de0ef9d080c4d03e7bc45e7b" kindref="member">mpu_set_compass_sample_rate</ref>(10))</highlight></codeline>
<codeline lineno="862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="863"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="864"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Already<sp/>disabled<sp/>by<sp/>setup_compass.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="865"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga36f70f38371b48d81094d3b061233e15" kindref="member">mpu_set_bypass</ref>(0))</highlight></codeline>
<codeline lineno="866"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="867"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="868"><highlight class="normal"></highlight></codeline>
<codeline lineno="869"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga6e77e7cc1cf6be5e8fdf617c5b4586d1" kindref="member">mpu_set_sensors</ref>(0);</highlight></codeline>
<codeline lineno="870"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="871"><highlight class="normal">}</highlight></codeline>
<codeline lineno="872"><highlight class="normal"></highlight></codeline>
<codeline lineno="888" refid="group___d_r_i_v_e_r_s_1ga3a4fea75686ab7d2e68634e81ccac04c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3a4fea75686ab7d2e68634e81ccac04c" kindref="member">mpu_lp_accel_mode</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>rate)</highlight></codeline>
<codeline lineno="889"><highlight class="normal">{</highlight></codeline>
<codeline lineno="890"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tmp[2];</highlight></codeline>
<codeline lineno="891"><highlight class="normal"></highlight></codeline>
<codeline lineno="892"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rate<sp/>&gt;<sp/>40)</highlight></codeline>
<codeline lineno="893"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="894"><highlight class="normal"></highlight></codeline>
<codeline lineno="895"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!rate)<sp/>{</highlight></codeline>
<codeline lineno="896"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga653cb855300bff9285ce4b8dca6a503b" kindref="member">mpu_set_int_latched</ref>(0);</highlight></codeline>
<codeline lineno="897"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="898"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp[1]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga4e2ef22b94b90f9b83394dfe1f688ce4" kindref="member">BIT_STBY_XYZG</ref>;</highlight></codeline>
<codeline lineno="899"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaa01fb0872030e8e2932f8d1d257ea86a" kindref="member">pwr_mgmt_1</ref>,<sp/>2,<sp/>tmp))</highlight></codeline>
<codeline lineno="900"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="901"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga33e138d8a49744eb9b4ea0e9086cef1c" kindref="member">lp_accel_mode</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="902"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="903"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="904"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>For<sp/>LP<sp/>accel,<sp/>we<sp/>automatically<sp/>configure<sp/>the<sp/>hardware<sp/>to<sp/>produce<sp/>latched</highlight></codeline>
<codeline lineno="905"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>interrupts.<sp/>In<sp/>LP<sp/>accel<sp/>mode,<sp/>the<sp/>hardware<sp/>cycles<sp/>into<sp/>sleep<sp/>mode<sp/>before</highlight></codeline>
<codeline lineno="906"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>it<sp/>gets<sp/>a<sp/>chance<sp/>to<sp/>deassert<sp/>the<sp/>interrupt<sp/>pin;<sp/>therefore,<sp/>we<sp/>shift<sp/>this</highlight></codeline>
<codeline lineno="907"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>responsibility<sp/>over<sp/>to<sp/>the<sp/>MCU.</highlight></codeline>
<codeline lineno="908"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="909"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>Any<sp/>register<sp/>read<sp/>will<sp/>clear<sp/>the<sp/>interrupt.</highlight></codeline>
<codeline lineno="910"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="911"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga653cb855300bff9285ce4b8dca6a503b" kindref="member">mpu_set_int_latched</ref>(1);</highlight></codeline>
<codeline lineno="912"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>MPU6050</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="913"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga63e6f23af37626aa1498d8c248f259e7" kindref="member">BIT_LPA_CYCLE</ref>;</highlight></codeline>
<codeline lineno="914"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rate<sp/>==<sp/>1)<sp/>{</highlight></codeline>
<codeline lineno="915"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp[1]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7ab44c7d0127a9466747853533a537b567" kindref="member">INV_LPA_1_25HZ</ref>;</highlight></codeline>
<codeline lineno="916"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga5661a9dee25152166769910767a2a93d" kindref="member">mpu_set_lpf</ref>(5);</highlight></codeline>
<codeline lineno="917"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rate<sp/>&lt;=<sp/>5)<sp/>{</highlight></codeline>
<codeline lineno="918"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp[1]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a474cac76bff369dd656cc973207a1ca5" kindref="member">INV_LPA_5HZ</ref>;</highlight></codeline>
<codeline lineno="919"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga5661a9dee25152166769910767a2a93d" kindref="member">mpu_set_lpf</ref>(5);</highlight></codeline>
<codeline lineno="920"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rate<sp/>&lt;=<sp/>20)<sp/>{</highlight></codeline>
<codeline lineno="921"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp[1]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7accaaf47c58dfe32cbf2ffa11fdb83108" kindref="member">INV_LPA_20HZ</ref>;</highlight></codeline>
<codeline lineno="922"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga5661a9dee25152166769910767a2a93d" kindref="member">mpu_set_lpf</ref>(10);</highlight></codeline>
<codeline lineno="923"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="924"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp[1]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a798d2b86eafcf3fc7c7fe775f46cb4cb" kindref="member">INV_LPA_40HZ</ref>;</highlight></codeline>
<codeline lineno="925"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga5661a9dee25152166769910767a2a93d" kindref="member">mpu_set_lpf</ref>(20);</highlight></codeline>
<codeline lineno="926"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="927"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[1]<sp/>=<sp/>(tmp[1]<sp/>&lt;&lt;<sp/>6)<sp/>|<sp/><ref refid="group___d_r_i_v_e_r_s_1ga4e2ef22b94b90f9b83394dfe1f688ce4" kindref="member">BIT_STBY_XYZG</ref>;</highlight></codeline>
<codeline lineno="928"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaa01fb0872030e8e2932f8d1d257ea86a" kindref="member">pwr_mgmt_1</ref>,<sp/>2,<sp/>tmp))</highlight></codeline>
<codeline lineno="929"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="930"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined<sp/>MPU6500</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="931"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>wake<sp/>frequency.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="932"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rate<sp/>==<sp/>1)</highlight></codeline>
<codeline lineno="933"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7ab44c7d0127a9466747853533a537b567" kindref="member">INV_LPA_1_25HZ</ref>;</highlight></codeline>
<codeline lineno="934"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rate<sp/>==<sp/>2)</highlight></codeline>
<codeline lineno="935"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/>INV_LPA_2_5HZ;</highlight></codeline>
<codeline lineno="936"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rate<sp/>&lt;=<sp/>5)</highlight></codeline>
<codeline lineno="937"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a474cac76bff369dd656cc973207a1ca5" kindref="member">INV_LPA_5HZ</ref>;</highlight></codeline>
<codeline lineno="938"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rate<sp/>&lt;=<sp/>10)</highlight></codeline>
<codeline lineno="939"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/>INV_LPA_10HZ;</highlight></codeline>
<codeline lineno="940"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rate<sp/>&lt;=<sp/>20)</highlight></codeline>
<codeline lineno="941"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7accaaf47c58dfe32cbf2ffa11fdb83108" kindref="member">INV_LPA_20HZ</ref>;</highlight></codeline>
<codeline lineno="942"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rate<sp/>&lt;=<sp/>40)</highlight></codeline>
<codeline lineno="943"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a798d2b86eafcf3fc7c7fe775f46cb4cb" kindref="member">INV_LPA_40HZ</ref>;</highlight></codeline>
<codeline lineno="944"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rate<sp/>&lt;=<sp/>80)</highlight></codeline>
<codeline lineno="945"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/>INV_LPA_80HZ;</highlight></codeline>
<codeline lineno="946"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rate<sp/>&lt;=<sp/>160)</highlight></codeline>
<codeline lineno="947"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/>INV_LPA_160HZ;</highlight></codeline>
<codeline lineno="948"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rate<sp/>&lt;=<sp/>320)</highlight></codeline>
<codeline lineno="949"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/>INV_LPA_320HZ;</highlight></codeline>
<codeline lineno="950"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="951"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/>INV_LPA_640HZ;</highlight></codeline>
<codeline lineno="952"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;lp_accel_odr,<sp/>1,<sp/>tmp))</highlight></codeline>
<codeline lineno="953"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="954"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga63e6f23af37626aa1498d8c248f259e7" kindref="member">BIT_LPA_CYCLE</ref>;</highlight></codeline>
<codeline lineno="955"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaa01fb0872030e8e2932f8d1d257ea86a" kindref="member">pwr_mgmt_1</ref>,<sp/>1,<sp/>tmp))</highlight></codeline>
<codeline lineno="956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="957"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="958"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref><sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gaa03f025a17ed491e70b88274e89c75c5" kindref="member">INV_XYZ_ACCEL</ref>;</highlight></codeline>
<codeline lineno="959"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab7bd5165d6e62cb0d814cf3401958445" kindref="member">clk_src</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="960"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga33e138d8a49744eb9b4ea0e9086cef1c" kindref="member">lp_accel_mode</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="961"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gababbdda287e1f19323489f90a0889dd7" kindref="member">mpu_configure_fifo</ref>(0);</highlight></codeline>
<codeline lineno="962"><highlight class="normal"></highlight></codeline>
<codeline lineno="963"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="964"><highlight class="normal">}</highlight></codeline>
<codeline lineno="965"><highlight class="normal"></highlight></codeline>
<codeline lineno="972" refid="group___d_r_i_v_e_r_s_1ga5555854590ad11495c0e30401294bae2" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga5555854590ad11495c0e30401294bae2" kindref="member">mpu_get_gyro_reg</ref>(</highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>*data,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*timestamp)</highlight></codeline>
<codeline lineno="973"><highlight class="normal">{</highlight></codeline>
<codeline lineno="974"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tmp[6];</highlight></codeline>
<codeline lineno="975"><highlight class="normal"></highlight></codeline>
<codeline lineno="976"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref><sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3fdc30f9c0a26c2c4e2bb88921f91629" kindref="member">INV_XYZ_GYRO</ref>))</highlight></codeline>
<codeline lineno="977"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="978"><highlight class="normal"></highlight></codeline>
<codeline lineno="979"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gab5c2246c44bb36b21596fe5acf7ec0d4" kindref="member">raw_gyro</ref>,<sp/>6,<sp/>tmp))</highlight></codeline>
<codeline lineno="980"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="981"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>(tmp[0]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>tmp[1];</highlight></codeline>
<codeline lineno="982"><highlight class="normal"><sp/><sp/><sp/><sp/>data[1]<sp/>=<sp/>(tmp[2]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>tmp[3];</highlight></codeline>
<codeline lineno="983"><highlight class="normal"><sp/><sp/><sp/><sp/>data[2]<sp/>=<sp/>(tmp[4]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>tmp[5];</highlight></codeline>
<codeline lineno="984"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(timestamp)</highlight></codeline>
<codeline lineno="985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3e6b6bc6d1cd2956353a31bfadd3c332" kindref="member">get_ms</ref>(timestamp);</highlight></codeline>
<codeline lineno="986"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="987"><highlight class="normal">}</highlight></codeline>
<codeline lineno="988"><highlight class="normal"></highlight></codeline>
<codeline lineno="995" refid="group___d_r_i_v_e_r_s_1gae4ae960e5df78049ece2647772a3d809" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gae4ae960e5df78049ece2647772a3d809" kindref="member">mpu_get_accel_reg</ref>(</highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>*data,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*timestamp)</highlight></codeline>
<codeline lineno="996"><highlight class="normal">{</highlight></codeline>
<codeline lineno="997"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tmp[6];</highlight></codeline>
<codeline lineno="998"><highlight class="normal"></highlight></codeline>
<codeline lineno="999"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref><sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1gaa03f025a17ed491e70b88274e89c75c5" kindref="member">INV_XYZ_ACCEL</ref>))</highlight></codeline>
<codeline lineno="1000"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1001"><highlight class="normal"></highlight></codeline>
<codeline lineno="1002"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga9b7c162cea6a3deeaac41444c613b7bc" kindref="member">raw_accel</ref>,<sp/>6,<sp/>tmp))</highlight></codeline>
<codeline lineno="1003"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1004"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>(tmp[0]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>tmp[1];</highlight></codeline>
<codeline lineno="1005"><highlight class="normal"><sp/><sp/><sp/><sp/>data[1]<sp/>=<sp/>(tmp[2]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>tmp[3];</highlight></codeline>
<codeline lineno="1006"><highlight class="normal"><sp/><sp/><sp/><sp/>data[2]<sp/>=<sp/>(tmp[4]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>tmp[5];</highlight></codeline>
<codeline lineno="1007"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(timestamp)</highlight></codeline>
<codeline lineno="1008"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3e6b6bc6d1cd2956353a31bfadd3c332" kindref="member">get_ms</ref>(timestamp);</highlight></codeline>
<codeline lineno="1009"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1010"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1011"><highlight class="normal"></highlight></codeline>
<codeline lineno="1018" refid="group___d_r_i_v_e_r_s_1gaa449b565a157b4b8ca0f491b7ed46018" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaa449b565a157b4b8ca0f491b7ed46018" kindref="member">mpu_get_temperature</ref>(</highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*data,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*timestamp)</highlight></codeline>
<codeline lineno="1019"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1020"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tmp[2];</highlight></codeline>
<codeline lineno="1021"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>raw;</highlight></codeline>
<codeline lineno="1022"><highlight class="normal"></highlight></codeline>
<codeline lineno="1023"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>))</highlight></codeline>
<codeline lineno="1024"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1025"><highlight class="normal"></highlight></codeline>
<codeline lineno="1026"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga47674fab0681811c1b733462944e0233" kindref="member">temp</ref>,<sp/>2,<sp/>tmp))</highlight></codeline>
<codeline lineno="1027"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1028"><highlight class="normal"><sp/><sp/><sp/><sp/>raw<sp/>=<sp/>(tmp[0]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>tmp[1];</highlight></codeline>
<codeline lineno="1029"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(timestamp)</highlight></codeline>
<codeline lineno="1030"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3e6b6bc6d1cd2956353a31bfadd3c332" kindref="member">get_ms</ref>(timestamp);</highlight></codeline>
<codeline lineno="1031"><highlight class="normal"></highlight></codeline>
<codeline lineno="1032"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>(long)((35<sp/>+<sp/>((raw<sp/>-<sp/>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga56f98c91a7c4d60ccea1ade1f3e88d04" kindref="member">temp_offset</ref>)<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gab2397f792a86b32b0957c24e3912bc63" kindref="member">temp_sens</ref>))<sp/>*<sp/>65536L);</highlight></codeline>
<codeline lineno="1033"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1034"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1035"><highlight class="normal"></highlight></codeline>
<codeline lineno="1043" refid="group___d_r_i_v_e_r_s_1ga4968cc2ec80f0da0d72436551c81f134" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga4968cc2ec80f0da0d72436551c81f134" kindref="member">mpu_set_accel_bias</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*accel_bias)</highlight></codeline>
<codeline lineno="1044"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1045"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>data[6];</highlight></codeline>
<codeline lineno="1046"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>accel_hw[3];</highlight></codeline>
<codeline lineno="1047"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>got_accel[3];</highlight></codeline>
<codeline lineno="1048"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>fg[3];</highlight></codeline>
<codeline lineno="1049"><highlight class="normal"></highlight></codeline>
<codeline lineno="1050"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!accel_bias)</highlight></codeline>
<codeline lineno="1051"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1052"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!accel_bias[0]<sp/>&amp;&amp;<sp/>!accel_bias[1]<sp/>&amp;&amp;<sp/>!accel_bias[2])</highlight></codeline>
<codeline lineno="1053"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1054"><highlight class="normal"></highlight></codeline>
<codeline lineno="1055"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/>3,<sp/>3,<sp/>data))</highlight></codeline>
<codeline lineno="1056"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1057"><highlight class="normal"><sp/><sp/><sp/><sp/>fg[0]<sp/>=<sp/>((data[0]<sp/>&gt;&gt;<sp/>4)<sp/>+<sp/>8)<sp/>&amp;<sp/>0xf;</highlight></codeline>
<codeline lineno="1058"><highlight class="normal"><sp/><sp/><sp/><sp/>fg[1]<sp/>=<sp/>((data[1]<sp/>&gt;&gt;<sp/>4)<sp/>+<sp/>8)<sp/>&amp;<sp/>0xf;</highlight></codeline>
<codeline lineno="1059"><highlight class="normal"><sp/><sp/><sp/><sp/>fg[2]<sp/>=<sp/>((data[2]<sp/>&gt;&gt;<sp/>4)<sp/>+<sp/>8)<sp/>&amp;<sp/>0xf;</highlight></codeline>
<codeline lineno="1060"><highlight class="normal"></highlight></codeline>
<codeline lineno="1061"><highlight class="normal"><sp/><sp/><sp/><sp/>accel_hw[0]<sp/>=<sp/>(short)(accel_bias[0]<sp/>*<sp/>2<sp/>/<sp/>(64<sp/>+<sp/>fg[0]));</highlight></codeline>
<codeline lineno="1062"><highlight class="normal"><sp/><sp/><sp/><sp/>accel_hw[1]<sp/>=<sp/>(short)(accel_bias[1]<sp/>*<sp/>2<sp/>/<sp/>(64<sp/>+<sp/>fg[1]));</highlight></codeline>
<codeline lineno="1063"><highlight class="normal"><sp/><sp/><sp/><sp/>accel_hw[2]<sp/>=<sp/>(short)(accel_bias[2]<sp/>*<sp/>2<sp/>/<sp/>(64<sp/>+<sp/>fg[2]));</highlight></codeline>
<codeline lineno="1064"><highlight class="normal"></highlight></codeline>
<codeline lineno="1065"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/>0x06,<sp/>6,<sp/>data))</highlight></codeline>
<codeline lineno="1066"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1067"><highlight class="normal"></highlight></codeline>
<codeline lineno="1068"><highlight class="normal"><sp/><sp/><sp/><sp/>got_accel[0]<sp/>=<sp/>((short)data[0]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>data[1];</highlight></codeline>
<codeline lineno="1069"><highlight class="normal"><sp/><sp/><sp/><sp/>got_accel[1]<sp/>=<sp/>((short)data[2]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>data[3];</highlight></codeline>
<codeline lineno="1070"><highlight class="normal"><sp/><sp/><sp/><sp/>got_accel[2]<sp/>=<sp/>((short)data[4]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>data[5];</highlight></codeline>
<codeline lineno="1071"><highlight class="normal"></highlight></codeline>
<codeline lineno="1072"><highlight class="normal"><sp/><sp/><sp/><sp/>accel_hw[0]<sp/>+=<sp/>got_accel[0];</highlight></codeline>
<codeline lineno="1073"><highlight class="normal"><sp/><sp/><sp/><sp/>accel_hw[1]<sp/>+=<sp/>got_accel[1];</highlight></codeline>
<codeline lineno="1074"><highlight class="normal"><sp/><sp/><sp/><sp/>accel_hw[2]<sp/>+=<sp/>got_accel[2];</highlight></codeline>
<codeline lineno="1075"><highlight class="normal"></highlight></codeline>
<codeline lineno="1076"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>(accel_hw[0]<sp/>&gt;&gt;<sp/>8)<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="1077"><highlight class="normal"><sp/><sp/><sp/><sp/>data[1]<sp/>=<sp/>(accel_hw[0])<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="1078"><highlight class="normal"><sp/><sp/><sp/><sp/>data[2]<sp/>=<sp/>(accel_hw[1]<sp/>&gt;&gt;<sp/>8)<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="1079"><highlight class="normal"><sp/><sp/><sp/><sp/>data[3]<sp/>=<sp/>(accel_hw[1])<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="1080"><highlight class="normal"><sp/><sp/><sp/><sp/>data[4]<sp/>=<sp/>(accel_hw[2]<sp/>&gt;&gt;<sp/>8)<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="1081"><highlight class="normal"><sp/><sp/><sp/><sp/>data[5]<sp/>=<sp/>(accel_hw[2])<sp/>&amp;<sp/>0xff;</highlight></codeline>
<codeline lineno="1082"><highlight class="normal"></highlight></codeline>
<codeline lineno="1083"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/>0x06,<sp/>6,<sp/>data))</highlight></codeline>
<codeline lineno="1084"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1085"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1086"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1087"><highlight class="normal"></highlight></codeline>
<codeline lineno="1092" refid="group___d_r_i_v_e_r_s_1gaf23e9f57c0059be6ec57862f0584de10" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaf23e9f57c0059be6ec57862f0584de10" kindref="member">mpu_reset_fifo</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1093"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1094"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>data;</highlight></codeline>
<codeline lineno="1095"><highlight class="normal"></highlight></codeline>
<codeline lineno="1096"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>))</highlight></codeline>
<codeline lineno="1097"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1098"><highlight class="normal"></highlight></codeline>
<codeline lineno="1099"><highlight class="normal"><sp/><sp/><sp/><sp/>data<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1100"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga48b47844d4b0570e60aa6806faa59eae" kindref="member">int_enable</ref>,<sp/>1,<sp/>&amp;data))</highlight></codeline>
<codeline lineno="1101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1102"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga6a392b7ecae843c734db3d832f11af49" kindref="member">fifo_en</ref>,<sp/>1,<sp/>&amp;data))</highlight></codeline>
<codeline lineno="1103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1104"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" kindref="member">user_ctrl</ref>,<sp/>1,<sp/>&amp;data))</highlight></codeline>
<codeline lineno="1105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1106"><highlight class="normal"></highlight></codeline>
<codeline lineno="1107"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" kindref="member">dmp_on</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gaeae2cc64314ad05f3a93d2358a2369db" kindref="member">BIT_FIFO_RST</ref><sp/>|<sp/><ref refid="group___d_r_i_v_e_r_s_1ga37d5ceb74c3568e4bab6dcdd0afaa95b" kindref="member">BIT_DMP_RST</ref>;</highlight></codeline>
<codeline lineno="1109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" kindref="member">user_ctrl</ref>,<sp/>1,<sp/>&amp;data))</highlight></codeline>
<codeline lineno="1110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" kindref="member">delay_ms</ref>(50);</highlight></codeline>
<codeline lineno="1112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga02c3e9ddd63128f1c3cf50bf1e9b5fe6" kindref="member">BIT_DMP_EN</ref><sp/>|<sp/><ref refid="group___d_r_i_v_e_r_s_1gae3c4a18accb84992faaf2534a84a147c" kindref="member">BIT_FIFO_EN</ref>;</highlight></codeline>
<codeline lineno="1113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref><sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga7fc9c1dbdcb2ac8cc2a4128a5799482a" kindref="member">INV_XYZ_COMPASS</ref>)</highlight></codeline>
<codeline lineno="1114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1gabcdedbd3098140aa14ad17bcaca8e176" kindref="member">BIT_AUX_IF_EN</ref>;</highlight></codeline>
<codeline lineno="1115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" kindref="member">user_ctrl</ref>,<sp/>1,<sp/>&amp;data))</highlight></codeline>
<codeline lineno="1116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa366c36057f31e6e0d4cf2ca4a1ef52f" kindref="member">int_enable</ref>)</highlight></codeline>
<codeline lineno="1118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga4dc5309ed09fc683d8e5a247feaad69d" kindref="member">BIT_DMP_INT_EN</ref>;</highlight></codeline>
<codeline lineno="1119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga48b47844d4b0570e60aa6806faa59eae" kindref="member">int_enable</ref>,<sp/>1,<sp/>&amp;data))</highlight></codeline>
<codeline lineno="1122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga6a392b7ecae843c734db3d832f11af49" kindref="member">fifo_en</ref>,<sp/>1,<sp/>&amp;data))</highlight></codeline>
<codeline lineno="1125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1126"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gaeae2cc64314ad05f3a93d2358a2369db" kindref="member">BIT_FIFO_RST</ref>;</highlight></codeline>
<codeline lineno="1128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" kindref="member">user_ctrl</ref>,<sp/>1,<sp/>&amp;data))</highlight></codeline>
<codeline lineno="1129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga6d3a962d6435644c7ea68e7d65934636" kindref="member">bypass_mode</ref><sp/>||<sp/>!(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref><sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga7fc9c1dbdcb2ac8cc2a4128a5799482a" kindref="member">INV_XYZ_COMPASS</ref>))</highlight></codeline>
<codeline lineno="1131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gae3c4a18accb84992faaf2534a84a147c" kindref="member">BIT_FIFO_EN</ref>;</highlight></codeline>
<codeline lineno="1132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gae3c4a18accb84992faaf2534a84a147c" kindref="member">BIT_FIFO_EN</ref><sp/>|<sp/><ref refid="group___d_r_i_v_e_r_s_1gabcdedbd3098140aa14ad17bcaca8e176" kindref="member">BIT_AUX_IF_EN</ref>;</highlight></codeline>
<codeline lineno="1134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" kindref="member">user_ctrl</ref>,<sp/>1,<sp/>&amp;data))</highlight></codeline>
<codeline lineno="1135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" kindref="member">delay_ms</ref>(50);</highlight></codeline>
<codeline lineno="1137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa366c36057f31e6e0d4cf2ca4a1ef52f" kindref="member">int_enable</ref>)</highlight></codeline>
<codeline lineno="1138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga45eec9dbc46778c356703dcf90b9e0c3" kindref="member">BIT_DATA_RDY_EN</ref>;</highlight></codeline>
<codeline lineno="1139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga48b47844d4b0570e60aa6806faa59eae" kindref="member">int_enable</ref>,<sp/>1,<sp/>&amp;data))</highlight></codeline>
<codeline lineno="1142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga6a392b7ecae843c734db3d832f11af49" kindref="member">fifo_en</ref>,<sp/>1,<sp/>&amp;<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref>))</highlight></codeline>
<codeline lineno="1144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1145"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1146"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1147"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1148"><highlight class="normal"></highlight></codeline>
<codeline lineno="1154" refid="group___d_r_i_v_e_r_s_1gaf973c32c73ba912ff512aab948fc31ca" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaf973c32c73ba912ff512aab948fc31ca" kindref="member">mpu_get_gyro_fsr</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>*fsr)</highlight></codeline>
<codeline lineno="1155"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1156"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab45a727aeee17380828a3e20ccb375c2" kindref="member">gyro_fsr</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1157"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a5b8251a49db5cb8a676076b0b308ae35" kindref="member">INV_FSR_250DPS</ref>:</highlight></codeline>
<codeline lineno="1158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fsr[0]<sp/>=<sp/>250;</highlight></codeline>
<codeline lineno="1159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1160"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a50901470ff389927fd010081e2b8fd09" kindref="member">INV_FSR_500DPS</ref>:</highlight></codeline>
<codeline lineno="1161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fsr[0]<sp/>=<sp/>500;</highlight></codeline>
<codeline lineno="1162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1163"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90aee922e0daa4fbb404c3db6c49d897a13" kindref="member">INV_FSR_1000DPS</ref>:</highlight></codeline>
<codeline lineno="1164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fsr[0]<sp/>=<sp/>1000;</highlight></codeline>
<codeline lineno="1165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1166"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90ac0c37efc1c8acd6f70c0c5a768e5b8be" kindref="member">INV_FSR_2000DPS</ref>:</highlight></codeline>
<codeline lineno="1167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fsr[0]<sp/>=<sp/>2000;</highlight></codeline>
<codeline lineno="1168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1169"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fsr[0]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1172"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1173"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1174"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1175"><highlight class="normal"></highlight></codeline>
<codeline lineno="1181" refid="group___d_r_i_v_e_r_s_1gad09e6031c8677adc0b8a39b6deea8e27" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gad09e6031c8677adc0b8a39b6deea8e27" kindref="member">mpu_set_gyro_fsr</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>fsr)</highlight></codeline>
<codeline lineno="1182"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1183"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>data;</highlight></codeline>
<codeline lineno="1184"><highlight class="normal"></highlight></codeline>
<codeline lineno="1185"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>))</highlight></codeline>
<codeline lineno="1186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1187"><highlight class="normal"></highlight></codeline>
<codeline lineno="1188"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(fsr)<sp/>{</highlight></codeline>
<codeline lineno="1189"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>250:</highlight></codeline>
<codeline lineno="1190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a5b8251a49db5cb8a676076b0b308ae35" kindref="member">INV_FSR_250DPS</ref><sp/>&lt;&lt;<sp/>3;</highlight></codeline>
<codeline lineno="1191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1192"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>500:</highlight></codeline>
<codeline lineno="1193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a50901470ff389927fd010081e2b8fd09" kindref="member">INV_FSR_500DPS</ref><sp/>&lt;&lt;<sp/>3;</highlight></codeline>
<codeline lineno="1194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1195"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>1000:</highlight></codeline>
<codeline lineno="1196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90aee922e0daa4fbb404c3db6c49d897a13" kindref="member">INV_FSR_1000DPS</ref><sp/>&lt;&lt;<sp/>3;</highlight></codeline>
<codeline lineno="1197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1198"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2000:</highlight></codeline>
<codeline lineno="1199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90ac0c37efc1c8acd6f70c0c5a768e5b8be" kindref="member">INV_FSR_2000DPS</ref><sp/>&lt;&lt;<sp/>3;</highlight></codeline>
<codeline lineno="1200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1201"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1203"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1204"><highlight class="normal"></highlight></codeline>
<codeline lineno="1205"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab45a727aeee17380828a3e20ccb375c2" kindref="member">gyro_fsr</ref><sp/>==<sp/>(data<sp/>&gt;&gt;<sp/>3))</highlight></codeline>
<codeline lineno="1206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1207"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gada0b973f74cc874552f079fd58c435a6" kindref="member">gyro_cfg</ref>,<sp/>1,<sp/>&amp;data))</highlight></codeline>
<codeline lineno="1208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1209"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab45a727aeee17380828a3e20ccb375c2" kindref="member">gyro_fsr</ref><sp/>=<sp/>data<sp/>&gt;&gt;<sp/>3;</highlight></codeline>
<codeline lineno="1210"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1211"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1212"><highlight class="normal"></highlight></codeline>
<codeline lineno="1218" refid="group___d_r_i_v_e_r_s_1gab6087a15ee23db23b6aec41590329a60" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gab6087a15ee23db23b6aec41590329a60" kindref="member">mpu_get_accel_fsr</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*fsr)</highlight></codeline>
<codeline lineno="1219"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1220"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaf66873be1446ed552812e32d40eced61" kindref="member">accel_fsr</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1221"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eae27c6f69463dab7de81fac0c51ff8aa7" kindref="member">INV_FSR_2G</ref>:</highlight></codeline>
<codeline lineno="1222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fsr[0]<sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="1223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1224"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eaa91e3a89d0bbd01149fe71148595be6d" kindref="member">INV_FSR_4G</ref>:</highlight></codeline>
<codeline lineno="1225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fsr[0]<sp/>=<sp/>4;</highlight></codeline>
<codeline lineno="1226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1227"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea0a40371bdda397d234c53d0ee2f3be8b" kindref="member">INV_FSR_8G</ref>:</highlight></codeline>
<codeline lineno="1228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fsr[0]<sp/>=<sp/>8;</highlight></codeline>
<codeline lineno="1229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1230"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea6712e8563c97c11b458ef721d4f5f9d5" kindref="member">INV_FSR_16G</ref>:</highlight></codeline>
<codeline lineno="1231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fsr[0]<sp/>=<sp/>16;</highlight></codeline>
<codeline lineno="1232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1233"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1235"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1236"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab72e3cead391dee41f28e041282d743f" kindref="member">accel_half</ref>)</highlight></codeline>
<codeline lineno="1237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fsr[0]<sp/>&lt;&lt;=<sp/>1;</highlight></codeline>
<codeline lineno="1238"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1239"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1240"><highlight class="normal"></highlight></codeline>
<codeline lineno="1246" refid="group___d_r_i_v_e_r_s_1ga2713a96af104cfb2ae8e0ed4c3718119" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga2713a96af104cfb2ae8e0ed4c3718119" kindref="member">mpu_set_accel_fsr</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>fsr)</highlight></codeline>
<codeline lineno="1247"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1248"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>data;</highlight></codeline>
<codeline lineno="1249"><highlight class="normal"></highlight></codeline>
<codeline lineno="1250"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>))</highlight></codeline>
<codeline lineno="1251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1252"><highlight class="normal"></highlight></codeline>
<codeline lineno="1253"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(fsr)<sp/>{</highlight></codeline>
<codeline lineno="1254"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2:</highlight></codeline>
<codeline lineno="1255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eae27c6f69463dab7de81fac0c51ff8aa7" kindref="member">INV_FSR_2G</ref><sp/>&lt;&lt;<sp/>3;</highlight></codeline>
<codeline lineno="1256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1257"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>4:</highlight></codeline>
<codeline lineno="1258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eaa91e3a89d0bbd01149fe71148595be6d" kindref="member">INV_FSR_4G</ref><sp/>&lt;&lt;<sp/>3;</highlight></codeline>
<codeline lineno="1259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1260"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>8:</highlight></codeline>
<codeline lineno="1261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea0a40371bdda397d234c53d0ee2f3be8b" kindref="member">INV_FSR_8G</ref><sp/>&lt;&lt;<sp/>3;</highlight></codeline>
<codeline lineno="1262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1263"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>16:</highlight></codeline>
<codeline lineno="1264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea6712e8563c97c11b458ef721d4f5f9d5" kindref="member">INV_FSR_16G</ref><sp/>&lt;&lt;<sp/>3;</highlight></codeline>
<codeline lineno="1265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1266"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1268"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1269"><highlight class="normal"></highlight></codeline>
<codeline lineno="1270"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaf66873be1446ed552812e32d40eced61" kindref="member">accel_fsr</ref><sp/>==<sp/>(data<sp/>&gt;&gt;<sp/>3))</highlight></codeline>
<codeline lineno="1271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1272"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gae93a446c54cc00bc7f11209d7af0025e" kindref="member">accel_cfg</ref>,<sp/>1,<sp/>&amp;data))</highlight></codeline>
<codeline lineno="1273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1274"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaf66873be1446ed552812e32d40eced61" kindref="member">accel_fsr</ref><sp/>=<sp/>data<sp/>&gt;&gt;<sp/>3;</highlight></codeline>
<codeline lineno="1275"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1276"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1277"><highlight class="normal"></highlight></codeline>
<codeline lineno="1283" refid="group___d_r_i_v_e_r_s_1gaa95c7e216dcb2d888e9796001ca555f8" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaa95c7e216dcb2d888e9796001ca555f8" kindref="member">mpu_get_lpf</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>*lpf)</highlight></codeline>
<codeline lineno="1284"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1285"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga16ec8ca8298f62ac01419775377270fb" kindref="member">lpf</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1286"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9ab58e52e0b6be4cbaf0c7f32705a9fcec" kindref="member">INV_FILTER_188HZ</ref>:</highlight></codeline>
<codeline lineno="1287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lpf[0]<sp/>=<sp/>188;</highlight></codeline>
<codeline lineno="1288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1289"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a0f288da0c97b325a6cb57f1223f0cf98" kindref="member">INV_FILTER_98HZ</ref>:</highlight></codeline>
<codeline lineno="1290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lpf[0]<sp/>=<sp/>98;</highlight></codeline>
<codeline lineno="1291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1292"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a995b18a52a5bd919aa9c1411a2292110" kindref="member">INV_FILTER_42HZ</ref>:</highlight></codeline>
<codeline lineno="1293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lpf[0]<sp/>=<sp/>42;</highlight></codeline>
<codeline lineno="1294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1295"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9aebecb86604e475ed8e2cb68340010ff1" kindref="member">INV_FILTER_20HZ</ref>:</highlight></codeline>
<codeline lineno="1296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lpf[0]<sp/>=<sp/>20;</highlight></codeline>
<codeline lineno="1297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1298"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a327619f406c6b2f6a221793881013508" kindref="member">INV_FILTER_10HZ</ref>:</highlight></codeline>
<codeline lineno="1299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lpf[0]<sp/>=<sp/>10;</highlight></codeline>
<codeline lineno="1300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1301"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9abdaaf85666fd6a490ee01dcd8a315678" kindref="member">INV_FILTER_5HZ</ref>:</highlight></codeline>
<codeline lineno="1302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lpf[0]<sp/>=<sp/>5;</highlight></codeline>
<codeline lineno="1303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1304"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a9f0263fbbdccd3c5a18fcb65be278d24" kindref="member">INV_FILTER_256HZ_NOLPF2</ref>:</highlight></codeline>
<codeline lineno="1305"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a76de97a6c2f8eb3c5d1a73d717513f5d" kindref="member">INV_FILTER_2100HZ_NOLPF</ref>:</highlight></codeline>
<codeline lineno="1306"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lpf[0]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1309"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1310"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1311"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1312"><highlight class="normal"></highlight></codeline>
<codeline lineno="1319" refid="group___d_r_i_v_e_r_s_1ga5661a9dee25152166769910767a2a93d" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga5661a9dee25152166769910767a2a93d" kindref="member">mpu_set_lpf</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>lpf)</highlight></codeline>
<codeline lineno="1320"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1321"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>data;</highlight></codeline>
<codeline lineno="1322"><highlight class="normal"></highlight></codeline>
<codeline lineno="1323"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>))</highlight></codeline>
<codeline lineno="1324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1325"><highlight class="normal"></highlight></codeline>
<codeline lineno="1326"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpf<sp/>&gt;=<sp/>188)</highlight></codeline>
<codeline lineno="1327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9ab58e52e0b6be4cbaf0c7f32705a9fcec" kindref="member">INV_FILTER_188HZ</ref>;</highlight></codeline>
<codeline lineno="1328"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpf<sp/>&gt;=<sp/>98)</highlight></codeline>
<codeline lineno="1329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a0f288da0c97b325a6cb57f1223f0cf98" kindref="member">INV_FILTER_98HZ</ref>;</highlight></codeline>
<codeline lineno="1330"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpf<sp/>&gt;=<sp/>42)</highlight></codeline>
<codeline lineno="1331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a995b18a52a5bd919aa9c1411a2292110" kindref="member">INV_FILTER_42HZ</ref>;</highlight></codeline>
<codeline lineno="1332"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpf<sp/>&gt;=<sp/>20)</highlight></codeline>
<codeline lineno="1333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9aebecb86604e475ed8e2cb68340010ff1" kindref="member">INV_FILTER_20HZ</ref>;</highlight></codeline>
<codeline lineno="1334"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpf<sp/>&gt;=<sp/>10)</highlight></codeline>
<codeline lineno="1335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a327619f406c6b2f6a221793881013508" kindref="member">INV_FILTER_10HZ</ref>;</highlight></codeline>
<codeline lineno="1336"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9abdaaf85666fd6a490ee01dcd8a315678" kindref="member">INV_FILTER_5HZ</ref>;</highlight></codeline>
<codeline lineno="1338"><highlight class="normal"></highlight></codeline>
<codeline lineno="1339"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga16ec8ca8298f62ac01419775377270fb" kindref="member">lpf</ref><sp/>==<sp/>data)</highlight></codeline>
<codeline lineno="1340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1341"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga22eeac0bd77e7d99b3e15dda52f1bd08" kindref="member">lpf</ref>,<sp/>1,<sp/>&amp;data))</highlight></codeline>
<codeline lineno="1342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1343"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga16ec8ca8298f62ac01419775377270fb" kindref="member">lpf</ref><sp/>=<sp/>data;</highlight></codeline>
<codeline lineno="1344"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1345"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1346"><highlight class="normal"></highlight></codeline>
<codeline lineno="1352" refid="group___d_r_i_v_e_r_s_1ga2487dd551b701c1c7ed4d6335f02b2f1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga2487dd551b701c1c7ed4d6335f02b2f1" kindref="member">mpu_get_sample_rate</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>*rate)</highlight></codeline>
<codeline lineno="1353"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1354"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" kindref="member">dmp_on</ref>)</highlight></codeline>
<codeline lineno="1355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1356"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rate[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga2660470fcf7b53e2e832a397cbe6c354" kindref="member">sample_rate</ref>;</highlight></codeline>
<codeline lineno="1358"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1359"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1360"><highlight class="normal"></highlight></codeline>
<codeline lineno="1367" refid="group___d_r_i_v_e_r_s_1ga0144d666a67a82888b8580002afe8b55" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga0144d666a67a82888b8580002afe8b55" kindref="member">mpu_set_sample_rate</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>rate)</highlight></codeline>
<codeline lineno="1368"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1369"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>data;</highlight></codeline>
<codeline lineno="1370"><highlight class="normal"></highlight></codeline>
<codeline lineno="1371"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>))</highlight></codeline>
<codeline lineno="1372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1373"><highlight class="normal"></highlight></codeline>
<codeline lineno="1374"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" kindref="member">dmp_on</ref>)</highlight></codeline>
<codeline lineno="1375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1376"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga33e138d8a49744eb9b4ea0e9086cef1c" kindref="member">lp_accel_mode</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rate<sp/>&amp;&amp;<sp/>(rate<sp/>&lt;=<sp/>40))<sp/>{</highlight></codeline>
<codeline lineno="1379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Just<sp/>stay<sp/>in<sp/>low-power<sp/>accel<sp/>mode.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3a4fea75686ab7d2e68634e81ccac04c" kindref="member">mpu_lp_accel_mode</ref>(rate);</highlight></codeline>
<codeline lineno="1381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Requested<sp/>rate<sp/>exceeds<sp/>the<sp/>allowed<sp/>frequencies<sp/>in<sp/>LP<sp/>accel<sp/>mode,</highlight></codeline>
<codeline lineno="1384"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>switch<sp/>back<sp/>to<sp/>full-power<sp/>mode.</highlight></codeline>
<codeline lineno="1385"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3a4fea75686ab7d2e68634e81ccac04c" kindref="member">mpu_lp_accel_mode</ref>(0);</highlight></codeline>
<codeline lineno="1387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rate<sp/>&lt;<sp/>4)</highlight></codeline>
<codeline lineno="1389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rate<sp/>=<sp/>4;</highlight></codeline>
<codeline lineno="1390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rate<sp/>&gt;<sp/>1000)</highlight></codeline>
<codeline lineno="1391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rate<sp/>=<sp/>1000;</highlight></codeline>
<codeline lineno="1392"><highlight class="normal"></highlight></codeline>
<codeline lineno="1393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>1000<sp/>/<sp/>rate<sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="1394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga27dd9db31f16ca170520b3009255e6d0" kindref="member">rate_div</ref>,<sp/>1,<sp/>&amp;data))</highlight></codeline>
<codeline lineno="1395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1396"><highlight class="normal"></highlight></codeline>
<codeline lineno="1397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga2660470fcf7b53e2e832a397cbe6c354" kindref="member">sample_rate</ref><sp/>=<sp/>1000<sp/>/<sp/>(1<sp/>+<sp/>data);</highlight></codeline>
<codeline lineno="1398"><highlight class="normal"></highlight></codeline>
<codeline lineno="1399"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga78da3828de0ef9d080c4d03e7bc45e7b" kindref="member">mpu_set_compass_sample_rate</ref>(<ref refid="group___d_r_i_v_e_r_s_1gac6afabdc09a49a433ee19d8a9486056d" kindref="member">min</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_sample_rate,<sp/>MAX_COMPASS_SAMPLE_RATE));</highlight></codeline>
<codeline lineno="1401"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1402"><highlight class="normal"></highlight></codeline>
<codeline lineno="1403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Automatically<sp/>set<sp/>LPF<sp/>to<sp/>1/2<sp/>sampling<sp/>rate.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga5661a9dee25152166769910767a2a93d" kindref="member">mpu_set_lpf</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga2660470fcf7b53e2e832a397cbe6c354" kindref="member">sample_rate</ref><sp/>&gt;&gt;<sp/>1);</highlight></codeline>
<codeline lineno="1405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1406"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1407"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1408"><highlight class="normal"></highlight></codeline>
<codeline lineno="1414" refid="group___d_r_i_v_e_r_s_1gab5a45cd7783f6937788c0decb0b18b16" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gab5a45cd7783f6937788c0decb0b18b16" kindref="member">mpu_get_compass_sample_rate</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>*rate)</highlight></codeline>
<codeline lineno="1415"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1416"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1417"><highlight class="normal"><sp/><sp/><sp/><sp/>rate[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_sample_rate;</highlight></codeline>
<codeline lineno="1418"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1419"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1420"><highlight class="normal"><sp/><sp/><sp/><sp/>rate[0]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1421"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1422"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1423"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1424"><highlight class="normal"></highlight></codeline>
<codeline lineno="1436" refid="group___d_r_i_v_e_r_s_1ga78da3828de0ef9d080c4d03e7bc45e7b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga78da3828de0ef9d080c4d03e7bc45e7b" kindref="member">mpu_set_compass_sample_rate</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>rate)</highlight></codeline>
<codeline lineno="1437"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1438"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1439"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>div;</highlight></codeline>
<codeline lineno="1440"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!rate<sp/>||<sp/>rate<sp/>&gt;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga2660470fcf7b53e2e832a397cbe6c354" kindref="member">sample_rate</ref><sp/>||<sp/>rate<sp/>&gt;<sp/>MAX_COMPASS_SAMPLE_RATE)</highlight></codeline>
<codeline lineno="1441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1442"><highlight class="normal"></highlight></codeline>
<codeline lineno="1443"><highlight class="normal"><sp/><sp/><sp/><sp/>div<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga2660470fcf7b53e2e832a397cbe6c354" kindref="member">sample_rate</ref><sp/>/<sp/>rate<sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="1444"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;s4_ctrl,<sp/>1,<sp/>&amp;div))</highlight></codeline>
<codeline lineno="1445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1446"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_sample_rate<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga2660470fcf7b53e2e832a397cbe6c354" kindref="member">sample_rate</ref><sp/>/<sp/>(div<sp/>+<sp/>1);</highlight></codeline>
<codeline lineno="1447"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1448"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1449"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1450"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1451"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1452"><highlight class="normal"></highlight></codeline>
<codeline lineno="1458" refid="group___d_r_i_v_e_r_s_1ga023c0cc94aa8f162dc33b15048a49421" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga023c0cc94aa8f162dc33b15048a49421" kindref="member">mpu_get_gyro_sens</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*sens)</highlight></codeline>
<codeline lineno="1459"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1460"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab45a727aeee17380828a3e20ccb375c2" kindref="member">gyro_fsr</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1461"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a5b8251a49db5cb8a676076b0b308ae35" kindref="member">INV_FSR_250DPS</ref>:</highlight></codeline>
<codeline lineno="1462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sens[0]<sp/>=<sp/>131.f;</highlight></codeline>
<codeline lineno="1463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1464"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90a50901470ff389927fd010081e2b8fd09" kindref="member">INV_FSR_500DPS</ref>:</highlight></codeline>
<codeline lineno="1465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sens[0]<sp/>=<sp/>65.5f;</highlight></codeline>
<codeline lineno="1466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1467"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90aee922e0daa4fbb404c3db6c49d897a13" kindref="member">INV_FSR_1000DPS</ref>:</highlight></codeline>
<codeline lineno="1468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sens[0]<sp/>=<sp/>32.8f;</highlight></codeline>
<codeline lineno="1469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1470"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gga83acdc0eb37e8bfe0c2ae2348ded0a90ac0c37efc1c8acd6f70c0c5a768e5b8be" kindref="member">INV_FSR_2000DPS</ref>:</highlight></codeline>
<codeline lineno="1471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sens[0]<sp/>=<sp/>16.4f;</highlight></codeline>
<codeline lineno="1472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1473"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1475"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1476"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1477"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1478"><highlight class="normal"></highlight></codeline>
<codeline lineno="1484" refid="group___d_r_i_v_e_r_s_1ga620408949052b96e856cad920f856583" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga620408949052b96e856cad920f856583" kindref="member">mpu_get_accel_sens</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>*sens)</highlight></codeline>
<codeline lineno="1485"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1486"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaf66873be1446ed552812e32d40eced61" kindref="member">accel_fsr</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1487"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eae27c6f69463dab7de81fac0c51ff8aa7" kindref="member">INV_FSR_2G</ref>:</highlight></codeline>
<codeline lineno="1488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sens[0]<sp/>=<sp/>16384;</highlight></codeline>
<codeline lineno="1489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1490"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81eaa91e3a89d0bbd01149fe71148595be6d" kindref="member">INV_FSR_4G</ref>:</highlight></codeline>
<codeline lineno="1491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sens[0]<sp/>=<sp/>8092;</highlight></codeline>
<codeline lineno="1492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1493"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea0a40371bdda397d234c53d0ee2f3be8b" kindref="member">INV_FSR_8G</ref>:</highlight></codeline>
<codeline lineno="1494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sens[0]<sp/>=<sp/>4096;</highlight></codeline>
<codeline lineno="1495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1496"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ggaec8501b935143099e5f729dee221a81ea6712e8563c97c11b458ef721d4f5f9d5" kindref="member">INV_FSR_16G</ref>:</highlight></codeline>
<codeline lineno="1497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sens[0]<sp/>=<sp/>2048;</highlight></codeline>
<codeline lineno="1498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1499"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1501"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1502"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab72e3cead391dee41f28e041282d743f" kindref="member">accel_half</ref>)</highlight></codeline>
<codeline lineno="1503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sens[0]<sp/>&gt;&gt;=<sp/>1;</highlight></codeline>
<codeline lineno="1504"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1505"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1506"><highlight class="normal"></highlight></codeline>
<codeline lineno="1516" refid="group___d_r_i_v_e_r_s_1ga093f11eb10b2639a4b9fe344ea348c54" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga093f11eb10b2639a4b9fe344ea348c54" kindref="member">mpu_get_fifo_config</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*sensors)</highlight></codeline>
<codeline lineno="1517"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1518"><highlight class="normal"><sp/><sp/><sp/><sp/>sensors[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref>;</highlight></codeline>
<codeline lineno="1519"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1520"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1521"><highlight class="normal"></highlight></codeline>
<codeline lineno="1531" refid="group___d_r_i_v_e_r_s_1gababbdda287e1f19323489f90a0889dd7" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gababbdda287e1f19323489f90a0889dd7" kindref="member">mpu_configure_fifo</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>sensors)</highlight></codeline>
<codeline lineno="1532"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1533"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>prev;</highlight></codeline>
<codeline lineno="1534"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>result<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1535"><highlight class="normal"></highlight></codeline>
<codeline lineno="1536"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Compass<sp/>data<sp/>isn&apos;t<sp/>going<sp/>into<sp/>the<sp/>FIFO.<sp/>Stop<sp/>trying.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1537"><highlight class="normal"><sp/><sp/><sp/><sp/>sensors<sp/>&amp;=<sp/>~INV_XYZ_COMPASS;</highlight></codeline>
<codeline lineno="1538"><highlight class="normal"></highlight></codeline>
<codeline lineno="1539"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" kindref="member">dmp_on</ref>)</highlight></codeline>
<codeline lineno="1540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1541"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>))</highlight></codeline>
<codeline lineno="1543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prev<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref>;</highlight></codeline>
<codeline lineno="1545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref><sp/>=<sp/>sensors<sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>;</highlight></codeline>
<codeline lineno="1546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref><sp/>!=<sp/>sensors)</highlight></codeline>
<codeline lineno="1547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>You&apos;re<sp/>not<sp/>getting<sp/>what<sp/>you<sp/>asked<sp/>for.<sp/>Some<sp/>sensors<sp/>are</highlight></codeline>
<codeline lineno="1548"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>asleep.</highlight></codeline>
<codeline lineno="1549"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="1551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sensors<sp/>||<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga33e138d8a49744eb9b4ea0e9086cef1c" kindref="member">lp_accel_mode</ref>)</highlight></codeline>
<codeline lineno="1554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gafd5ebff6b0179e1dce0b68c2272cae07" kindref="member">set_int_enable</ref>(1);</highlight></codeline>
<codeline lineno="1555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gafd5ebff6b0179e1dce0b68c2272cae07" kindref="member">set_int_enable</ref>(0);</highlight></codeline>
<codeline lineno="1557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sensors)<sp/>{</highlight></codeline>
<codeline lineno="1558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaf23e9f57c0059be6ec57862f0584de10" kindref="member">mpu_reset_fifo</ref>())<sp/>{</highlight></codeline>
<codeline lineno="1559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref><sp/>=<sp/>prev;</highlight></codeline>
<codeline lineno="1560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1563"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1564"><highlight class="normal"></highlight></codeline>
<codeline lineno="1565"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="1566"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1567"><highlight class="normal"></highlight></codeline>
<codeline lineno="1573" refid="group___d_r_i_v_e_r_s_1gaec8fa7a067988d174516bb735a4a0bc9" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaec8fa7a067988d174516bb735a4a0bc9" kindref="member">mpu_get_power_state</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*power_on)</highlight></codeline>
<codeline lineno="1574"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1575"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>)</highlight></codeline>
<codeline lineno="1576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>power_on[0]<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="1577"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>power_on[0]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1579"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1580"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1581"><highlight class="normal"></highlight></codeline>
<codeline lineno="1592" refid="group___d_r_i_v_e_r_s_1ga6e77e7cc1cf6be5e8fdf617c5b4586d1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga6e77e7cc1cf6be5e8fdf617c5b4586d1" kindref="member">mpu_set_sensors</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>sensors)</highlight></codeline>
<codeline lineno="1593"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1594"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>data;</highlight></codeline>
<codeline lineno="1595"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1596"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>user_ctrl;</highlight></codeline>
<codeline lineno="1597"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1598"><highlight class="normal"></highlight></codeline>
<codeline lineno="1599"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sensors<sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3fdc30f9c0a26c2c4e2bb88921f91629" kindref="member">INV_XYZ_GYRO</ref>)</highlight></codeline>
<codeline lineno="1600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga75570f009627c6f4ddfb2d936d81e207a01b240917a78674d3e387110a6a8f94c" kindref="member">INV_CLK_PLL</ref>;</highlight></codeline>
<codeline lineno="1601"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sensors)</highlight></codeline>
<codeline lineno="1602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1603"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1fed8bd436e9b7dfccb1cae99ca89103" kindref="member">BIT_SLEEP</ref>;</highlight></codeline>
<codeline lineno="1605"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaa01fb0872030e8e2932f8d1d257ea86a" kindref="member">pwr_mgmt_1</ref>,<sp/>1,<sp/>&amp;data))<sp/>{</highlight></codeline>
<codeline lineno="1606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1608"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1609"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab7bd5165d6e62cb0d814cf3401958445" kindref="member">clk_src</ref><sp/>=<sp/>data<sp/>&amp;<sp/>~BIT_SLEEP;</highlight></codeline>
<codeline lineno="1610"><highlight class="normal"></highlight></codeline>
<codeline lineno="1611"><highlight class="normal"><sp/><sp/><sp/><sp/>data<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1612"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(sensors<sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1gabf02bf28541421d59f8be764f2b95407" kindref="member">INV_X_GYRO</ref>))</highlight></codeline>
<codeline lineno="1613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga82256fedeffe5b2443ab3ae34cf032d9" kindref="member">BIT_STBY_XG</ref>;</highlight></codeline>
<codeline lineno="1614"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(sensors<sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1gacdd8ff833a34dba08ca2aa145eb92b44" kindref="member">INV_Y_GYRO</ref>))</highlight></codeline>
<codeline lineno="1615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1gabf1c0a844906a5e887a659971a4af417" kindref="member">BIT_STBY_YG</ref>;</highlight></codeline>
<codeline lineno="1616"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(sensors<sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga50205b5cc6089b33b2561c854eb8b0fd" kindref="member">INV_Z_GYRO</ref>))</highlight></codeline>
<codeline lineno="1617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga30967a4efdf3c3f1e39814e72a4168b0" kindref="member">BIT_STBY_ZG</ref>;</highlight></codeline>
<codeline lineno="1618"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(sensors<sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1gaa03f025a17ed491e70b88274e89c75c5" kindref="member">INV_XYZ_ACCEL</ref>))</highlight></codeline>
<codeline lineno="1619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga04a57159e34387dafe9b86b171c4654c" kindref="member">BIT_STBY_XYZA</ref>;</highlight></codeline>
<codeline lineno="1620"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga3e378b0c77e9529ee93ac6eba11e1031" kindref="member">pwr_mgmt_2</ref>,<sp/>1,<sp/>&amp;data))<sp/>{</highlight></codeline>
<codeline lineno="1621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1623"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1624"><highlight class="normal"></highlight></codeline>
<codeline lineno="1625"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sensors<sp/>&amp;&amp;<sp/>(sensors<sp/>!=<sp/><ref refid="group___d_r_i_v_e_r_s_1gaa03f025a17ed491e70b88274e89c75c5" kindref="member">INV_XYZ_ACCEL</ref>))</highlight></codeline>
<codeline lineno="1626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Latched<sp/>interrupts<sp/>only<sp/>used<sp/>in<sp/>LP<sp/>accel<sp/>mode.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga653cb855300bff9285ce4b8dca6a503b" kindref="member">mpu_set_int_latched</ref>(0);</highlight></codeline>
<codeline lineno="1628"><highlight class="normal"></highlight></codeline>
<codeline lineno="1629"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1630"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_BYPASS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1631"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sensors<sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga7fc9c1dbdcb2ac8cc2a4128a5799482a" kindref="member">INV_XYZ_COMPASS</ref>)</highlight></codeline>
<codeline lineno="1632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga36f70f38371b48d81094d3b061233e15" kindref="member">mpu_set_bypass</ref>(1);</highlight></codeline>
<codeline lineno="1633"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga36f70f38371b48d81094d3b061233e15" kindref="member">mpu_set_bypass</ref>(0);</highlight></codeline>
<codeline lineno="1635"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1636"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" kindref="member">user_ctrl</ref>,<sp/>1,<sp/>&amp;user_ctrl))</highlight></codeline>
<codeline lineno="1637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1638"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Handle<sp/>AKM<sp/>power<sp/>management.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1639"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sensors<sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga7fc9c1dbdcb2ac8cc2a4128a5799482a" kindref="member">INV_XYZ_COMPASS</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>AKM_SINGLE_MEASUREMENT;</highlight></codeline>
<codeline lineno="1641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>user_ctrl<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1gabcdedbd3098140aa14ad17bcaca8e176" kindref="member">BIT_AUX_IF_EN</ref>;</highlight></codeline>
<codeline lineno="1642"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>AKM_POWER_DOWN;</highlight></codeline>
<codeline lineno="1644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>user_ctrl<sp/>&amp;=<sp/>~BIT_AUX_IF_EN;</highlight></codeline>
<codeline lineno="1645"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1646"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" kindref="member">dmp_on</ref>)</highlight></codeline>
<codeline lineno="1647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>user_ctrl<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga02c3e9ddd63128f1c3cf50bf1e9b5fe6" kindref="member">BIT_DMP_EN</ref>;</highlight></codeline>
<codeline lineno="1648"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>user_ctrl<sp/>&amp;=<sp/>~BIT_DMP_EN;</highlight></codeline>
<codeline lineno="1650"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;s1_do,<sp/>1,<sp/>&amp;data))</highlight></codeline>
<codeline lineno="1651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1652"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enable/disable<sp/>I2C<sp/>master<sp/>mode.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1653"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" kindref="member">user_ctrl</ref>,<sp/>1,<sp/>&amp;user_ctrl))</highlight></codeline>
<codeline lineno="1654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1655"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1656"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1657"><highlight class="normal"></highlight></codeline>
<codeline lineno="1658"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref><sp/>=<sp/>sensors;</highlight></codeline>
<codeline lineno="1659"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga33e138d8a49744eb9b4ea0e9086cef1c" kindref="member">lp_accel_mode</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1660"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" kindref="member">delay_ms</ref>(50);</highlight></codeline>
<codeline lineno="1661"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1662"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1663"><highlight class="normal"></highlight></codeline>
<codeline lineno="1669" refid="group___d_r_i_v_e_r_s_1ga0afd02d8c76d3278b488ef7038c26e3e" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga0afd02d8c76d3278b488ef7038c26e3e" kindref="member">mpu_get_int_status</ref>(</highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>*status)</highlight></codeline>
<codeline lineno="1670"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1671"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tmp[2];</highlight></codeline>
<codeline lineno="1672"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>)</highlight></codeline>
<codeline lineno="1673"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1674"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaea6ad456241786750b3f211bc92032eb" kindref="member">dmp_int_status</ref>,<sp/>2,<sp/>tmp))</highlight></codeline>
<codeline lineno="1675"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1676"><highlight class="normal"><sp/><sp/><sp/><sp/>status[0]<sp/>=<sp/>(tmp[0]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>tmp[1];</highlight></codeline>
<codeline lineno="1677"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1678"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1679"><highlight class="normal"></highlight></codeline>
<codeline lineno="1698" refid="group___d_r_i_v_e_r_s_1ga2da20453aafbbba4a0f6fb9fbdd25572" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga2da20453aafbbba4a0f6fb9fbdd25572" kindref="member">mpu_read_fifo</ref>(</highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>*gyro,<sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>*accel,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*timestamp,</highlight></codeline>
<codeline lineno="1699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*sensors,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*more)</highlight></codeline>
<codeline lineno="1700"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1701"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Assumes<sp/>maximum<sp/>packet<sp/>size<sp/>is<sp/>gyro<sp/>(6)<sp/>+<sp/>accel<sp/>(6).<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1702"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>data[<ref refid="group___d_r_i_v_e_r_s_1ga973c680573b37fc359fc68d0707da355" kindref="member">MAX_PACKET_LENGTH</ref>];</highlight></codeline>
<codeline lineno="1703"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>packet_size<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1704"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>fifo_count,<sp/>index<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1705"><highlight class="normal"></highlight></codeline>
<codeline lineno="1706"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" kindref="member">dmp_on</ref>)</highlight></codeline>
<codeline lineno="1707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1708"><highlight class="normal"></highlight></codeline>
<codeline lineno="1709"><highlight class="normal"><sp/><sp/><sp/><sp/>sensors[0]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1710"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>)</highlight></codeline>
<codeline lineno="1711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1712"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref>)</highlight></codeline>
<codeline lineno="1713"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1714"><highlight class="normal"></highlight></codeline>
<codeline lineno="1715"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref><sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1gabf02bf28541421d59f8be764f2b95407" kindref="member">INV_X_GYRO</ref>)</highlight></codeline>
<codeline lineno="1716"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet_size<sp/>+=<sp/>2;</highlight></codeline>
<codeline lineno="1717"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref><sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1gacdd8ff833a34dba08ca2aa145eb92b44" kindref="member">INV_Y_GYRO</ref>)</highlight></codeline>
<codeline lineno="1718"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet_size<sp/>+=<sp/>2;</highlight></codeline>
<codeline lineno="1719"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref><sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga50205b5cc6089b33b2561c854eb8b0fd" kindref="member">INV_Z_GYRO</ref>)</highlight></codeline>
<codeline lineno="1720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet_size<sp/>+=<sp/>2;</highlight></codeline>
<codeline lineno="1721"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref><sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1gaa03f025a17ed491e70b88274e89c75c5" kindref="member">INV_XYZ_ACCEL</ref>)</highlight></codeline>
<codeline lineno="1722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet_size<sp/>+=<sp/>6;</highlight></codeline>
<codeline lineno="1723"><highlight class="normal"></highlight></codeline>
<codeline lineno="1724"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gab7503974d62cf9c2d688579fcd1abd48" kindref="member">fifo_count_h</ref>,<sp/>2,<sp/>data))</highlight></codeline>
<codeline lineno="1725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1726"><highlight class="normal"><sp/><sp/><sp/><sp/>fifo_count<sp/>=<sp/>(data[0]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>data[1];</highlight></codeline>
<codeline lineno="1727"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fifo_count<sp/>&lt;<sp/>packet_size)</highlight></codeline>
<codeline lineno="1728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1729"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>log_i(&quot;FIFO<sp/>count:<sp/>%hd\n&quot;,<sp/>fifo_count);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1730"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fifo_count<sp/>&gt;<sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga5f77e9f55285abb4d214b80281f69c1f" kindref="member">max_fifo</ref><sp/>&gt;&gt;<sp/>1))<sp/>{</highlight></codeline>
<codeline lineno="1731"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>FIFO<sp/>is<sp/>50%<sp/>full,<sp/>better<sp/>check<sp/>overflow<sp/>bit.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1732"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga837724080c34ff5a190751427febaf91" kindref="member">int_status</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="1733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1734"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(data[0]<sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1gafb9b49ce5dd973b3c29ae72680924fa7" kindref="member">BIT_FIFO_OVERFLOW</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gaf23e9f57c0059be6ec57862f0584de10" kindref="member">mpu_reset_fifo</ref>();</highlight></codeline>
<codeline lineno="1736"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-2;</highlight></codeline>
<codeline lineno="1737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1738"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1739"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3e6b6bc6d1cd2956353a31bfadd3c332" kindref="member">get_ms</ref>((</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal">*)timestamp);</highlight></codeline>
<codeline lineno="1740"><highlight class="normal"></highlight></codeline>
<codeline lineno="1741"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb6763dc5f368ea01ef7c733cea9dab4" kindref="member">fifo_r_w</ref>,<sp/>packet_size,<sp/>data))</highlight></codeline>
<codeline lineno="1742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1743"><highlight class="normal"><sp/><sp/><sp/><sp/>more[0]<sp/>=<sp/>fifo_count<sp/>/<sp/>packet_size<sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="1744"><highlight class="normal"><sp/><sp/><sp/><sp/>sensors[0]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1745"><highlight class="normal"></highlight></codeline>
<codeline lineno="1746"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((index<sp/>!=<sp/>packet_size)<sp/>&amp;&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref><sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1gaa03f025a17ed491e70b88274e89c75c5" kindref="member">INV_XYZ_ACCEL</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel[0]<sp/>=<sp/>(data[index+0]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>data[index+1];</highlight></codeline>
<codeline lineno="1748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel[1]<sp/>=<sp/>(data[index+2]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>data[index+3];</highlight></codeline>
<codeline lineno="1749"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel[2]<sp/>=<sp/>(data[index+4]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>data[index+5];</highlight></codeline>
<codeline lineno="1750"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sensors[0]<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1gaa03f025a17ed491e70b88274e89c75c5" kindref="member">INV_XYZ_ACCEL</ref>;</highlight></codeline>
<codeline lineno="1751"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>index<sp/>+=<sp/>6;</highlight></codeline>
<codeline lineno="1752"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1753"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((index<sp/>!=<sp/>packet_size)<sp/>&amp;&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref><sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1gabf02bf28541421d59f8be764f2b95407" kindref="member">INV_X_GYRO</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>gyro[0]<sp/>=<sp/>(data[index+0]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>data[index+1];</highlight></codeline>
<codeline lineno="1755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sensors[0]<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1gabf02bf28541421d59f8be764f2b95407" kindref="member">INV_X_GYRO</ref>;</highlight></codeline>
<codeline lineno="1756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>index<sp/>+=<sp/>2;</highlight></codeline>
<codeline lineno="1757"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1758"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((index<sp/>!=<sp/>packet_size)<sp/>&amp;&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref><sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1gacdd8ff833a34dba08ca2aa145eb92b44" kindref="member">INV_Y_GYRO</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>gyro[1]<sp/>=<sp/>(data[index+0]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>data[index+1];</highlight></codeline>
<codeline lineno="1760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sensors[0]<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1gacdd8ff833a34dba08ca2aa145eb92b44" kindref="member">INV_Y_GYRO</ref>;</highlight></codeline>
<codeline lineno="1761"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>index<sp/>+=<sp/>2;</highlight></codeline>
<codeline lineno="1762"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1763"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((index<sp/>!=<sp/>packet_size)<sp/>&amp;&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref><sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga50205b5cc6089b33b2561c854eb8b0fd" kindref="member">INV_Z_GYRO</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1764"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>gyro[2]<sp/>=<sp/>(data[index+0]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>data[index+1];</highlight></codeline>
<codeline lineno="1765"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sensors[0]<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga50205b5cc6089b33b2561c854eb8b0fd" kindref="member">INV_Z_GYRO</ref>;</highlight></codeline>
<codeline lineno="1766"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>index<sp/>+=<sp/>2;</highlight></codeline>
<codeline lineno="1767"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1768"><highlight class="normal"></highlight></codeline>
<codeline lineno="1769"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1770"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1771"><highlight class="normal"></highlight></codeline>
<codeline lineno="1779" refid="group___d_r_i_v_e_r_s_1ga13593044949b460e9f571eb57e9a0788" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga13593044949b460e9f571eb57e9a0788" kindref="member">mpu_read_fifo_stream</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>length,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*data,</highlight></codeline>
<codeline lineno="1780"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*more)</highlight></codeline>
<codeline lineno="1781"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1782"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tmp[2];</highlight></codeline>
<codeline lineno="1783"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>fifo_count;</highlight></codeline>
<codeline lineno="1784"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" kindref="member">dmp_on</ref>)</highlight></codeline>
<codeline lineno="1785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1786"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>)</highlight></codeline>
<codeline lineno="1787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1788"><highlight class="normal"></highlight></codeline>
<codeline lineno="1789"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gab7503974d62cf9c2d688579fcd1abd48" kindref="member">fifo_count_h</ref>,<sp/>2,<sp/>tmp))</highlight></codeline>
<codeline lineno="1790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1791"><highlight class="normal"><sp/><sp/><sp/><sp/>fifo_count<sp/>=<sp/>(tmp[0]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>tmp[1];</highlight></codeline>
<codeline lineno="1792"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fifo_count<sp/>&lt;<sp/>length)<sp/>{</highlight></codeline>
<codeline lineno="1793"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>more[0]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1794"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1795"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1796"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fifo_count<sp/>&gt;<sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga5f77e9f55285abb4d214b80281f69c1f" kindref="member">max_fifo</ref><sp/>&gt;&gt;<sp/>1))<sp/>{</highlight></codeline>
<codeline lineno="1797"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>FIFO<sp/>is<sp/>50%<sp/>full,<sp/>better<sp/>check<sp/>overflow<sp/>bit.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga837724080c34ff5a190751427febaf91" kindref="member">int_status</ref>,<sp/>1,<sp/>tmp))</highlight></codeline>
<codeline lineno="1799"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1800"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tmp[0]<sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1gafb9b49ce5dd973b3c29ae72680924fa7" kindref="member">BIT_FIFO_OVERFLOW</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gaf23e9f57c0059be6ec57862f0584de10" kindref="member">mpu_reset_fifo</ref>();</highlight></codeline>
<codeline lineno="1802"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-2;</highlight></codeline>
<codeline lineno="1803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1804"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1805"><highlight class="normal"></highlight></codeline>
<codeline lineno="1806"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb6763dc5f368ea01ef7c733cea9dab4" kindref="member">fifo_r_w</ref>,<sp/>length,<sp/>data))</highlight></codeline>
<codeline lineno="1807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1808"><highlight class="normal"><sp/><sp/><sp/><sp/>more[0]<sp/>=<sp/>fifo_count<sp/>/<sp/>length<sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="1809"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1810"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1811"><highlight class="normal"></highlight></codeline>
<codeline lineno="1817" refid="group___d_r_i_v_e_r_s_1ga36f70f38371b48d81094d3b061233e15" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga36f70f38371b48d81094d3b061233e15" kindref="member">mpu_set_bypass</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>bypass_on)</highlight></codeline>
<codeline lineno="1818"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1819"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tmp;</highlight></codeline>
<codeline lineno="1820"><highlight class="normal"></highlight></codeline>
<codeline lineno="1821"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga6d3a962d6435644c7ea68e7d65934636" kindref="member">bypass_mode</ref><sp/>==<sp/>bypass_on)</highlight></codeline>
<codeline lineno="1822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1823"><highlight class="normal"></highlight></codeline>
<codeline lineno="1824"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bypass_on)<sp/>{</highlight></codeline>
<codeline lineno="1825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" kindref="member">user_ctrl</ref>,<sp/>1,<sp/>&amp;tmp))</highlight></codeline>
<codeline lineno="1826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>&amp;=<sp/>~BIT_AUX_IF_EN;</highlight></codeline>
<codeline lineno="1828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" kindref="member">user_ctrl</ref>,<sp/>1,<sp/>&amp;tmp))</highlight></codeline>
<codeline lineno="1829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" kindref="member">delay_ms</ref>(3);</highlight></codeline>
<codeline lineno="1831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gadd12a8d89e1a4c4e008b12a96dd4c75d" kindref="member">BIT_BYPASS_EN</ref>;</highlight></codeline>
<codeline lineno="1832"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga6f12e54ae8c7f2dd77954f3ab619bbb9" kindref="member">active_low_int</ref>)</highlight></codeline>
<codeline lineno="1833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga8467782bedc44051c95643e303543655" kindref="member">BIT_ACTL</ref>;</highlight></codeline>
<codeline lineno="1834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga55ce40fc460a62829ec149edaccffe7c" kindref="member">latched_int</ref>)</highlight></codeline>
<codeline lineno="1835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga588b5a95724c4a68c6868faa78fd3a7f" kindref="member">BIT_LATCH_EN</ref><sp/>|<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1f50796ca0363292d9ac9cc1d29d9225" kindref="member">BIT_ANY_RD_CLR</ref>;</highlight></codeline>
<codeline lineno="1836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaae7bdbff2a1029245890b555b2d8d519" kindref="member">int_pin_cfg</ref>,<sp/>1,<sp/>&amp;tmp))</highlight></codeline>
<codeline lineno="1837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1838"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enable<sp/>I2C<sp/>master<sp/>mode<sp/>if<sp/>compass<sp/>is<sp/>being<sp/>used.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" kindref="member">user_ctrl</ref>,<sp/>1,<sp/>&amp;tmp))</highlight></codeline>
<codeline lineno="1841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref><sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga7fc9c1dbdcb2ac8cc2a4128a5799482a" kindref="member">INV_XYZ_COMPASS</ref>)</highlight></codeline>
<codeline lineno="1843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1gabcdedbd3098140aa14ad17bcaca8e176" kindref="member">BIT_AUX_IF_EN</ref>;</highlight></codeline>
<codeline lineno="1844"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>&amp;=<sp/>~BIT_AUX_IF_EN;</highlight></codeline>
<codeline lineno="1846"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" kindref="member">user_ctrl</ref>,<sp/>1,<sp/>&amp;tmp))</highlight></codeline>
<codeline lineno="1847"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" kindref="member">delay_ms</ref>(3);</highlight></codeline>
<codeline lineno="1849"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga6f12e54ae8c7f2dd77954f3ab619bbb9" kindref="member">active_low_int</ref>)</highlight></codeline>
<codeline lineno="1850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga8467782bedc44051c95643e303543655" kindref="member">BIT_ACTL</ref>;</highlight></codeline>
<codeline lineno="1851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga55ce40fc460a62829ec149edaccffe7c" kindref="member">latched_int</ref>)</highlight></codeline>
<codeline lineno="1854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga588b5a95724c4a68c6868faa78fd3a7f" kindref="member">BIT_LATCH_EN</ref><sp/>|<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1f50796ca0363292d9ac9cc1d29d9225" kindref="member">BIT_ANY_RD_CLR</ref>;</highlight></codeline>
<codeline lineno="1855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaae7bdbff2a1029245890b555b2d8d519" kindref="member">int_pin_cfg</ref>,<sp/>1,<sp/>&amp;tmp))</highlight></codeline>
<codeline lineno="1856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1857"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1858"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga6d3a962d6435644c7ea68e7d65934636" kindref="member">bypass_mode</ref><sp/>=<sp/>bypass_on;</highlight></codeline>
<codeline lineno="1859"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1860"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1861"><highlight class="normal"></highlight></codeline>
<codeline lineno="1867" refid="group___d_r_i_v_e_r_s_1gacc92fb1489ef32a04bcb6b0ebde4d657" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gacc92fb1489ef32a04bcb6b0ebde4d657" kindref="member">mpu_set_int_level</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>active_low)</highlight></codeline>
<codeline lineno="1868"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1869"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga6f12e54ae8c7f2dd77954f3ab619bbb9" kindref="member">active_low_int</ref><sp/>=<sp/>active_low;</highlight></codeline>
<codeline lineno="1870"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1871"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1872"><highlight class="normal"></highlight></codeline>
<codeline lineno="1879" refid="group___d_r_i_v_e_r_s_1ga653cb855300bff9285ce4b8dca6a503b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga653cb855300bff9285ce4b8dca6a503b" kindref="member">mpu_set_int_latched</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>enable)</highlight></codeline>
<codeline lineno="1880"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1881"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tmp;</highlight></codeline>
<codeline lineno="1882"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga55ce40fc460a62829ec149edaccffe7c" kindref="member">latched_int</ref><sp/>==<sp/>enable)</highlight></codeline>
<codeline lineno="1883"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1884"><highlight class="normal"></highlight></codeline>
<codeline lineno="1885"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(enable)</highlight></codeline>
<codeline lineno="1886"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga588b5a95724c4a68c6868faa78fd3a7f" kindref="member">BIT_LATCH_EN</ref><sp/>|<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1f50796ca0363292d9ac9cc1d29d9225" kindref="member">BIT_ANY_RD_CLR</ref>;</highlight></codeline>
<codeline lineno="1887"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1888"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1889"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga6d3a962d6435644c7ea68e7d65934636" kindref="member">bypass_mode</ref>)</highlight></codeline>
<codeline lineno="1890"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1gadd12a8d89e1a4c4e008b12a96dd4c75d" kindref="member">BIT_BYPASS_EN</ref>;</highlight></codeline>
<codeline lineno="1891"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga6f12e54ae8c7f2dd77954f3ab619bbb9" kindref="member">active_low_int</ref>)</highlight></codeline>
<codeline lineno="1892"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga8467782bedc44051c95643e303543655" kindref="member">BIT_ACTL</ref>;</highlight></codeline>
<codeline lineno="1893"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaae7bdbff2a1029245890b555b2d8d519" kindref="member">int_pin_cfg</ref>,<sp/>1,<sp/>&amp;tmp))</highlight></codeline>
<codeline lineno="1894"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1895"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga55ce40fc460a62829ec149edaccffe7c" kindref="member">latched_int</ref><sp/>=<sp/>enable;</highlight></codeline>
<codeline lineno="1896"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1897"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1898"><highlight class="normal"></highlight></codeline>
<codeline lineno="1899"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>MPU6050</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1900" refid="group___d_r_i_v_e_r_s_1gab7ebbe13328466605a20f6ce1a106de8" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gab7ebbe13328466605a20f6ce1a106de8" kindref="member">get_accel_prod_shift</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*st_shift)</highlight></codeline>
<codeline lineno="1901"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1902"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tmp[4],<sp/>shift_code[3],<sp/>ii;</highlight></codeline>
<codeline lineno="1903"><highlight class="normal"></highlight></codeline>
<codeline lineno="1904"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/>0x0D,<sp/>4,<sp/>tmp))</highlight></codeline>
<codeline lineno="1905"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0x07;</highlight></codeline>
<codeline lineno="1906"><highlight class="normal"></highlight></codeline>
<codeline lineno="1907"><highlight class="normal"><sp/><sp/><sp/><sp/>shift_code[0]<sp/>=<sp/>((tmp[0]<sp/>&amp;<sp/>0xE0)<sp/>&gt;&gt;<sp/>3)<sp/>|<sp/>((tmp[3]<sp/>&amp;<sp/>0x30)<sp/>&gt;&gt;<sp/>4);</highlight></codeline>
<codeline lineno="1908"><highlight class="normal"><sp/><sp/><sp/><sp/>shift_code[1]<sp/>=<sp/>((tmp[1]<sp/>&amp;<sp/>0xE0)<sp/>&gt;&gt;<sp/>3)<sp/>|<sp/>((tmp[3]<sp/>&amp;<sp/>0x0C)<sp/>&gt;&gt;<sp/>2);</highlight></codeline>
<codeline lineno="1909"><highlight class="normal"><sp/><sp/><sp/><sp/>shift_code[2]<sp/>=<sp/>((tmp[2]<sp/>&amp;<sp/>0xE0)<sp/>&gt;&gt;<sp/>3)<sp/>|<sp/>(tmp[3]<sp/>&amp;<sp/>0x03);</highlight></codeline>
<codeline lineno="1910"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(ii<sp/>=<sp/>0;<sp/>ii<sp/>&lt;<sp/>3;<sp/>ii++)<sp/>{</highlight></codeline>
<codeline lineno="1911"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!shift_code[ii])<sp/>{</highlight></codeline>
<codeline lineno="1912"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>st_shift[ii]<sp/>=<sp/>0.f;</highlight></codeline>
<codeline lineno="1913"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1914"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1915"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Equivalent<sp/>to..</highlight></codeline>
<codeline lineno="1916"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>st_shift[ii]<sp/>=<sp/>0.34f<sp/>*<sp/>powf(0.92f/0.34f,<sp/>(shift_code[ii]-1)<sp/>/<sp/>30.f)</highlight></codeline>
<codeline lineno="1917"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1918"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>st_shift[ii]<sp/>=<sp/>0.34f;</highlight></codeline>
<codeline lineno="1919"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(--shift_code[ii])</highlight></codeline>
<codeline lineno="1920"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>st_shift[ii]<sp/>*=<sp/>1.034f;</highlight></codeline>
<codeline lineno="1921"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1922"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1923"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1924"><highlight class="normal"></highlight></codeline>
<codeline lineno="1925" refid="group___d_r_i_v_e_r_s_1gaab48ddb3bd05cea3f0fc85a68db9934d" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gaab48ddb3bd05cea3f0fc85a68db9934d" kindref="member">accel_self_test</ref>(</highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*bias_regular,<sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*bias_st)</highlight></codeline>
<codeline lineno="1926"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1927"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>jj,<sp/>result<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1928"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>st_shift[3],<sp/>st_shift_cust,<sp/>st_shift_var;</highlight></codeline>
<codeline lineno="1929"><highlight class="normal"></highlight></codeline>
<codeline lineno="1930"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gab7ebbe13328466605a20f6ce1a106de8" kindref="member">get_accel_prod_shift</ref>(st_shift);</highlight></codeline>
<codeline lineno="1931"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(jj<sp/>=<sp/>0;<sp/>jj<sp/>&lt;<sp/>3;<sp/>jj++)<sp/>{</highlight></codeline>
<codeline lineno="1932"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>st_shift_cust<sp/>=<sp/>labs(bias_regular[jj]<sp/>-<sp/>bias_st[jj])<sp/>/<sp/>65536.f;</highlight></codeline>
<codeline lineno="1933"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(st_shift[jj])<sp/>{</highlight></codeline>
<codeline lineno="1934"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>st_shift_var<sp/>=<sp/>st_shift_cust<sp/>/<sp/>st_shift[jj]<sp/>-<sp/>1.f;</highlight></codeline>
<codeline lineno="1935"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga95bcc5f260df5ce993730008a1dcb45a" kindref="member">fabs</ref>(st_shift_var)<sp/>&gt;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga7f6071fb91426f467d9223c712560ee6" kindref="member">max_accel_var</ref>)</highlight></codeline>
<codeline lineno="1936"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>|=<sp/>1<sp/>&lt;&lt;<sp/>jj;</highlight></codeline>
<codeline lineno="1937"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((st_shift_cust<sp/>&lt;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1gae86aec181d0f1e4a29e9f9ae0735e8e1" kindref="member">min_g</ref>)<sp/>||</highlight></codeline>
<codeline lineno="1938"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(st_shift_cust<sp/>&gt;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga9ebd3195ac2f460f82873b9e6c36eb2c" kindref="member">max_g</ref>))</highlight></codeline>
<codeline lineno="1939"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>|=<sp/>1<sp/>&lt;&lt;<sp/>jj;</highlight></codeline>
<codeline lineno="1940"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1941"><highlight class="normal"></highlight></codeline>
<codeline lineno="1942"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="1943"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1944"><highlight class="normal"></highlight></codeline>
<codeline lineno="1945" refid="group___d_r_i_v_e_r_s_1ga267d6f443d5be8b2a7a06aa007116f7a" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga267d6f443d5be8b2a7a06aa007116f7a" kindref="member">gyro_self_test</ref>(</highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*bias_regular,<sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*bias_st)</highlight></codeline>
<codeline lineno="1946"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1947"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>jj,<sp/>result<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1948"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tmp[3];</highlight></codeline>
<codeline lineno="1949"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>st_shift,<sp/>st_shift_cust,<sp/>st_shift_var;</highlight></codeline>
<codeline lineno="1950"><highlight class="normal"></highlight></codeline>
<codeline lineno="1951"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/>0x0D,<sp/>3,<sp/>tmp))</highlight></codeline>
<codeline lineno="1952"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0x07;</highlight></codeline>
<codeline lineno="1953"><highlight class="normal"></highlight></codeline>
<codeline lineno="1954"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[0]<sp/>&amp;=<sp/>0x1F;</highlight></codeline>
<codeline lineno="1955"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[1]<sp/>&amp;=<sp/>0x1F;</highlight></codeline>
<codeline lineno="1956"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[2]<sp/>&amp;=<sp/>0x1F;</highlight></codeline>
<codeline lineno="1957"><highlight class="normal"></highlight></codeline>
<codeline lineno="1958"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(jj<sp/>=<sp/>0;<sp/>jj<sp/>&lt;<sp/>3;<sp/>jj++)<sp/>{</highlight></codeline>
<codeline lineno="1959"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>st_shift_cust<sp/>=<sp/>labs(bias_regular[jj]<sp/>-<sp/>bias_st[jj])<sp/>/<sp/>65536.f;</highlight></codeline>
<codeline lineno="1960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tmp[jj])<sp/>{</highlight></codeline>
<codeline lineno="1961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>st_shift<sp/>=<sp/>3275.f<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga330290a347407b0d92b1d77aa274993c" kindref="member">gyro_sens</ref>;</highlight></codeline>
<codeline lineno="1962"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(--tmp[jj])</highlight></codeline>
<codeline lineno="1963"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>st_shift<sp/>*=<sp/>1.046f;</highlight></codeline>
<codeline lineno="1964"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>st_shift_var<sp/>=<sp/>st_shift_cust<sp/>/<sp/>st_shift<sp/>-<sp/>1.f;</highlight></codeline>
<codeline lineno="1965"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga95bcc5f260df5ce993730008a1dcb45a" kindref="member">fabs</ref>(st_shift_var)<sp/>&gt;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga3b47b72fbf8c152cb4389e3cd866ded9" kindref="member">max_gyro_var</ref>)</highlight></codeline>
<codeline lineno="1966"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>|=<sp/>1<sp/>&lt;&lt;<sp/>jj;</highlight></codeline>
<codeline lineno="1967"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((st_shift_cust<sp/>&lt;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1gafacfcf92f07cd846fb0aaf889a30c582" kindref="member">min_dps</ref>)<sp/>||</highlight></codeline>
<codeline lineno="1968"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(st_shift_cust<sp/>&gt;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1gae588d6c0105bcd8f9144f42eee6c4835" kindref="member">max_dps</ref>))</highlight></codeline>
<codeline lineno="1969"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>|=<sp/>1<sp/>&lt;&lt;<sp/>jj;</highlight></codeline>
<codeline lineno="1970"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1971"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="1972"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1973"><highlight class="normal"></highlight></codeline>
<codeline lineno="1974"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1975"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>compass_self_test(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1976"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1977"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tmp[6];</highlight></codeline>
<codeline lineno="1978"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tries<sp/>=<sp/>10;</highlight></codeline>
<codeline lineno="1979"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>result<sp/>=<sp/>0x07;</highlight></codeline>
<codeline lineno="1980"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>data;</highlight></codeline>
<codeline lineno="1981"><highlight class="normal"></highlight></codeline>
<codeline lineno="1982"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga36f70f38371b48d81094d3b061233e15" kindref="member">mpu_set_bypass</ref>(1);</highlight></codeline>
<codeline lineno="1983"><highlight class="normal"></highlight></codeline>
<codeline lineno="1984"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/>AKM_POWER_DOWN;</highlight></codeline>
<codeline lineno="1985"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_addr,<sp/>AKM_REG_CNTL,<sp/>1,<sp/>tmp))</highlight></codeline>
<codeline lineno="1986"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0x07;</highlight></codeline>
<codeline lineno="1987"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/>AKM_BIT_SELF_TEST;</highlight></codeline>
<codeline lineno="1988"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_addr,<sp/>AKM_REG_ASTC,<sp/>1,<sp/>tmp))</highlight></codeline>
<codeline lineno="1989"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>AKM_restore;</highlight></codeline>
<codeline lineno="1990"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/>AKM_MODE_SELF_TEST;</highlight></codeline>
<codeline lineno="1991"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_addr,<sp/>AKM_REG_CNTL,<sp/>1,<sp/>tmp))</highlight></codeline>
<codeline lineno="1992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>AKM_restore;</highlight></codeline>
<codeline lineno="1993"><highlight class="normal"></highlight></codeline>
<codeline lineno="1994"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1995"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" kindref="member">delay_ms</ref>(10);</highlight></codeline>
<codeline lineno="1996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_addr,<sp/>AKM_REG_ST1,<sp/>1,<sp/>tmp))</highlight></codeline>
<codeline lineno="1997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>AKM_restore;</highlight></codeline>
<codeline lineno="1998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tmp[0]<sp/>&amp;<sp/>AKM_DATA_READY)</highlight></codeline>
<codeline lineno="1999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2000"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(tries--);</highlight></codeline>
<codeline lineno="2001"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(tmp[0]<sp/>&amp;<sp/>AKM_DATA_READY))</highlight></codeline>
<codeline lineno="2002"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>AKM_restore;</highlight></codeline>
<codeline lineno="2003"><highlight class="normal"></highlight></codeline>
<codeline lineno="2004"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_addr,<sp/>AKM_REG_HXL,<sp/>6,<sp/>tmp))</highlight></codeline>
<codeline lineno="2005"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>AKM_restore;</highlight></codeline>
<codeline lineno="2006"><highlight class="normal"></highlight></codeline>
<codeline lineno="2007"><highlight class="normal"><sp/><sp/><sp/><sp/>result<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2008"><highlight class="normal"><sp/><sp/><sp/><sp/>data<sp/>=<sp/>(short)(tmp[1]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>tmp[0];</highlight></codeline>
<codeline lineno="2009"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((data<sp/>&gt;<sp/>100)<sp/>||<sp/>(data<sp/>&lt;<sp/>-100))</highlight></codeline>
<codeline lineno="2010"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>|=<sp/>0x01;</highlight></codeline>
<codeline lineno="2011"><highlight class="normal"><sp/><sp/><sp/><sp/>data<sp/>=<sp/>(short)(tmp[3]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>tmp[2];</highlight></codeline>
<codeline lineno="2012"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((data<sp/>&gt;<sp/>100)<sp/>||<sp/>(data<sp/>&lt;<sp/>-100))</highlight></codeline>
<codeline lineno="2013"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>|=<sp/>0x02;</highlight></codeline>
<codeline lineno="2014"><highlight class="normal"><sp/><sp/><sp/><sp/>data<sp/>=<sp/>(short)(tmp[5]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>tmp[4];</highlight></codeline>
<codeline lineno="2015"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((data<sp/>&gt;<sp/>-300)<sp/>||<sp/>(data<sp/>&lt;<sp/>-1000))</highlight></codeline>
<codeline lineno="2016"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>|=<sp/>0x04;</highlight></codeline>
<codeline lineno="2017"><highlight class="normal"></highlight></codeline>
<codeline lineno="2018"><highlight class="normal">AKM_restore:</highlight></codeline>
<codeline lineno="2019"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/>0<sp/>|<sp/>SUPPORTS_AK89xx_HIGH_SENS;</highlight></codeline>
<codeline lineno="2020"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_addr,<sp/>AKM_REG_ASTC,<sp/>1,<sp/>tmp);</highlight></codeline>
<codeline lineno="2021"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/>SUPPORTS_AK89xx_HIGH_SENS;</highlight></codeline>
<codeline lineno="2022"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_addr,<sp/>AKM_REG_CNTL,<sp/>1,<sp/>tmp);</highlight></codeline>
<codeline lineno="2023"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga36f70f38371b48d81094d3b061233e15" kindref="member">mpu_set_bypass</ref>(0);</highlight></codeline>
<codeline lineno="2024"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2025"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2026"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2027"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2028"><highlight class="normal"></highlight></codeline>
<codeline lineno="2029" refid="group___d_r_i_v_e_r_s_1ga8d087842b07e9710be2267adea4b497a" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga8d087842b07e9710be2267adea4b497a" kindref="member">get_st_biases</ref>(</highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*gyro,<sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*accel,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>hw_test)</highlight></codeline>
<codeline lineno="2030"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2031"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>data[<ref refid="group___d_r_i_v_e_r_s_1ga973c680573b37fc359fc68d0707da355" kindref="member">MAX_PACKET_LENGTH</ref>];</highlight></codeline>
<codeline lineno="2032"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>packet_count,<sp/>ii;</highlight></codeline>
<codeline lineno="2033"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>fifo_count;</highlight></codeline>
<codeline lineno="2034"><highlight class="normal"></highlight></codeline>
<codeline lineno="2035"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>0x01;</highlight></codeline>
<codeline lineno="2036"><highlight class="normal"><sp/><sp/><sp/><sp/>data[1]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2037"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaa01fb0872030e8e2932f8d1d257ea86a" kindref="member">pwr_mgmt_1</ref>,<sp/>2,<sp/>data))</highlight></codeline>
<codeline lineno="2038"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2039"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" kindref="member">delay_ms</ref>(200);</highlight></codeline>
<codeline lineno="2040"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2041"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga48b47844d4b0570e60aa6806faa59eae" kindref="member">int_enable</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2043"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga6a392b7ecae843c734db3d832f11af49" kindref="member">fifo_en</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2044"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2045"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaa01fb0872030e8e2932f8d1d257ea86a" kindref="member">pwr_mgmt_1</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2046"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2047"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga2bf6dc826bcb17168013f303c904544b" kindref="member">i2c_mst</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2049"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" kindref="member">user_ctrl</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2050"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2051"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gaeae2cc64314ad05f3a93d2358a2369db" kindref="member">BIT_FIFO_RST</ref><sp/>|<sp/><ref refid="group___d_r_i_v_e_r_s_1ga37d5ceb74c3568e4bab6dcdd0afaa95b" kindref="member">BIT_DMP_RST</ref>;</highlight></codeline>
<codeline lineno="2052"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" kindref="member">user_ctrl</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2053"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2054"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" kindref="member">delay_ms</ref>(15);</highlight></codeline>
<codeline lineno="2055"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga5a1563d12b0aab5e65317621742f6f62" kindref="member">test</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga09f5a9ab86d36f3b83e7f4abdea73e39" kindref="member">reg_lpf</ref>;</highlight></codeline>
<codeline lineno="2056"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga22eeac0bd77e7d99b3e15dda52f1bd08" kindref="member">lpf</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2057"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2058"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga5a1563d12b0aab5e65317621742f6f62" kindref="member">test</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga3bef0c9f009cea4cbe01d0ee91126d83" kindref="member">reg_rate_div</ref>;</highlight></codeline>
<codeline lineno="2059"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga27dd9db31f16ca170520b3009255e6d0" kindref="member">rate_div</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2060"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2061"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hw_test)</highlight></codeline>
<codeline lineno="2062"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga5a1563d12b0aab5e65317621742f6f62" kindref="member">test</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaa0dfe8b2c29358e9e045aaa8beff244d" kindref="member">reg_gyro_fsr</ref><sp/>|<sp/>0xE0;</highlight></codeline>
<codeline lineno="2063"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2064"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga5a1563d12b0aab5e65317621742f6f62" kindref="member">test</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaa0dfe8b2c29358e9e045aaa8beff244d" kindref="member">reg_gyro_fsr</ref>;</highlight></codeline>
<codeline lineno="2065"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gada0b973f74cc874552f079fd58c435a6" kindref="member">gyro_cfg</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2066"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2067"><highlight class="normal"></highlight></codeline>
<codeline lineno="2068"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hw_test)</highlight></codeline>
<codeline lineno="2069"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga5a1563d12b0aab5e65317621742f6f62" kindref="member">test</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga3b54f67ea7f1dd47fd8aa48dda051032" kindref="member">reg_accel_fsr</ref><sp/>|<sp/>0xE0;</highlight></codeline>
<codeline lineno="2070"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2071"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga3b54f67ea7f1dd47fd8aa48dda051032" kindref="member">reg_accel_fsr</ref>;</highlight></codeline>
<codeline lineno="2072"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gae93a446c54cc00bc7f11209d7af0025e" kindref="member">accel_cfg</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2073"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2074"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hw_test)</highlight></codeline>
<codeline lineno="2075"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" kindref="member">delay_ms</ref>(200);</highlight></codeline>
<codeline lineno="2076"><highlight class="normal"></highlight></codeline>
<codeline lineno="2077"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Fill<sp/>FIFO<sp/>for<sp/>test.wait_ms<sp/>milliseconds.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2078"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gae3c4a18accb84992faaf2534a84a147c" kindref="member">BIT_FIFO_EN</ref>;</highlight></codeline>
<codeline lineno="2079"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" kindref="member">user_ctrl</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2080"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2081"><highlight class="normal"></highlight></codeline>
<codeline lineno="2082"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3fdc30f9c0a26c2c4e2bb88921f91629" kindref="member">INV_XYZ_GYRO</ref><sp/>|<sp/><ref refid="group___d_r_i_v_e_r_s_1gaa03f025a17ed491e70b88274e89c75c5" kindref="member">INV_XYZ_ACCEL</ref>;</highlight></codeline>
<codeline lineno="2083"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga6a392b7ecae843c734db3d832f11af49" kindref="member">fifo_en</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2084"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2085"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" kindref="member">delay_ms</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaf5d495939c8ca761ac2bbe7791dcd727" kindref="member">wait_ms</ref>);</highlight></codeline>
<codeline lineno="2086"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2087"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga6a392b7ecae843c734db3d832f11af49" kindref="member">fifo_en</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2088"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2089"><highlight class="normal"></highlight></codeline>
<codeline lineno="2090"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gab7503974d62cf9c2d688579fcd1abd48" kindref="member">fifo_count_h</ref>,<sp/>2,<sp/>data))</highlight></codeline>
<codeline lineno="2091"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2092"><highlight class="normal"></highlight></codeline>
<codeline lineno="2093"><highlight class="normal"><sp/><sp/><sp/><sp/>fifo_count<sp/>=<sp/>(data[0]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>data[1];</highlight></codeline>
<codeline lineno="2094"><highlight class="normal"><sp/><sp/><sp/><sp/>packet_count<sp/>=<sp/>fifo_count<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga973c680573b37fc359fc68d0707da355" kindref="member">MAX_PACKET_LENGTH</ref>;</highlight></codeline>
<codeline lineno="2095"><highlight class="normal"><sp/><sp/><sp/><sp/>gyro[0]<sp/>=<sp/>gyro[1]<sp/>=<sp/>gyro[2]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2096"><highlight class="normal"><sp/><sp/><sp/><sp/>accel[0]<sp/>=<sp/>accel[1]<sp/>=<sp/>accel[2]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2097"><highlight class="normal"></highlight></codeline>
<codeline lineno="2098"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(ii<sp/>=<sp/>0;<sp/>ii<sp/>&lt;<sp/>packet_count;<sp/>ii++)<sp/>{</highlight></codeline>
<codeline lineno="2099"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>accel_cur[3],<sp/>gyro_cur[3];</highlight></codeline>
<codeline lineno="2100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb6763dc5f368ea01ef7c733cea9dab4" kindref="member">fifo_r_w</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga973c680573b37fc359fc68d0707da355" kindref="member">MAX_PACKET_LENGTH</ref>,<sp/>data))</highlight></codeline>
<codeline lineno="2101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel_cur[0]<sp/>=<sp/>((short)data[0]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>data[1];</highlight></codeline>
<codeline lineno="2103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel_cur[1]<sp/>=<sp/>((short)data[2]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>data[3];</highlight></codeline>
<codeline lineno="2104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel_cur[2]<sp/>=<sp/>((short)data[4]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>data[5];</highlight></codeline>
<codeline lineno="2105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel[0]<sp/>+=<sp/>(long)accel_cur[0];</highlight></codeline>
<codeline lineno="2106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel[1]<sp/>+=<sp/>(long)accel_cur[1];</highlight></codeline>
<codeline lineno="2107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel[2]<sp/>+=<sp/>(long)accel_cur[2];</highlight></codeline>
<codeline lineno="2108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>gyro_cur[0]<sp/>=<sp/>(((short)data[6]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>data[7]);</highlight></codeline>
<codeline lineno="2109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>gyro_cur[1]<sp/>=<sp/>(((short)data[8]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>data[9]);</highlight></codeline>
<codeline lineno="2110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>gyro_cur[2]<sp/>=<sp/>(((short)data[10]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>data[11]);</highlight></codeline>
<codeline lineno="2111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>gyro[0]<sp/>+=<sp/>(long)gyro_cur[0];</highlight></codeline>
<codeline lineno="2112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>gyro[1]<sp/>+=<sp/>(long)gyro_cur[1];</highlight></codeline>
<codeline lineno="2113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>gyro[2]<sp/>+=<sp/>(long)gyro_cur[2];</highlight></codeline>
<codeline lineno="2114"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2115"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>EMPL_NO_64BIT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2116"><highlight class="normal"><sp/><sp/><sp/><sp/>gyro[0]<sp/>=<sp/>(long)(((</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)gyro[0]*65536.f)<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga330290a347407b0d92b1d77aa274993c" kindref="member">gyro_sens</ref><sp/>/<sp/>packet_count);</highlight></codeline>
<codeline lineno="2117"><highlight class="normal"><sp/><sp/><sp/><sp/>gyro[1]<sp/>=<sp/>(long)(((</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)gyro[1]*65536.f)<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga330290a347407b0d92b1d77aa274993c" kindref="member">gyro_sens</ref><sp/>/<sp/>packet_count);</highlight></codeline>
<codeline lineno="2118"><highlight class="normal"><sp/><sp/><sp/><sp/>gyro[2]<sp/>=<sp/>(long)(((</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)gyro[2]*65536.f)<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga330290a347407b0d92b1d77aa274993c" kindref="member">gyro_sens</ref><sp/>/<sp/>packet_count);</highlight></codeline>
<codeline lineno="2119"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(has_accel)<sp/>{</highlight></codeline>
<codeline lineno="2120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel[0]<sp/>=<sp/>(long)(((</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)accel[0]*65536.f)<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga5f602885d6a544a9039b13a0cc7ac085" kindref="member">accel_sens</ref><sp/>/</highlight></codeline>
<codeline lineno="2121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet_count);</highlight></codeline>
<codeline lineno="2122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel[1]<sp/>=<sp/>(long)(((</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)accel[1]*65536.f)<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga5f602885d6a544a9039b13a0cc7ac085" kindref="member">accel_sens</ref><sp/>/</highlight></codeline>
<codeline lineno="2123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet_count);</highlight></codeline>
<codeline lineno="2124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel[2]<sp/>=<sp/>(long)(((</highlight><highlight class="keywordtype">float</highlight><highlight class="normal">)accel[2]*65536.f)<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga5f602885d6a544a9039b13a0cc7ac085" kindref="member">accel_sens</ref><sp/>/</highlight></codeline>
<codeline lineno="2125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet_count);</highlight></codeline>
<codeline lineno="2126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Don&apos;t<sp/>remove<sp/>gravity!<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel[2]<sp/>-=<sp/>65536L;</highlight></codeline>
<codeline lineno="2128"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2129"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2130"><highlight class="normal"><sp/><sp/><sp/><sp/>gyro[0]<sp/>=<sp/>(long)(((</highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal">)gyro[0]&lt;&lt;16)<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga330290a347407b0d92b1d77aa274993c" kindref="member">gyro_sens</ref><sp/>/<sp/>packet_count);</highlight></codeline>
<codeline lineno="2131"><highlight class="normal"><sp/><sp/><sp/><sp/>gyro[1]<sp/>=<sp/>(long)(((</highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal">)gyro[1]&lt;&lt;16)<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga330290a347407b0d92b1d77aa274993c" kindref="member">gyro_sens</ref><sp/>/<sp/>packet_count);</highlight></codeline>
<codeline lineno="2132"><highlight class="normal"><sp/><sp/><sp/><sp/>gyro[2]<sp/>=<sp/>(long)(((</highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal">)gyro[2]&lt;&lt;16)<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga330290a347407b0d92b1d77aa274993c" kindref="member">gyro_sens</ref><sp/>/<sp/>packet_count);</highlight></codeline>
<codeline lineno="2133"><highlight class="normal"><sp/><sp/><sp/><sp/>accel[0]<sp/>=<sp/>(long)(((</highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal">)accel[0]&lt;&lt;16)<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga5f602885d6a544a9039b13a0cc7ac085" kindref="member">accel_sens</ref><sp/>/</highlight></codeline>
<codeline lineno="2134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet_count);</highlight></codeline>
<codeline lineno="2135"><highlight class="normal"><sp/><sp/><sp/><sp/>accel[1]<sp/>=<sp/>(long)(((</highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal">)accel[1]&lt;&lt;16)<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga5f602885d6a544a9039b13a0cc7ac085" kindref="member">accel_sens</ref><sp/>/</highlight></codeline>
<codeline lineno="2136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet_count);</highlight></codeline>
<codeline lineno="2137"><highlight class="normal"><sp/><sp/><sp/><sp/>accel[2]<sp/>=<sp/>(long)(((</highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal">)accel[2]&lt;&lt;16)<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga1e8f8b1ef7fb2c429e1ce7c2f9985530" kindref="member">test</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga5f602885d6a544a9039b13a0cc7ac085" kindref="member">accel_sens</ref><sp/>/</highlight></codeline>
<codeline lineno="2138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packet_count);</highlight></codeline>
<codeline lineno="2139"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Don&apos;t<sp/>remove<sp/>gravity!<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2140"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(accel[2]<sp/>&gt;<sp/>0L)</highlight></codeline>
<codeline lineno="2141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel[2]<sp/>-=<sp/>65536L;</highlight></codeline>
<codeline lineno="2142"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel[2]<sp/>+=<sp/>65536L;</highlight></codeline>
<codeline lineno="2144"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2145"><highlight class="normal"></highlight></codeline>
<codeline lineno="2146"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="2147"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2148"><highlight class="normal"></highlight></codeline>
<codeline lineno="2169" refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" kindref="member">mpu_run_self_test</ref>(</highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*gyro,<sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*accel)</highlight></codeline>
<codeline lineno="2170"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2171"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>MPU6050</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2172"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tries<sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="2173"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>gyro_st[3],<sp/>accel_st[3];</highlight></codeline>
<codeline lineno="2174"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>accel_result,<sp/>gyro_result;</highlight></codeline>
<codeline lineno="2175"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2176"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>compass_result;</highlight></codeline>
<codeline lineno="2177"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2178"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ii;</highlight></codeline>
<codeline lineno="2179"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2180"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2181"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>accel_fsr,<sp/>fifo_sensors,<sp/>sensors_on;</highlight></codeline>
<codeline lineno="2182"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>gyro_fsr,<sp/>sample_rate,<sp/>lpf;</highlight></codeline>
<codeline lineno="2183"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>dmp_was_on;</highlight></codeline>
<codeline lineno="2184"><highlight class="normal"></highlight></codeline>
<codeline lineno="2185"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" kindref="member">dmp_on</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga68ed20e6c9663cd7c50469329af8715f" kindref="member">mpu_set_dmp_state</ref>(0);</highlight></codeline>
<codeline lineno="2187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dmp_was_on<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="2188"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dmp_was_on<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2190"><highlight class="normal"></highlight></codeline>
<codeline lineno="2191"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Get<sp/>initial<sp/>settings.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2192"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gaf973c32c73ba912ff512aab948fc31ca" kindref="member">mpu_get_gyro_fsr</ref>(&amp;gyro_fsr);</highlight></codeline>
<codeline lineno="2193"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gab6087a15ee23db23b6aec41590329a60" kindref="member">mpu_get_accel_fsr</ref>(&amp;accel_fsr);</highlight></codeline>
<codeline lineno="2194"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gaa95c7e216dcb2d888e9796001ca555f8" kindref="member">mpu_get_lpf</ref>(&amp;lpf);</highlight></codeline>
<codeline lineno="2195"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga2487dd551b701c1c7ed4d6335f02b2f1" kindref="member">mpu_get_sample_rate</ref>(&amp;sample_rate);</highlight></codeline>
<codeline lineno="2196"><highlight class="normal"><sp/><sp/><sp/><sp/>sensors_on<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>;</highlight></codeline>
<codeline lineno="2197"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga093f11eb10b2639a4b9fe344ea348c54" kindref="member">mpu_get_fifo_config</ref>(&amp;fifo_sensors);</highlight></codeline>
<codeline lineno="2198"><highlight class="normal"></highlight></codeline>
<codeline lineno="2199"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>For<sp/>older<sp/>chips,<sp/>the<sp/>self-test<sp/>will<sp/>be<sp/>different.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2200"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>MPU6050</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2201"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(ii<sp/>=<sp/>0;<sp/>ii<sp/>&lt;<sp/>tries;<sp/>ii++)</highlight></codeline>
<codeline lineno="2202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="group___d_r_i_v_e_r_s_1ga8d087842b07e9710be2267adea4b497a" kindref="member">get_st_biases</ref>(gyro,<sp/>accel,<sp/>0))</highlight></codeline>
<codeline lineno="2203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2204"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ii<sp/>==<sp/>tries)<sp/>{</highlight></codeline>
<codeline lineno="2205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>we<sp/>reach<sp/>this<sp/>point,<sp/>we<sp/>most<sp/>likely<sp/>encountered<sp/>an<sp/>I2C<sp/>error.</highlight></codeline>
<codeline lineno="2206"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>We&apos;ll<sp/>just<sp/>report<sp/>an<sp/>error<sp/>for<sp/>all<sp/>three<sp/>sensors.</highlight></codeline>
<codeline lineno="2207"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>restore;</highlight></codeline>
<codeline lineno="2210"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2211"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(ii<sp/>=<sp/>0;<sp/>ii<sp/>&lt;<sp/>tries;<sp/>ii++)</highlight></codeline>
<codeline lineno="2212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="group___d_r_i_v_e_r_s_1ga8d087842b07e9710be2267adea4b497a" kindref="member">get_st_biases</ref>(gyro_st,<sp/>accel_st,<sp/>1))</highlight></codeline>
<codeline lineno="2213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2214"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ii<sp/>==<sp/>tries)<sp/>{</highlight></codeline>
<codeline lineno="2215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Again,<sp/>probably<sp/>an<sp/>I2C<sp/>error.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>restore;</highlight></codeline>
<codeline lineno="2218"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2219"><highlight class="normal"><sp/><sp/><sp/><sp/>accel_result<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gaab48ddb3bd05cea3f0fc85a68db9934d" kindref="member">accel_self_test</ref>(accel,<sp/>accel_st);</highlight></codeline>
<codeline lineno="2220"><highlight class="normal"><sp/><sp/><sp/><sp/>gyro_result<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga267d6f443d5be8b2a7a06aa007116f7a" kindref="member">gyro_self_test</ref>(gyro,<sp/>gyro_st);</highlight></codeline>
<codeline lineno="2221"><highlight class="normal"></highlight></codeline>
<codeline lineno="2222"><highlight class="normal"><sp/><sp/><sp/><sp/>result<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2223"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!gyro_result)</highlight></codeline>
<codeline lineno="2224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>|=<sp/>0x01;</highlight></codeline>
<codeline lineno="2225"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!accel_result)</highlight></codeline>
<codeline lineno="2226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>|=<sp/>0x02;</highlight></codeline>
<codeline lineno="2227"><highlight class="normal"></highlight></codeline>
<codeline lineno="2228"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2229"><highlight class="normal"><sp/><sp/><sp/><sp/>compass_result<sp/>=<sp/>compass_self_test();</highlight></codeline>
<codeline lineno="2230"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!compass_result)</highlight></codeline>
<codeline lineno="2231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>|=<sp/>0x04;</highlight></codeline>
<codeline lineno="2232"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2233"><highlight class="normal">restore:</highlight></codeline>
<codeline lineno="2234"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined<sp/>MPU6500</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2235"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>For<sp/>now,<sp/>this<sp/>function<sp/>will<sp/>return<sp/>a<sp/>&quot;pass&quot;<sp/>result<sp/>for<sp/>all<sp/>three<sp/>sensors</highlight></codeline>
<codeline lineno="2236"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>for<sp/>compatibility<sp/>with<sp/>current<sp/>test<sp/>applications.</highlight></codeline>
<codeline lineno="2237"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2238"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga8d087842b07e9710be2267adea4b497a" kindref="member">get_st_biases</ref>(gyro,<sp/>accel,<sp/>0);</highlight></codeline>
<codeline lineno="2239"><highlight class="normal"><sp/><sp/><sp/><sp/>result<sp/>=<sp/>0x7;</highlight></codeline>
<codeline lineno="2240"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2241"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>to<sp/>invalid<sp/>values<sp/>to<sp/>ensure<sp/>no<sp/>I2C<sp/>writes<sp/>are<sp/>skipped.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2242"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab45a727aeee17380828a3e20ccb375c2" kindref="member">gyro_fsr</ref><sp/>=<sp/>0xFF;</highlight></codeline>
<codeline lineno="2243"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaf66873be1446ed552812e32d40eced61" kindref="member">accel_fsr</ref><sp/>=<sp/>0xFF;</highlight></codeline>
<codeline lineno="2244"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga16ec8ca8298f62ac01419775377270fb" kindref="member">lpf</ref><sp/>=<sp/>0xFF;</highlight></codeline>
<codeline lineno="2245"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga2660470fcf7b53e2e832a397cbe6c354" kindref="member">sample_rate</ref><sp/>=<sp/>0xFFFF;</highlight></codeline>
<codeline lineno="2246"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref><sp/>=<sp/>0xFF;</highlight></codeline>
<codeline lineno="2247"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref><sp/>=<sp/>0xFF;</highlight></codeline>
<codeline lineno="2248"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab7bd5165d6e62cb0d814cf3401958445" kindref="member">clk_src</ref><sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga75570f009627c6f4ddfb2d936d81e207a01b240917a78674d3e387110a6a8f94c" kindref="member">INV_CLK_PLL</ref>;</highlight></codeline>
<codeline lineno="2249"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gad09e6031c8677adc0b8a39b6deea8e27" kindref="member">mpu_set_gyro_fsr</ref>(gyro_fsr);</highlight></codeline>
<codeline lineno="2250"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga2713a96af104cfb2ae8e0ed4c3718119" kindref="member">mpu_set_accel_fsr</ref>(accel_fsr);</highlight></codeline>
<codeline lineno="2251"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga5661a9dee25152166769910767a2a93d" kindref="member">mpu_set_lpf</ref>(lpf);</highlight></codeline>
<codeline lineno="2252"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga0144d666a67a82888b8580002afe8b55" kindref="member">mpu_set_sample_rate</ref>(sample_rate);</highlight></codeline>
<codeline lineno="2253"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga6e77e7cc1cf6be5e8fdf617c5b4586d1" kindref="member">mpu_set_sensors</ref>(sensors_on);</highlight></codeline>
<codeline lineno="2254"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gababbdda287e1f19323489f90a0889dd7" kindref="member">mpu_configure_fifo</ref>(fifo_sensors);</highlight></codeline>
<codeline lineno="2255"><highlight class="normal"></highlight></codeline>
<codeline lineno="2256"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dmp_was_on)</highlight></codeline>
<codeline lineno="2257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga68ed20e6c9663cd7c50469329af8715f" kindref="member">mpu_set_dmp_state</ref>(1);</highlight></codeline>
<codeline lineno="2258"><highlight class="normal"></highlight></codeline>
<codeline lineno="2259"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2260"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2261"><highlight class="normal"></highlight></codeline>
<codeline lineno="2271" refid="group___d_r_i_v_e_r_s_1gafea59910bc3dd30ba3356b1c75213a5f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gafea59910bc3dd30ba3356b1c75213a5f" kindref="member">mpu_write_mem</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>mem_addr,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>length,</highlight></codeline>
<codeline lineno="2272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*data)</highlight></codeline>
<codeline lineno="2273"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2274"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tmp[2];</highlight></codeline>
<codeline lineno="2275"><highlight class="normal"></highlight></codeline>
<codeline lineno="2276"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!data)</highlight></codeline>
<codeline lineno="2277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2278"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>)</highlight></codeline>
<codeline lineno="2279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2280"><highlight class="normal"></highlight></codeline>
<codeline lineno="2281"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>char)(mem_addr<sp/>&gt;&gt;<sp/>8);</highlight></codeline>
<codeline lineno="2282"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[1]<sp/>=<sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>char)(mem_addr<sp/>&amp;<sp/>0xFF);</highlight></codeline>
<codeline lineno="2283"><highlight class="normal"></highlight></codeline>
<codeline lineno="2284"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>bank<sp/>boundaries.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2285"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tmp[1]<sp/>+<sp/>length<sp/>&gt;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaef4a2014cd6e3d5faeb8f713ee3606ed" kindref="member">bank_size</ref>)</highlight></codeline>
<codeline lineno="2286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2287"><highlight class="normal"></highlight></codeline>
<codeline lineno="2288"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaf1b74c33fa828ea4dc172bfbaaf47216" kindref="member">bank_sel</ref>,<sp/>2,<sp/>tmp))</highlight></codeline>
<codeline lineno="2289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2290"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gae17166b43fa12a960c0eced9a3c04bf0" kindref="member">mem_r_w</ref>,<sp/>length,<sp/>data))</highlight></codeline>
<codeline lineno="2291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2292"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="2293"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2294"><highlight class="normal"></highlight></codeline>
<codeline lineno="2304" refid="group___d_r_i_v_e_r_s_1ga3374bececb6743893c9eab27645c1182" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3374bececb6743893c9eab27645c1182" kindref="member">mpu_read_mem</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>mem_addr,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>length,</highlight></codeline>
<codeline lineno="2305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*data)</highlight></codeline>
<codeline lineno="2306"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2307"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tmp[2];</highlight></codeline>
<codeline lineno="2308"><highlight class="normal"></highlight></codeline>
<codeline lineno="2309"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!data)</highlight></codeline>
<codeline lineno="2310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2311"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>)</highlight></codeline>
<codeline lineno="2312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2313"><highlight class="normal"></highlight></codeline>
<codeline lineno="2314"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>char)(mem_addr<sp/>&gt;&gt;<sp/>8);</highlight></codeline>
<codeline lineno="2315"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[1]<sp/>=<sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>char)(mem_addr<sp/>&amp;<sp/>0xFF);</highlight></codeline>
<codeline lineno="2316"><highlight class="normal"></highlight></codeline>
<codeline lineno="2317"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>bank<sp/>boundaries.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2318"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tmp[1]<sp/>+<sp/>length<sp/>&gt;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaef4a2014cd6e3d5faeb8f713ee3606ed" kindref="member">bank_size</ref>)</highlight></codeline>
<codeline lineno="2319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2320"><highlight class="normal"></highlight></codeline>
<codeline lineno="2321"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaf1b74c33fa828ea4dc172bfbaaf47216" kindref="member">bank_sel</ref>,<sp/>2,<sp/>tmp))</highlight></codeline>
<codeline lineno="2322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2323"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gae17166b43fa12a960c0eced9a3c04bf0" kindref="member">mem_r_w</ref>,<sp/>length,<sp/>data))</highlight></codeline>
<codeline lineno="2324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2325"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="2326"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2327"><highlight class="normal"></highlight></codeline>
<codeline lineno="2336" refid="group___d_r_i_v_e_r_s_1ga8fbdfe1a50285d4ab438e29c2efc70f5" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga8fbdfe1a50285d4ab438e29c2efc70f5" kindref="member">mpu_load_firmware</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>length,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*firmware,</highlight></codeline>
<codeline lineno="2337"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>start_addr,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>sample_rate)</highlight></codeline>
<codeline lineno="2338"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2339"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>ii;</highlight></codeline>
<codeline lineno="2340"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>this_write;</highlight></codeline>
<codeline lineno="2341"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Must<sp/>divide<sp/>evenly<sp/>into<sp/>st.hw-&gt;bank_size<sp/>to<sp/>avoid<sp/>bank<sp/>crossings.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2342"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LOAD_CHUNK<sp/><sp/>(16)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2343"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>cur[<ref refid="inv__mpu_8c_1a7750730ae7e5c713b619e347d44185fe" kindref="member">LOAD_CHUNK</ref>],<sp/>tmp[2];</highlight></codeline>
<codeline lineno="2344"><highlight class="normal"></highlight></codeline>
<codeline lineno="2345"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga1d2ff55e17aae1459dfad61d76054b1b" kindref="member">dmp_loaded</ref>)</highlight></codeline>
<codeline lineno="2346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>DMP<sp/>should<sp/>only<sp/>be<sp/>loaded<sp/>once.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2348"><highlight class="normal"></highlight></codeline>
<codeline lineno="2349"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!firmware)</highlight></codeline>
<codeline lineno="2350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2351"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(ii<sp/>=<sp/>0;<sp/>ii<sp/>&lt;<sp/>length;<sp/>ii<sp/>+=<sp/>this_write)<sp/>{</highlight></codeline>
<codeline lineno="2352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this_write<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gac6afabdc09a49a433ee19d8a9486056d" kindref="member">min</ref>(<ref refid="inv__mpu_8c_1a7750730ae7e5c713b619e347d44185fe" kindref="member">LOAD_CHUNK</ref>,<sp/>length<sp/>-<sp/>ii);</highlight></codeline>
<codeline lineno="2353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gafea59910bc3dd30ba3356b1c75213a5f" kindref="member">mpu_write_mem</ref>(ii,<sp/>this_write,<sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*)&amp;firmware[ii]))</highlight></codeline>
<codeline lineno="2354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3374bececb6743893c9eab27645c1182" kindref="member">mpu_read_mem</ref>(ii,<sp/>this_write,<sp/>cur))</highlight></codeline>
<codeline lineno="2356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(memcmp(firmware+ii,<sp/>cur,<sp/>this_write))</highlight></codeline>
<codeline lineno="2358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-2;</highlight></codeline>
<codeline lineno="2359"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2360"><highlight class="normal"></highlight></codeline>
<codeline lineno="2361"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>program<sp/>start<sp/>address.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2362"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[0]<sp/>=<sp/>start_addr<sp/>&gt;&gt;<sp/>8;</highlight></codeline>
<codeline lineno="2363"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[1]<sp/>=<sp/>start_addr<sp/>&amp;<sp/>0xFF;</highlight></codeline>
<codeline lineno="2364"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaac4aac12b0e82272affd408b24dc9c95" kindref="member">prgm_start_h</ref>,<sp/>2,<sp/>tmp))</highlight></codeline>
<codeline lineno="2365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2366"><highlight class="normal"></highlight></codeline>
<codeline lineno="2367"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga1d2ff55e17aae1459dfad61d76054b1b" kindref="member">dmp_loaded</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="2368"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga5f42b7e1e740f2fb64427417e9e2dab7" kindref="member">dmp_sample_rate</ref><sp/>=<sp/>sample_rate;</highlight></codeline>
<codeline lineno="2369"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="2370"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2371"><highlight class="normal"></highlight></codeline>
<codeline lineno="2377" refid="group___d_r_i_v_e_r_s_1ga68ed20e6c9663cd7c50469329af8715f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga68ed20e6c9663cd7c50469329af8715f" kindref="member">mpu_set_dmp_state</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>enable)</highlight></codeline>
<codeline lineno="2378"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2379"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tmp;</highlight></codeline>
<codeline lineno="2380"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" kindref="member">dmp_on</ref><sp/>==<sp/>enable)</highlight></codeline>
<codeline lineno="2381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="2382"><highlight class="normal"></highlight></codeline>
<codeline lineno="2383"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(enable)<sp/>{</highlight></codeline>
<codeline lineno="2384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga1d2ff55e17aae1459dfad61d76054b1b" kindref="member">dmp_loaded</ref>)</highlight></codeline>
<codeline lineno="2385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Disable<sp/>data<sp/>ready<sp/>interrupt.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gafd5ebff6b0179e1dce0b68c2272cae07" kindref="member">set_int_enable</ref>(0);</highlight></codeline>
<codeline lineno="2388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Disable<sp/>bypass<sp/>mode.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga36f70f38371b48d81094d3b061233e15" kindref="member">mpu_set_bypass</ref>(0);</highlight></codeline>
<codeline lineno="2390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Keep<sp/>constant<sp/>sample<sp/>rate,<sp/>FIFO<sp/>rate<sp/>controlled<sp/>by<sp/>DMP.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga0144d666a67a82888b8580002afe8b55" kindref="member">mpu_set_sample_rate</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga5f42b7e1e740f2fb64427417e9e2dab7" kindref="member">dmp_sample_rate</ref>);</highlight></codeline>
<codeline lineno="2392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Remove<sp/>FIFO<sp/>elements.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/>0x23,<sp/>1,<sp/>&amp;tmp);</highlight></codeline>
<codeline lineno="2395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" kindref="member">dmp_on</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="2396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enable<sp/>DMP<sp/>interrupt.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gafd5ebff6b0179e1dce0b68c2272cae07" kindref="member">set_int_enable</ref>(1);</highlight></codeline>
<codeline lineno="2398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gaf23e9f57c0059be6ec57862f0584de10" kindref="member">mpu_reset_fifo</ref>();</highlight></codeline>
<codeline lineno="2399"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="2400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Disable<sp/>DMP<sp/>interrupt.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gafd5ebff6b0179e1dce0b68c2272cae07" kindref="member">set_int_enable</ref>(0);</highlight></codeline>
<codeline lineno="2402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Restore<sp/>FIFO<sp/>settings.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref>;</highlight></codeline>
<codeline lineno="2404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/>0x23,<sp/>1,<sp/>&amp;tmp);</highlight></codeline>
<codeline lineno="2405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" kindref="member">dmp_on</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gaf23e9f57c0059be6ec57862f0584de10" kindref="member">mpu_reset_fifo</ref>();</highlight></codeline>
<codeline lineno="2407"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2408"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="2409"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2410"><highlight class="normal"></highlight></codeline>
<codeline lineno="2416" refid="group___d_r_i_v_e_r_s_1gafe0f60ed0d7f8fd2dcd55d45b95a2363" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gafe0f60ed0d7f8fd2dcd55d45b95a2363" kindref="member">mpu_get_dmp_state</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*enabled)</highlight></codeline>
<codeline lineno="2417"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2418"><highlight class="normal"><sp/><sp/><sp/><sp/>enabled[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" kindref="member">dmp_on</ref>;</highlight></codeline>
<codeline lineno="2419"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="2420"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2421"><highlight class="normal"></highlight></codeline>
<codeline lineno="2422"><highlight class="normal"></highlight></codeline>
<codeline lineno="2423"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>This<sp/>initialization<sp/>is<sp/>similar<sp/>to<sp/>the<sp/>one<sp/>in<sp/>ak8975.c.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2424" refid="group___d_r_i_v_e_r_s_1ga4764ce0ba4e07a4c774f69ab3b83d1f9" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga4764ce0ba4e07a4c774f69ab3b83d1f9" kindref="member">setup_compass</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2425"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2426"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2427"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>data[4],<sp/>akm_addr;</highlight></codeline>
<codeline lineno="2428"><highlight class="normal"></highlight></codeline>
<codeline lineno="2429"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga36f70f38371b48d81094d3b061233e15" kindref="member">mpu_set_bypass</ref>(1);</highlight></codeline>
<codeline lineno="2430"><highlight class="normal"></highlight></codeline>
<codeline lineno="2431"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Find<sp/>compass.<sp/>Possible<sp/>addresses<sp/>range<sp/>from<sp/>0x0C<sp/>to<sp/>0x0F.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2432"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(akm_addr<sp/>=<sp/>0x0C;<sp/>akm_addr<sp/>&lt;=<sp/>0x0F;<sp/>akm_addr++)<sp/>{</highlight></codeline>
<codeline lineno="2433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(akm_addr,<sp/>AKM_REG_WHOAMI,<sp/>1,<sp/>data);</highlight></codeline>
<codeline lineno="2435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!result<sp/>&amp;&amp;<sp/>(data[0]<sp/>==<sp/>AKM_WHOAMI))</highlight></codeline>
<codeline lineno="2436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2437"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2438"><highlight class="normal"></highlight></codeline>
<codeline lineno="2439"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(akm_addr<sp/>&gt;<sp/>0x0F)<sp/>{</highlight></codeline>
<codeline lineno="2440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>TODO:<sp/>Handle<sp/>this<sp/>case<sp/>in<sp/>all<sp/>compass-related<sp/>functions.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gab354affc295f7d61fe8a355c9361cc5a" kindref="member">log_e</ref>(</highlight><highlight class="stringliteral">&quot;Compass<sp/>not<sp/>found.\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="2442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2443"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2444"><highlight class="normal"></highlight></codeline>
<codeline lineno="2445"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_addr<sp/>=<sp/>akm_addr;</highlight></codeline>
<codeline lineno="2446"><highlight class="normal"></highlight></codeline>
<codeline lineno="2447"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>AKM_POWER_DOWN;</highlight></codeline>
<codeline lineno="2448"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_addr,<sp/>AKM_REG_CNTL,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2450"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" kindref="member">delay_ms</ref>(1);</highlight></codeline>
<codeline lineno="2451"><highlight class="normal"></highlight></codeline>
<codeline lineno="2452"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>AKM_FUSE_ROM_ACCESS;</highlight></codeline>
<codeline lineno="2453"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_addr,<sp/>AKM_REG_CNTL,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2455"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" kindref="member">delay_ms</ref>(1);</highlight></codeline>
<codeline lineno="2456"><highlight class="normal"></highlight></codeline>
<codeline lineno="2457"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Get<sp/>sensitivity<sp/>adjustment<sp/>data<sp/>from<sp/>fuse<sp/>ROM.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2458"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_addr,<sp/>AKM_REG_ASAX,<sp/>3,<sp/>data))</highlight></codeline>
<codeline lineno="2459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2460"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.mag_sens_adj[0]<sp/>=<sp/>(long)data[0]<sp/>+<sp/>128;</highlight></codeline>
<codeline lineno="2461"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.mag_sens_adj[1]<sp/>=<sp/>(long)data[1]<sp/>+<sp/>128;</highlight></codeline>
<codeline lineno="2462"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.mag_sens_adj[2]<sp/>=<sp/>(long)data[2]<sp/>+<sp/>128;</highlight></codeline>
<codeline lineno="2463"><highlight class="normal"></highlight></codeline>
<codeline lineno="2464"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>AKM_POWER_DOWN;</highlight></codeline>
<codeline lineno="2465"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_addr,<sp/>AKM_REG_CNTL,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2467"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" kindref="member">delay_ms</ref>(1);</highlight></codeline>
<codeline lineno="2468"><highlight class="normal"></highlight></codeline>
<codeline lineno="2469"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga36f70f38371b48d81094d3b061233e15" kindref="member">mpu_set_bypass</ref>(0);</highlight></codeline>
<codeline lineno="2470"><highlight class="normal"></highlight></codeline>
<codeline lineno="2471"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>up<sp/>master<sp/>mode,<sp/>master<sp/>clock,<sp/>and<sp/>ES<sp/>bit.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2472"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>0x40;</highlight></codeline>
<codeline lineno="2473"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga2bf6dc826bcb17168013f303c904544b" kindref="member">i2c_mst</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2475"><highlight class="normal"></highlight></codeline>
<codeline lineno="2476"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Slave<sp/>0<sp/>reads<sp/>from<sp/>AKM<sp/>data<sp/>registers.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2477"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga8ef1963ec6fb3df5586e50959cf00a70" kindref="member">BIT_I2C_READ</ref><sp/>|<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_addr;</highlight></codeline>
<codeline lineno="2478"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;s0_addr,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2480"><highlight class="normal"></highlight></codeline>
<codeline lineno="2481"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Compass<sp/>reads<sp/>start<sp/>at<sp/>this<sp/>register.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2482"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>AKM_REG_ST1;</highlight></codeline>
<codeline lineno="2483"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;s0_reg,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2485"><highlight class="normal"></highlight></codeline>
<codeline lineno="2486"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enable<sp/>slave<sp/>0,<sp/>8-byte<sp/>reads.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2487"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gae9440f48b6d70d900366dc040a8714d7" kindref="member">BIT_SLAVE_EN</ref><sp/>|<sp/>8;</highlight></codeline>
<codeline lineno="2488"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;s0_ctrl,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2490"><highlight class="normal"></highlight></codeline>
<codeline lineno="2491"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Slave<sp/>1<sp/>changes<sp/>AKM<sp/>measurement<sp/>mode.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2492"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_addr;</highlight></codeline>
<codeline lineno="2493"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;s1_addr,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2495"><highlight class="normal"></highlight></codeline>
<codeline lineno="2496"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>AKM<sp/>measurement<sp/>mode<sp/>register.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2497"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>AKM_REG_CNTL;</highlight></codeline>
<codeline lineno="2498"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;s1_reg,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2500"><highlight class="normal"></highlight></codeline>
<codeline lineno="2501"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enable<sp/>slave<sp/>1,<sp/>1-byte<sp/>writes.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2502"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gae9440f48b6d70d900366dc040a8714d7" kindref="member">BIT_SLAVE_EN</ref><sp/>|<sp/>1;</highlight></codeline>
<codeline lineno="2503"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;s1_ctrl,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2505"><highlight class="normal"></highlight></codeline>
<codeline lineno="2506"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>slave<sp/>1<sp/>data.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2507"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>AKM_SINGLE_MEASUREMENT;</highlight></codeline>
<codeline lineno="2508"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;s1_do,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2510"><highlight class="normal"></highlight></codeline>
<codeline lineno="2511"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Trigger<sp/>slave<sp/>0<sp/>and<sp/>slave<sp/>1<sp/>actions<sp/>at<sp/>each<sp/>sample.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2512"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>0x03;</highlight></codeline>
<codeline lineno="2513"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;i2c_delay_ctrl,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2514"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2515"><highlight class="normal"></highlight></codeline>
<codeline lineno="2516"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>MPU9150</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2517"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>For<sp/>the<sp/>MPU9150,<sp/>the<sp/>auxiliary<sp/>I2C<sp/>bus<sp/>needs<sp/>to<sp/>be<sp/>set<sp/>to<sp/>VDD.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2518"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gac52d7caf4efc485ef6faa1211bfe60dc" kindref="member">BIT_I2C_MST_VDDIO</ref>;</highlight></codeline>
<codeline lineno="2519"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;yg_offs_tc,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2521"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2522"><highlight class="normal"></highlight></codeline>
<codeline lineno="2523"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="2524"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2525"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2526"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2527"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2528"><highlight class="normal"></highlight></codeline>
<codeline lineno="2535" refid="group___d_r_i_v_e_r_s_1ga65e6b0ce980b8c0255d7be9b55c88c08" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga65e6b0ce980b8c0255d7be9b55c88c08" kindref="member">mpu_get_compass_reg</ref>(</highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>*data,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*timestamp)</highlight></codeline>
<codeline lineno="2536"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2537"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2538"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>tmp[9];</highlight></codeline>
<codeline lineno="2539"><highlight class="normal"></highlight></codeline>
<codeline lineno="2540"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref><sp/>&amp;<sp/><ref refid="group___d_r_i_v_e_r_s_1ga7fc9c1dbdcb2ac8cc2a4128a5799482a" kindref="member">INV_XYZ_COMPASS</ref>))</highlight></codeline>
<codeline lineno="2541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2542"><highlight class="normal"></highlight></codeline>
<codeline lineno="2543"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_BYPASS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2544"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_addr,<sp/>AKM_REG_ST1,<sp/>8,<sp/>tmp))</highlight></codeline>
<codeline lineno="2545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2546"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp[8]<sp/>=<sp/>AKM_SINGLE_MEASUREMENT;</highlight></codeline>
<codeline lineno="2547"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.compass_addr,<sp/>AKM_REG_CNTL,<sp/>1,<sp/>tmp+8))</highlight></codeline>
<codeline lineno="2548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2549"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2550"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga838d8f1c7b0d8cc83923b93bbafe1b33" kindref="member">i2c_read</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;raw_compass,<sp/>8,<sp/>tmp))</highlight></codeline>
<codeline lineno="2551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2552"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2553"><highlight class="normal"></highlight></codeline>
<codeline lineno="2554"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>AK8975_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2555"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>AK8975<sp/>doesn&apos;t<sp/>have<sp/>the<sp/>overrun<sp/>error<sp/>bit.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2556"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(tmp[0]<sp/>&amp;<sp/>AKM_DATA_READY))</highlight></codeline>
<codeline lineno="2557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-2;</highlight></codeline>
<codeline lineno="2558"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((tmp[7]<sp/>&amp;<sp/>AKM_OVERFLOW)<sp/>||<sp/>(tmp[7]<sp/>&amp;<sp/>AKM_DATA_ERROR))</highlight></codeline>
<codeline lineno="2559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-3;</highlight></codeline>
<codeline lineno="2560"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined<sp/>AK8963_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2561"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>AK8963<sp/>doesn&apos;t<sp/>have<sp/>the<sp/>data<sp/>read<sp/>error<sp/>bit.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2562"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(tmp[0]<sp/>&amp;<sp/>AKM_DATA_READY)<sp/>||<sp/>(tmp[0]<sp/>&amp;<sp/>AKM_DATA_OVERRUN))</highlight></codeline>
<codeline lineno="2563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-2;</highlight></codeline>
<codeline lineno="2564"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tmp[7]<sp/>&amp;<sp/>AKM_OVERFLOW)</highlight></codeline>
<codeline lineno="2565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-3;</highlight></codeline>
<codeline lineno="2566"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2567"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>(tmp[2]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>tmp[1];</highlight></codeline>
<codeline lineno="2568"><highlight class="normal"><sp/><sp/><sp/><sp/>data[1]<sp/>=<sp/>(tmp[4]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>tmp[3];</highlight></codeline>
<codeline lineno="2569"><highlight class="normal"><sp/><sp/><sp/><sp/>data[2]<sp/>=<sp/>(tmp[6]<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>tmp[5];</highlight></codeline>
<codeline lineno="2570"><highlight class="normal"></highlight></codeline>
<codeline lineno="2571"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>((long)data[0]<sp/>*<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.mag_sens_adj[0])<sp/>&gt;&gt;<sp/>8;</highlight></codeline>
<codeline lineno="2572"><highlight class="normal"><sp/><sp/><sp/><sp/>data[1]<sp/>=<sp/>((long)data[1]<sp/>*<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.mag_sens_adj[1])<sp/>&gt;&gt;<sp/>8;</highlight></codeline>
<codeline lineno="2573"><highlight class="normal"><sp/><sp/><sp/><sp/>data[2]<sp/>=<sp/>((long)data[2]<sp/>*<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.mag_sens_adj[2])<sp/>&gt;&gt;<sp/>8;</highlight></codeline>
<codeline lineno="2574"><highlight class="normal"></highlight></codeline>
<codeline lineno="2575"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(timestamp)</highlight></codeline>
<codeline lineno="2576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3e6b6bc6d1cd2956353a31bfadd3c332" kindref="member">get_ms</ref>(timestamp);</highlight></codeline>
<codeline lineno="2577"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="2578"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2579"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2580"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2581"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2582"><highlight class="normal"></highlight></codeline>
<codeline lineno="2588" refid="group___d_r_i_v_e_r_s_1gade8589573d09e0f14b84130428f286df" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gade8589573d09e0f14b84130428f286df" kindref="member">mpu_get_compass_fsr</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>*fsr)</highlight></codeline>
<codeline lineno="2589"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2590"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>AK89xx_SECONDARY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2591"><highlight class="normal"><sp/><sp/><sp/><sp/>fsr[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;compass_fsr;</highlight></codeline>
<codeline lineno="2592"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="2593"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2594"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2595"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2596"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2597"><highlight class="normal"></highlight></codeline>
<codeline lineno="2642" refid="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga7d0b3259346898ccd1ba6ef78bf7df97" kindref="member">mpu_lp_motion_interrupt</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>thresh,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>time,</highlight></codeline>
<codeline lineno="2643"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>lpa_freq)</highlight></codeline>
<codeline lineno="2644"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2645"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>data[3];</highlight></codeline>
<codeline lineno="2646"><highlight class="normal"></highlight></codeline>
<codeline lineno="2647"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpa_freq)<sp/>{</highlight></codeline>
<codeline lineno="2648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>thresh_hw;</highlight></codeline>
<codeline lineno="2649"><highlight class="normal"></highlight></codeline>
<codeline lineno="2650"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>MPU6050</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>TODO:<sp/>Make<sp/>these<sp/>const/#defines.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>1LSb<sp/>=<sp/>32mg.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(thresh<sp/>&gt;<sp/>8160)</highlight></codeline>
<codeline lineno="2654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>thresh_hw<sp/>=<sp/>255;</highlight></codeline>
<codeline lineno="2655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(thresh<sp/>&lt;<sp/>32)</highlight></codeline>
<codeline lineno="2656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>thresh_hw<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="2657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>thresh_hw<sp/>=<sp/>thresh<sp/>&gt;&gt;<sp/>5;</highlight></codeline>
<codeline lineno="2659"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined<sp/>MPU6500</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>1LSb<sp/>=<sp/>4mg.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(thresh<sp/>&gt;<sp/>1020)</highlight></codeline>
<codeline lineno="2662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>thresh_hw<sp/>=<sp/>255;</highlight></codeline>
<codeline lineno="2663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(thresh<sp/>&lt;<sp/>4)</highlight></codeline>
<codeline lineno="2664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>thresh_hw<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="2665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>thresh_hw<sp/>=<sp/>thresh<sp/>&gt;&gt;<sp/>2;</highlight></codeline>
<codeline lineno="2667"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2668"><highlight class="normal"></highlight></codeline>
<codeline lineno="2669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!time)</highlight></codeline>
<codeline lineno="2670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Minimum<sp/>duration<sp/>must<sp/>be<sp/>1ms.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>time<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="2672"><highlight class="normal"></highlight></codeline>
<codeline lineno="2673"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>MPU6050</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpa_freq<sp/>&gt;<sp/>40)</highlight></codeline>
<codeline lineno="2675"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined<sp/>MPU6500</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpa_freq<sp/>&gt;<sp/>640)</highlight></codeline>
<codeline lineno="2677"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>At<sp/>this<sp/>point,<sp/>the<sp/>chip<sp/>has<sp/>not<sp/>been<sp/>re-configured,<sp/>so<sp/>the</highlight></codeline>
<codeline lineno="2679"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>function<sp/>can<sp/>safely<sp/>exit.</highlight></codeline>
<codeline lineno="2680"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2682"><highlight class="normal"></highlight></codeline>
<codeline lineno="2683"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga279cd5d5d78890357f2d42905d7471df" kindref="member">int_motion_only</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2684"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Store<sp/>current<sp/>settings<sp/>for<sp/>later.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2685"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga4783ed8aa79a3b5de798963819997c38" kindref="member">dmp_on</ref>)<sp/>{</highlight></codeline>
<codeline lineno="2686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga68ed20e6c9663cd7c50469329af8715f" kindref="member">mpu_set_dmp_state</ref>(0);</highlight></codeline>
<codeline lineno="2687"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga6461e400e336d2ccbc8c7d95ace9461d" kindref="member">dmp_on</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="2688"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2689"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga6461e400e336d2ccbc8c7d95ace9461d" kindref="member">dmp_on</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gaf973c32c73ba912ff512aab948fc31ca" kindref="member">mpu_get_gyro_fsr</ref>(&amp;<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>.<ref refid="group___d_r_i_v_e_r_s_1gae9614e4c92be9fc08f2aec7f34853fbc" kindref="member">gyro_fsr</ref>);</highlight></codeline>
<codeline lineno="2691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gab6087a15ee23db23b6aec41590329a60" kindref="member">mpu_get_accel_fsr</ref>(&amp;<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>.<ref refid="group___d_r_i_v_e_r_s_1gacfb901facda5ef8a02d47726db98e58e" kindref="member">accel_fsr</ref>);</highlight></codeline>
<codeline lineno="2692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gaa95c7e216dcb2d888e9796001ca555f8" kindref="member">mpu_get_lpf</ref>(&amp;<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac1a1eb41631eb71481d6d247d9c67d4a" kindref="member">lpf</ref>);</highlight></codeline>
<codeline lineno="2693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga2487dd551b701c1c7ed4d6335f02b2f1" kindref="member">mpu_get_sample_rate</ref>(&amp;<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga1cf6b7edfe37a51209897ccc448ec0e6" kindref="member">sample_rate</ref>);</highlight></codeline>
<codeline lineno="2694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>.<ref refid="group___d_r_i_v_e_r_s_1gae5416a4097b0cf39460df70094bc474d" kindref="member">sensors_on</ref><sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref>;</highlight></codeline>
<codeline lineno="2695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga093f11eb10b2639a4b9fe344ea348c54" kindref="member">mpu_get_fifo_config</ref>(&amp;<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga41501694a84bdf70e9c660852b653273" kindref="member">fifo_sensors</ref>);</highlight></codeline>
<codeline lineno="2696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2697"><highlight class="normal"></highlight></codeline>
<codeline lineno="2698"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>MPU6050</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Disable<sp/>hardware<sp/>interrupts<sp/>for<sp/>now.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gafd5ebff6b0179e1dce0b68c2272cae07" kindref="member">set_int_enable</ref>(0);</highlight></codeline>
<codeline lineno="2701"><highlight class="normal"></highlight></codeline>
<codeline lineno="2702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enter<sp/>full-power<sp/>accel-only<sp/>mode.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3a4fea75686ab7d2e68634e81ccac04c" kindref="member">mpu_lp_accel_mode</ref>(0);</highlight></codeline>
<codeline lineno="2704"><highlight class="normal"></highlight></codeline>
<codeline lineno="2705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Override<sp/>current<sp/>LPF<sp/>(and<sp/>HPF)<sp/>settings<sp/>to<sp/>obtain<sp/>a<sp/>valid<sp/>accel</highlight></codeline>
<codeline lineno="2706"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>reading.</highlight></codeline>
<codeline lineno="2707"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2708"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga91c762a5bd71461f7911dc49ee7696e9a9f0263fbbdccd3c5a18fcb65be278d24" kindref="member">INV_FILTER_256HZ_NOLPF2</ref>;</highlight></codeline>
<codeline lineno="2709"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga22eeac0bd77e7d99b3e15dda52f1bd08" kindref="member">lpf</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2710"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2711"><highlight class="normal"></highlight></codeline>
<codeline lineno="2712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>NOTE:<sp/>Digital<sp/>high<sp/>pass<sp/>filter<sp/>should<sp/>be<sp/>configured<sp/>here.<sp/>Since<sp/>this</highlight></codeline>
<codeline lineno="2713"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>driver<sp/>doesn&apos;t<sp/>modify<sp/>those<sp/>bits<sp/>anywhere,<sp/>they<sp/>should<sp/>already<sp/>be</highlight></codeline>
<codeline lineno="2714"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>cleared<sp/>by<sp/>default.</highlight></codeline>
<codeline lineno="2715"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2716"><highlight class="normal"></highlight></codeline>
<codeline lineno="2717"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Configure<sp/>the<sp/>device<sp/>to<sp/>send<sp/>motion<sp/>interrupts.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2718"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enable<sp/>motion<sp/>interrupt.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga6a8f2f7f3dd17bc05d9c6286d15c7ada" kindref="member">BIT_MOT_INT_EN</ref>;</highlight></codeline>
<codeline lineno="2720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga48b47844d4b0570e60aa6806faa59eae" kindref="member">int_enable</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>lp_int_restore;</highlight></codeline>
<codeline lineno="2722"><highlight class="normal"></highlight></codeline>
<codeline lineno="2723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>motion<sp/>interrupt<sp/>parameters.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2724"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>thresh_hw;</highlight></codeline>
<codeline lineno="2725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[1]<sp/>=<sp/>time;</highlight></codeline>
<codeline lineno="2726"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gab2065a062ea7d6179cd8407b2ab4d146" kindref="member">motion_thr</ref>,<sp/>2,<sp/>data))</highlight></codeline>
<codeline lineno="2727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>lp_int_restore;</highlight></codeline>
<codeline lineno="2728"><highlight class="normal"></highlight></codeline>
<codeline lineno="2729"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Force<sp/>hardware<sp/>to<sp/>&quot;lock&quot;<sp/>current<sp/>accel<sp/>sample.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2730"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gae36aca5baf9b6b7d74992aef00686d67" kindref="member">delay_ms</ref>(5);</highlight></codeline>
<codeline lineno="2731"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaf66873be1446ed552812e32d40eced61" kindref="member">accel_fsr</ref><sp/>&lt;&lt;<sp/>3)<sp/>|<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3c9c0234d4a71c9d35bb0da64ea867eb" kindref="member">BITS_HPF</ref>;</highlight></codeline>
<codeline lineno="2732"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gae93a446c54cc00bc7f11209d7af0025e" kindref="member">accel_cfg</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>lp_int_restore;</highlight></codeline>
<codeline lineno="2734"><highlight class="normal"></highlight></codeline>
<codeline lineno="2735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>up<sp/>LP<sp/>accel<sp/>mode.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2736"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga63e6f23af37626aa1498d8c248f259e7" kindref="member">BIT_LPA_CYCLE</ref>;</highlight></codeline>
<codeline lineno="2737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpa_freq<sp/>==<sp/>1)</highlight></codeline>
<codeline lineno="2738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[1]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7ab44c7d0127a9466747853533a537b567" kindref="member">INV_LPA_1_25HZ</ref>;</highlight></codeline>
<codeline lineno="2739"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpa_freq<sp/>&lt;=<sp/>5)</highlight></codeline>
<codeline lineno="2740"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[1]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a474cac76bff369dd656cc973207a1ca5" kindref="member">INV_LPA_5HZ</ref>;</highlight></codeline>
<codeline lineno="2741"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpa_freq<sp/>&lt;=<sp/>20)</highlight></codeline>
<codeline lineno="2742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[1]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7accaaf47c58dfe32cbf2ffa11fdb83108" kindref="member">INV_LPA_20HZ</ref>;</highlight></codeline>
<codeline lineno="2743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2744"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[1]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a798d2b86eafcf3fc7c7fe775f46cb4cb" kindref="member">INV_LPA_40HZ</ref>;</highlight></codeline>
<codeline lineno="2745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[1]<sp/>=<sp/>(data[1]<sp/>&lt;&lt;<sp/>6)<sp/>|<sp/><ref refid="group___d_r_i_v_e_r_s_1ga4e2ef22b94b90f9b83394dfe1f688ce4" kindref="member">BIT_STBY_XYZG</ref>;</highlight></codeline>
<codeline lineno="2746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaa01fb0872030e8e2932f8d1d257ea86a" kindref="member">pwr_mgmt_1</ref>,<sp/>2,<sp/>data))</highlight></codeline>
<codeline lineno="2747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>lp_int_restore;</highlight></codeline>
<codeline lineno="2748"><highlight class="normal"></highlight></codeline>
<codeline lineno="2749"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga279cd5d5d78890357f2d42905d7471df" kindref="member">int_motion_only</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="2750"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="2751"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined<sp/>MPU6500</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2752"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Disable<sp/>hardware<sp/>interrupts.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gafd5ebff6b0179e1dce0b68c2272cae07" kindref="member">set_int_enable</ref>(0);</highlight></codeline>
<codeline lineno="2754"><highlight class="normal"></highlight></codeline>
<codeline lineno="2755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enter<sp/>full-power<sp/>accel-only<sp/>mode,<sp/>no<sp/>FIFO/DMP.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2757"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[1]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2758"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[2]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga4e2ef22b94b90f9b83394dfe1f688ce4" kindref="member">BIT_STBY_XYZG</ref>;</highlight></codeline>
<codeline lineno="2759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga12505a7d8cd7c976e5571f27a6160d23" kindref="member">user_ctrl</ref>,<sp/>3,<sp/>data))</highlight></codeline>
<codeline lineno="2760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>lp_int_restore;</highlight></codeline>
<codeline lineno="2761"><highlight class="normal"></highlight></codeline>
<codeline lineno="2762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>motion<sp/>threshold.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2763"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>thresh_hw;</highlight></codeline>
<codeline lineno="2764"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gab2065a062ea7d6179cd8407b2ab4d146" kindref="member">motion_thr</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2765"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>lp_int_restore;</highlight></codeline>
<codeline lineno="2766"><highlight class="normal"></highlight></codeline>
<codeline lineno="2767"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>wake<sp/>frequency.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2768"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpa_freq<sp/>==<sp/>1)</highlight></codeline>
<codeline lineno="2769"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7ab44c7d0127a9466747853533a537b567" kindref="member">INV_LPA_1_25HZ</ref>;</highlight></codeline>
<codeline lineno="2770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpa_freq<sp/>==<sp/>2)</highlight></codeline>
<codeline lineno="2771"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>INV_LPA_2_5HZ;</highlight></codeline>
<codeline lineno="2772"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpa_freq<sp/>&lt;=<sp/>5)</highlight></codeline>
<codeline lineno="2773"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a474cac76bff369dd656cc973207a1ca5" kindref="member">INV_LPA_5HZ</ref>;</highlight></codeline>
<codeline lineno="2774"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpa_freq<sp/>&lt;=<sp/>10)</highlight></codeline>
<codeline lineno="2775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>INV_LPA_10HZ;</highlight></codeline>
<codeline lineno="2776"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpa_freq<sp/>&lt;=<sp/>20)</highlight></codeline>
<codeline lineno="2777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7accaaf47c58dfe32cbf2ffa11fdb83108" kindref="member">INV_LPA_20HZ</ref>;</highlight></codeline>
<codeline lineno="2778"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpa_freq<sp/>&lt;=<sp/>40)</highlight></codeline>
<codeline lineno="2779"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga23c3fcde795e5aa2b141232d490c9ca7a798d2b86eafcf3fc7c7fe775f46cb4cb" kindref="member">INV_LPA_40HZ</ref>;</highlight></codeline>
<codeline lineno="2780"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpa_freq<sp/>&lt;=<sp/>80)</highlight></codeline>
<codeline lineno="2781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>INV_LPA_80HZ;</highlight></codeline>
<codeline lineno="2782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpa_freq<sp/>&lt;=<sp/>160)</highlight></codeline>
<codeline lineno="2783"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>INV_LPA_160HZ;</highlight></codeline>
<codeline lineno="2784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lpa_freq<sp/>&lt;=<sp/>320)</highlight></codeline>
<codeline lineno="2785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>INV_LPA_320HZ;</highlight></codeline>
<codeline lineno="2786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>INV_LPA_640HZ;</highlight></codeline>
<codeline lineno="2788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;lp_accel_odr,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>lp_int_restore;</highlight></codeline>
<codeline lineno="2790"><highlight class="normal"></highlight></codeline>
<codeline lineno="2791"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enable<sp/>motion<sp/>interrupt<sp/>(MPU6500<sp/>version).<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga75b1479e451b747afb3b24cbc4df99f7" kindref="member">BITS_WOM_EN</ref>;</highlight></codeline>
<codeline lineno="2793"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;accel_intel,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2794"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>lp_int_restore;</highlight></codeline>
<codeline lineno="2795"><highlight class="normal"></highlight></codeline>
<codeline lineno="2796"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enable<sp/>cycle<sp/>mode.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2797"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga63e6f23af37626aa1498d8c248f259e7" kindref="member">BIT_LPA_CYCLE</ref>;</highlight></codeline>
<codeline lineno="2798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gaa01fb0872030e8e2932f8d1d257ea86a" kindref="member">pwr_mgmt_1</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2799"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>lp_int_restore;</highlight></codeline>
<codeline lineno="2800"><highlight class="normal"></highlight></codeline>
<codeline lineno="2801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enable<sp/>interrupt.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2802"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga6a8f2f7f3dd17bc05d9c6286d15c7ada" kindref="member">BIT_MOT_INT_EN</ref>;</highlight></codeline>
<codeline lineno="2803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1ga48b47844d4b0570e60aa6806faa59eae" kindref="member">int_enable</ref>,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2804"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>lp_int_restore;</highlight></codeline>
<codeline lineno="2805"><highlight class="normal"></highlight></codeline>
<codeline lineno="2806"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga279cd5d5d78890357f2d42905d7471df" kindref="member">int_motion_only</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="2807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="2808"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2809"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="2810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Don&apos;t<sp/>&quot;restore&quot;<sp/>the<sp/>previous<sp/>state<sp/>if<sp/>no<sp/>state<sp/>has<sp/>been<sp/>saved.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2811"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ii;</highlight></codeline>
<codeline lineno="2812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*cache_ptr<sp/>=<sp/>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*)&amp;<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>;</highlight></codeline>
<codeline lineno="2813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>for<sp/>(ii<sp/>=<sp/>0;<sp/>ii<sp/>&lt;<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>);<sp/>ii++)<sp/>{</highlight></codeline>
<codeline lineno="2814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cache_ptr[ii]<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="2815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>lp_int_restore;</highlight></codeline>
<codeline lineno="2816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>we<sp/>reach<sp/>this<sp/>point,<sp/>motion<sp/>interrupt<sp/>mode<sp/>hasn&apos;t<sp/>been<sp/>used<sp/>yet.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="2819"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2820"><highlight class="normal">lp_int_restore:</highlight></codeline>
<codeline lineno="2821"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>to<sp/>invalid<sp/>values<sp/>to<sp/>ensure<sp/>no<sp/>I2C<sp/>writes<sp/>are<sp/>skipped.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2822"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab45a727aeee17380828a3e20ccb375c2" kindref="member">gyro_fsr</ref><sp/>=<sp/>0xFF;</highlight></codeline>
<codeline lineno="2823"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaf66873be1446ed552812e32d40eced61" kindref="member">accel_fsr</ref><sp/>=<sp/>0xFF;</highlight></codeline>
<codeline lineno="2824"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga16ec8ca8298f62ac01419775377270fb" kindref="member">lpf</ref><sp/>=<sp/>0xFF;</highlight></codeline>
<codeline lineno="2825"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga2660470fcf7b53e2e832a397cbe6c354" kindref="member">sample_rate</ref><sp/>=<sp/>0xFFFF;</highlight></codeline>
<codeline lineno="2826"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gaa996fc14aa630e53823462baf460c13f" kindref="member">sensors</ref><sp/>=<sp/>0xFF;</highlight></codeline>
<codeline lineno="2827"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga88143c31b894bcd819c0e49b0ff267aa" kindref="member">fifo_enable</ref><sp/>=<sp/>0xFF;</highlight></codeline>
<codeline lineno="2828"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gab7bd5165d6e62cb0d814cf3401958445" kindref="member">clk_src</ref><sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1gga75570f009627c6f4ddfb2d936d81e207a01b240917a78674d3e387110a6a8f94c" kindref="member">INV_CLK_PLL</ref>;</highlight></codeline>
<codeline lineno="2829"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga6e77e7cc1cf6be5e8fdf617c5b4586d1" kindref="member">mpu_set_sensors</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>.<ref refid="group___d_r_i_v_e_r_s_1gae5416a4097b0cf39460df70094bc474d" kindref="member">sensors_on</ref>);</highlight></codeline>
<codeline lineno="2830"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gad09e6031c8677adc0b8a39b6deea8e27" kindref="member">mpu_set_gyro_fsr</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>.<ref refid="group___d_r_i_v_e_r_s_1gae9614e4c92be9fc08f2aec7f34853fbc" kindref="member">gyro_fsr</ref>);</highlight></codeline>
<codeline lineno="2831"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga2713a96af104cfb2ae8e0ed4c3718119" kindref="member">mpu_set_accel_fsr</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>.<ref refid="group___d_r_i_v_e_r_s_1gacfb901facda5ef8a02d47726db98e58e" kindref="member">accel_fsr</ref>);</highlight></codeline>
<codeline lineno="2832"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga5661a9dee25152166769910767a2a93d" kindref="member">mpu_set_lpf</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac1a1eb41631eb71481d6d247d9c67d4a" kindref="member">lpf</ref>);</highlight></codeline>
<codeline lineno="2833"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga0144d666a67a82888b8580002afe8b55" kindref="member">mpu_set_sample_rate</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga1cf6b7edfe37a51209897ccc448ec0e6" kindref="member">sample_rate</ref>);</highlight></codeline>
<codeline lineno="2834"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gababbdda287e1f19323489f90a0889dd7" kindref="member">mpu_configure_fifo</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga41501694a84bdf70e9c660852b653273" kindref="member">fifo_sensors</ref>);</highlight></codeline>
<codeline lineno="2835"><highlight class="normal"></highlight></codeline>
<codeline lineno="2836"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1gadf3b491a068e0225a080821516353bac" kindref="member">cache</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga6461e400e336d2ccbc8c7d95ace9461d" kindref="member">dmp_on</ref>)</highlight></codeline>
<codeline lineno="2837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga68ed20e6c9663cd7c50469329af8715f" kindref="member">mpu_set_dmp_state</ref>(1);</highlight></codeline>
<codeline lineno="2838"><highlight class="normal"></highlight></codeline>
<codeline lineno="2839"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>MPU6500</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2840"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Disable<sp/>motion<sp/>interrupt<sp/>(MPU6500<sp/>version).<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2841"><highlight class="normal"><sp/><sp/><sp/><sp/>data[0]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2842"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group___d_r_i_v_e_r_s_1gaa248719e0ea03e6601004693d74890e0" kindref="member">i2c_write</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1gac280ecd767872a9664737fce8dd8e07b" kindref="member">hw</ref>-&gt;<ref refid="group___d_r_i_v_e_r_s_1gacb482b60b4bc425c2990da9cf7cbdfee" kindref="member">addr</ref>,<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga458ad7d19aa1dc020276ec0d36951d0d" kindref="member">reg</ref>-&gt;accel_intel,<sp/>1,<sp/>data))</highlight></codeline>
<codeline lineno="2843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>lp_int_restore;</highlight></codeline>
<codeline lineno="2844"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2845"><highlight class="normal"></highlight></codeline>
<codeline lineno="2846"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3854b4875f6db26c2a1a707885f1fc78" kindref="member">st</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga8881b9ec8b8009515310301f33abdeaf" kindref="member">chip_cfg</ref>.<ref refid="group___d_r_i_v_e_r_s_1ga279cd5d5d78890357f2d42905d7471df" kindref="member">int_motion_only</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2847"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="2848"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2850"><highlight class="comment">//添加的代码部分<sp/></highlight></codeline>
<codeline lineno="2852"><highlight class="comment"></highlight><highlight class="comment">//本程序只供学习使用，未经作者许可，不得用于其它任何用途</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2853"><highlight class="normal"></highlight><highlight class="comment">//ALIENTEK精英STM32开发板V3</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2854"><highlight class="normal"></highlight><highlight class="comment">//MPU6050<sp/>DMP<sp/>驱动代码<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2855"><highlight class="normal"></highlight><highlight class="comment">//正点原子@ALIENTEK</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2856"><highlight class="normal"></highlight><highlight class="comment">//技术论坛:www.openedv.com</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2857"><highlight class="normal"></highlight><highlight class="comment">//创建日期:2015/1/17</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2858"><highlight class="normal"></highlight><highlight class="comment">//版本：V1.0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2859"><highlight class="normal"></highlight><highlight class="comment">//版权所有，盗版必究。</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2860"><highlight class="normal"></highlight><highlight class="comment">//Copyright(C)<sp/>广州市星翼电子科技有限公司<sp/>2009-2019</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2861"><highlight class="normal"></highlight><highlight class="comment">//All<sp/>rights<sp/>reserved<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="2863"><highlight class="comment"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2864"><highlight class="normal"></highlight><highlight class="comment">//q30格式,long转float时的除数.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2865" refid="group___d_r_i_v_e_r_s_1ga0c2ff73765f99e113d4f99826f9601e5" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>q30<sp/><sp/>1073741824.0f</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2866"><highlight class="normal"></highlight></codeline>
<codeline lineno="2867"><highlight class="normal"></highlight><highlight class="comment">//陀螺仪方向设置</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2868" refid="group___d_r_i_v_e_r_s_1gadcca9e3dfdbc53cc5509fabdaede02b8" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">signed</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gadcca9e3dfdbc53cc5509fabdaede02b8" kindref="member">gyro_orientation</ref>[9]<sp/>=<sp/>{<sp/>1,<sp/>0,<sp/>0,</highlight></codeline>
<codeline lineno="2869"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0,<sp/>1,<sp/>0,</highlight></codeline>
<codeline lineno="2870"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0,<sp/>0,<sp/>1};</highlight></codeline>
<codeline lineno="2871"><highlight class="normal"></highlight><highlight class="comment">//MPU6050自测试</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2872"><highlight class="normal"></highlight><highlight class="comment">//返回值:0,正常</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2873"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>其他,失败</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2874" refid="group___d_r_i_v_e_r_s_1gaff893f93277595387023c71d46b03c42" refkind="member"><highlight class="normal"><ref refid="varint_8h_1a92c50087ca0e64fa93fc59402c55f8ca" kindref="member">u8</ref><sp/><ref refid="group___d_r_i_v_e_r_s_1gaff893f93277595387023c71d46b03c42" kindref="member">run_self_test</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">){</highlight></codeline>
<codeline lineno="2875"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="2876"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//char<sp/>test_packet[4]<sp/>=<sp/>{0};</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2877"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>gyro[3],<sp/>accel[3];<sp/></highlight></codeline>
<codeline lineno="2878"><highlight class="normal"><sp/><sp/><sp/><sp/>result<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga3773dc98eb1ba15da0091ae75abcf62f" kindref="member">mpu_run_self_test</ref>(gyro,<sp/>accel);</highlight></codeline>
<codeline lineno="2879"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(result<sp/>==<sp/>0x3){</highlight></codeline>
<codeline lineno="2880"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Test<sp/>passed.<sp/>We<sp/>can<sp/>trust<sp/>the<sp/>gyro<sp/>data<sp/>here,<sp/>so<sp/>let&apos;s<sp/>push<sp/>it<sp/>down</highlight></codeline>
<codeline lineno="2881"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>to<sp/>the<sp/>DMP.</highlight></codeline>
<codeline lineno="2882"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2883"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>sens;</highlight></codeline>
<codeline lineno="2884"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>accel_sens;</highlight></codeline>
<codeline lineno="2885"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga023c0cc94aa8f162dc33b15048a49421" kindref="member">mpu_get_gyro_sens</ref>(&amp;sens);</highlight></codeline>
<codeline lineno="2886"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>gyro[0]<sp/>=<sp/>(long)(gyro[0]<sp/>*<sp/>sens);</highlight></codeline>
<codeline lineno="2887"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>gyro[1]<sp/>=<sp/>(long)(gyro[1]<sp/>*<sp/>sens);</highlight></codeline>
<codeline lineno="2888"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>gyro[2]<sp/>=<sp/>(long)(gyro[2]<sp/>*<sp/>sens);</highlight></codeline>
<codeline lineno="2889"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga4766e37ef95cbf0044c8f9594ed811d1" kindref="member">dmp_set_gyro_bias</ref>(gyro);</highlight></codeline>
<codeline lineno="2890"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1ga620408949052b96e856cad920f856583" kindref="member">mpu_get_accel_sens</ref>(&amp;accel_sens);</highlight></codeline>
<codeline lineno="2891"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel[0]<sp/>*=<sp/>accel_sens;</highlight></codeline>
<codeline lineno="2892"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel[1]<sp/>*=<sp/>accel_sens;</highlight></codeline>
<codeline lineno="2893"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accel[2]<sp/>*=<sp/>accel_sens;</highlight></codeline>
<codeline lineno="2894"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gafbd714aee6086836f70aaea847771669" kindref="member">dmp_set_accel_bias</ref>(accel);</highlight></codeline>
<codeline lineno="2895"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="2896"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>1;}</highlight></codeline>
<codeline lineno="2897"><highlight class="normal"></highlight><highlight class="comment">//陀螺仪方向控制</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2898" refid="group___d_r_i_v_e_r_s_1ga3ff6037a69f37bb6174355936ad67ef3" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga3ff6037a69f37bb6174355936ad67ef3" kindref="member">inv_orientation_matrix_to_scalar</ref>(</highlight></codeline>
<codeline lineno="2899"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">signed</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*mtx){</highlight></codeline>
<codeline lineno="2900"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>scalar;<sp/></highlight></codeline>
<codeline lineno="2901"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2902"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>XYZ<sp/><sp/>010_001_000<sp/>Identity<sp/>Matrix</highlight></codeline>
<codeline lineno="2903"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>XZY<sp/><sp/>001_010_000</highlight></codeline>
<codeline lineno="2904"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>YXZ<sp/><sp/>010_000_001</highlight></codeline>
<codeline lineno="2905"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>YZX<sp/><sp/>000_010_001</highlight></codeline>
<codeline lineno="2906"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ZXY<sp/><sp/>001_000_010</highlight></codeline>
<codeline lineno="2907"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ZYX<sp/><sp/>000_001_010</highlight></codeline>
<codeline lineno="2908"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2909"><highlight class="normal"><sp/><sp/><sp/><sp/>scalar<sp/>=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga2b58dae1c0567f3f9f6dcbfb07476de7" kindref="member">inv_row_2_scale</ref>(mtx);</highlight></codeline>
<codeline lineno="2910"><highlight class="normal"><sp/><sp/><sp/><sp/>scalar<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga2b58dae1c0567f3f9f6dcbfb07476de7" kindref="member">inv_row_2_scale</ref>(mtx<sp/>+<sp/>3)<sp/>&lt;&lt;<sp/>3;</highlight></codeline>
<codeline lineno="2911"><highlight class="normal"><sp/><sp/><sp/><sp/>scalar<sp/>|=<sp/><ref refid="group___d_r_i_v_e_r_s_1ga2b58dae1c0567f3f9f6dcbfb07476de7" kindref="member">inv_row_2_scale</ref>(mtx<sp/>+<sp/>6)<sp/>&lt;&lt;<sp/>6;</highlight></codeline>
<codeline lineno="2912"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>scalar;}</highlight></codeline>
<codeline lineno="2913"><highlight class="normal"></highlight><highlight class="comment">//方向转换</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2914" refid="group___d_r_i_v_e_r_s_1ga2b58dae1c0567f3f9f6dcbfb07476de7" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1ga2b58dae1c0567f3f9f6dcbfb07476de7" kindref="member">inv_row_2_scale</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">signed</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*row){</highlight></codeline>
<codeline lineno="2915"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>b;</highlight></codeline>
<codeline lineno="2916"><highlight class="normal"></highlight></codeline>
<codeline lineno="2917"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(row[0]<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="2918"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="2919"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(row[0]<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="2920"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b<sp/>=<sp/>4;</highlight></codeline>
<codeline lineno="2921"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(row[1]<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="2922"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="2923"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(row[1]<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="2924"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b<sp/>=<sp/>5;</highlight></codeline>
<codeline lineno="2925"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(row[2]<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="2926"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b<sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="2927"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(row[2]<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="2928"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b<sp/>=<sp/>6;</highlight></codeline>
<codeline lineno="2929"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2930"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b<sp/>=<sp/>7;<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>error</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2931"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>b;}</highlight></codeline>
<codeline lineno="2932"><highlight class="normal"></highlight><highlight class="comment">//空函数,未用到.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2933" refid="group___d_r_i_v_e_r_s_1gafa3071c8321f6e8dd2036be8a1e57ad0" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group___d_r_i_v_e_r_s_1gafa3071c8321f6e8dd2036be8a1e57ad0" kindref="member">mget_ms</ref>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*time){}</highlight></codeline>
<codeline lineno="2934"><highlight class="normal"></highlight><highlight class="comment">//mpu6050,dmp初始化</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2935"><highlight class="normal"></highlight><highlight class="comment">//返回值:0,正常</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2936"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>其他,失败</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2937" refid="group___d_r_i_v_e_r_s_1gafac8fcbf24cfa1b69737e02238580f3a" refkind="member"><highlight class="normal"><ref refid="varint_8h_1a92c50087ca0e64fa93fc59402c55f8ca" kindref="member">u8</ref><sp/><ref refid="group___d_r_i_v_e_r_s_1gafac8fcbf24cfa1b69737e02238580f3a" kindref="member">mpu_dmp_init</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2938"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2939"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="varint_8h_1a92c50087ca0e64fa93fc59402c55f8ca" kindref="member">u8</ref><sp/>res=0;</highlight></codeline>
<codeline lineno="2940"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group___d_r_i_v_e_r_s_1gac48a36b51e23bc4191ec13916bbb9d0b" kindref="member">mpu_init</ref>()==0)<sp/><sp/><sp/></highlight><highlight class="comment">//初始化MPU6050</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2941"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2942"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>res=<ref refid="group___d_r_i_v_e_r_s_1ga6e77e7cc1cf6be5e8fdf617c5b4586d1" kindref="member">mpu_set_sensors</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3fdc30f9c0a26c2c4e2bb88921f91629" kindref="member">INV_XYZ_GYRO</ref>|<ref refid="group___d_r_i_v_e_r_s_1gaa03f025a17ed491e70b88274e89c75c5" kindref="member">INV_XYZ_ACCEL</ref>);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//设置所需要的传感器</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2943"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(res)</highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>1;<sp/></highlight></codeline>
<codeline lineno="2944"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>res=<ref refid="group___d_r_i_v_e_r_s_1gababbdda287e1f19323489f90a0889dd7" kindref="member">mpu_configure_fifo</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3fdc30f9c0a26c2c4e2bb88921f91629" kindref="member">INV_XYZ_GYRO</ref>|<ref refid="group___d_r_i_v_e_r_s_1gaa03f025a17ed491e70b88274e89c75c5" kindref="member">INV_XYZ_ACCEL</ref>);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//设置FIFO</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2945"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(res)</highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>2;<sp/></highlight></codeline>
<codeline lineno="2946"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>res=<ref refid="group___d_r_i_v_e_r_s_1ga0144d666a67a82888b8580002afe8b55" kindref="member">mpu_set_sample_rate</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga292d717406e906831952ce46612fe4cd" kindref="member">DEFAULT_MPU_HZ</ref>);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//设置采样率</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2947"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(res)</highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>3;<sp/></highlight></codeline>
<codeline lineno="2948"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>res=<ref refid="group___d_r_i_v_e_r_s_1ga66626a842452f444e9af29cb0d2c6150" kindref="member">dmp_load_motion_driver_firmware</ref>();<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//加载dmp固件</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2949"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(res)</highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>4;<sp/></highlight></codeline>
<codeline lineno="2950"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>res=<ref refid="group___d_r_i_v_e_r_s_1ga6cb5ff144ce6e1546f00809de8bb24a4" kindref="member">dmp_set_orientation</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga3ff6037a69f37bb6174355936ad67ef3" kindref="member">inv_orientation_matrix_to_scalar</ref>(<ref refid="group___d_r_i_v_e_r_s_1gadcca9e3dfdbc53cc5509fabdaede02b8" kindref="member">gyro_orientation</ref>));</highlight><highlight class="comment">//设置陀螺仪方向</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2951"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(res)</highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>5;<sp/></highlight></codeline>
<codeline lineno="2952"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>res=<ref refid="group___d_r_i_v_e_r_s_1ga70c485bdfa30515e5b869b081192caa1" kindref="member">dmp_enable_feature</ref>(<ref refid="group___d_r_i_v_e_r_s_1gae879a3c9729f9e1be5e6d7c9211c69c0" kindref="member">DMP_FEATURE_6X_LP_QUAT</ref>|<ref refid="group___d_r_i_v_e_r_s_1ga87fac39cf95e2c56afdf507a986fa00b" kindref="member">DMP_FEATURE_TAP</ref>|<sp/><sp/></highlight><highlight class="comment">//设置dmp功能</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2953"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gaf2b250fc928390d562f7bd80300ce419" kindref="member">DMP_FEATURE_ANDROID_ORIENT</ref>|<ref refid="group___d_r_i_v_e_r_s_1ga9eeb257febe4a305df7ad4cf31dc2755" kindref="member">DMP_FEATURE_SEND_RAW_ACCEL</ref>|<ref refid="group___d_r_i_v_e_r_s_1ga40462c6fd55b04b2f79723dd737ee795" kindref="member">DMP_FEATURE_SEND_CAL_GYRO</ref>|</highlight></codeline>
<codeline lineno="2954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group___d_r_i_v_e_r_s_1gaaf0ac890c1f83106c08b722f1e865fdb" kindref="member">DMP_FEATURE_GYRO_CAL</ref>);</highlight></codeline>
<codeline lineno="2955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(res)</highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>6;<sp/></highlight></codeline>
<codeline lineno="2956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>res=<ref refid="group___d_r_i_v_e_r_s_1ga5399728fd572a7694af20286cc9d4121" kindref="member">dmp_set_fifo_rate</ref>(<ref refid="group___d_r_i_v_e_r_s_1ga292d717406e906831952ce46612fe4cd" kindref="member">DEFAULT_MPU_HZ</ref>);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//设置DMP输出速率(最大不超过200Hz)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(res)</highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>7;<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="2958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>res=<ref refid="group___d_r_i_v_e_r_s_1gaff893f93277595387023c71d46b03c42" kindref="member">run_self_test</ref>();<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//自检</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2959"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(res)</highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>8;<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="2960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>res=<ref refid="group___d_r_i_v_e_r_s_1ga68ed20e6c9663cd7c50469329af8715f" kindref="member">mpu_set_dmp_state</ref>(1);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//使能DMP</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(res)</highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>9;<sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="2962"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>10;</highlight></codeline>
<codeline lineno="2963"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;}</highlight></codeline>
<codeline lineno="2964"><highlight class="normal"></highlight><highlight class="comment">//得到dmp处理后的数据(注意,本函数需要比较多堆栈,局部变量有点多)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2965"><highlight class="normal"></highlight><highlight class="comment">//pitch:俯仰角<sp/>精度:0.1°<sp/><sp/><sp/>范围:-90.0°<sp/>&lt;---&gt;<sp/>+90.0°</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2966"><highlight class="normal"></highlight><highlight class="comment">//roll:横滚角<sp/><sp/>精度:0.1°<sp/><sp/><sp/>范围:-180.0°&lt;---&gt;<sp/>+180.0°</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2967"><highlight class="normal"></highlight><highlight class="comment">//yaw:航向角<sp/><sp/><sp/>精度:0.1°<sp/><sp/><sp/>范围:-180.0°&lt;---&gt;<sp/>+180.0°</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2968"><highlight class="normal"></highlight><highlight class="comment">//返回值:0,正常</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2969"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/>其他,失败</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2970" refid="group___d_r_i_v_e_r_s_1gacb825f2fd99c3044d012a9b25608cc18" refkind="member"><highlight class="normal"><ref refid="varint_8h_1a92c50087ca0e64fa93fc59402c55f8ca" kindref="member">u8</ref><sp/><ref refid="group___d_r_i_v_e_r_s_1gacb825f2fd99c3044d012a9b25608cc18" kindref="member">mpu_dmp_get_data</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*pitch,</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*roll,</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>*yaw){</highlight></codeline>
<codeline lineno="2971"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>q0=1.0f,q1=0.0f,q2=0.0f,q3=0.0f;</highlight></codeline>
<codeline lineno="2972"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>sensor_timestamp;</highlight></codeline>
<codeline lineno="2973"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>gyro[3],<sp/>accel[3],<sp/>sensors;</highlight></codeline>
<codeline lineno="2974"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>more;</highlight></codeline>
<codeline lineno="2975"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>quat[4];<sp/></highlight></codeline>
<codeline lineno="2976"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group___d_r_i_v_e_r_s_1ga02db5f25359abe84be002c543cdc3803" kindref="member">dmp_read_fifo</ref>(gyro,<sp/>accel,<sp/>quat,<sp/>&amp;sensor_timestamp,<sp/>&amp;sensors,&amp;more))</highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>1;<sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="2977"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Gyro<sp/>and<sp/>accel<sp/>data<sp/>are<sp/>written<sp/>to<sp/>the<sp/>FIFO<sp/>by<sp/>the<sp/>DMP<sp/>in<sp/>chip<sp/>frame<sp/>and<sp/>hardware<sp/>units.</highlight></codeline>
<codeline lineno="2978"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>This<sp/>behavior<sp/>is<sp/>convenient<sp/>because<sp/>it<sp/>keeps<sp/>the<sp/>gyro<sp/>and<sp/>accel<sp/>outputs<sp/>of<sp/>dmp_read_fifo<sp/>and<sp/>mpu_read_fifo<sp/>consistent.</highlight></codeline>
<codeline lineno="2979"><highlight class="comment"><sp/><sp/><sp/><sp/>**/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2980"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*if<sp/>(sensors<sp/>&amp;<sp/>INV_XYZ_GYRO<sp/>)</highlight></codeline>
<codeline lineno="2981"><highlight class="comment"><sp/><sp/><sp/><sp/>send_packet(PACKET_TYPE_GYRO,<sp/>gyro);</highlight></codeline>
<codeline lineno="2982"><highlight class="comment"><sp/><sp/><sp/><sp/>if<sp/>(sensors<sp/>&amp;<sp/>INV_XYZ_ACCEL)</highlight></codeline>
<codeline lineno="2983"><highlight class="comment"><sp/><sp/><sp/><sp/>send_packet(PACKET_TYPE_ACCEL,<sp/>accel);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2984"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Unlike<sp/>gyro<sp/>and<sp/>accel,<sp/>quaternions<sp/>are<sp/>written<sp/>to<sp/>the<sp/>FIFO<sp/>in<sp/>the<sp/>body<sp/>frame,<sp/>q30.</highlight></codeline>
<codeline lineno="2985"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>The<sp/>orientation<sp/>is<sp/>set<sp/>by<sp/>the<sp/>scalar<sp/>passed<sp/>to<sp/>dmp_set_orientation<sp/>during<sp/>initialization.<sp/></highlight></codeline>
<codeline lineno="2986"><highlight class="comment"><sp/><sp/><sp/><sp/>**/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2987"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(sensors&amp;<ref refid="group___d_r_i_v_e_r_s_1ga3d79cffe845a796a27d03432a1f2ade0" kindref="member">INV_WXYZ_QUAT</ref>)<sp/></highlight></codeline>
<codeline lineno="2988"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2989"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q0<sp/>=<sp/>quat[0]<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga0c2ff73765f99e113d4f99826f9601e5" kindref="member">q30</ref>;<sp/></highlight><highlight class="comment">//q30格式转换为浮点数</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2990"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q1<sp/>=<sp/>quat[1]<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga0c2ff73765f99e113d4f99826f9601e5" kindref="member">q30</ref>;</highlight></codeline>
<codeline lineno="2991"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q2<sp/>=<sp/>quat[2]<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga0c2ff73765f99e113d4f99826f9601e5" kindref="member">q30</ref>;</highlight></codeline>
<codeline lineno="2992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q3<sp/>=<sp/>quat[3]<sp/>/<sp/><ref refid="group___d_r_i_v_e_r_s_1ga0c2ff73765f99e113d4f99826f9601e5" kindref="member">q30</ref>;<sp/></highlight></codeline>
<codeline lineno="2993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//计算得到俯仰角/横滚角/航向角</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*pitch<sp/>=<sp/>asin(-2<sp/>*<sp/>q1<sp/>*<sp/>q3<sp/>+<sp/>2<sp/>*<sp/>q0*<sp/>q2)*<sp/>57.3;<sp/></highlight><highlight class="comment">//<sp/>pitch</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2995"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*roll<sp/><sp/>=<sp/>atan2(2<sp/>*<sp/>q2<sp/>*<sp/>q3<sp/>+<sp/>2<sp/>*<sp/>q0<sp/>*<sp/>q1,<sp/>-2<sp/>*<sp/>q1<sp/>*<sp/>q1<sp/>-<sp/>2<sp/>*<sp/>q2*<sp/>q2<sp/>+<sp/>1)*<sp/>57.3;<sp/></highlight><highlight class="comment">//<sp/>roll</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*yaw<sp/><sp/><sp/>=<sp/>atan2(2*(q1*q2<sp/>+<sp/>q0*q3),q0*q0+q1*q1-q2*q2-q3*q3)<sp/>*<sp/>57.3;<sp/><sp/><sp/></highlight><highlight class="comment">//yaw</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2997"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>2;</highlight></codeline>
<codeline lineno="2998"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="2999"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="D:/gitt/MicrochipFor32/bsp_MPU6050/inv_mpu.c"/>
  </compounddef>
</doxygen>
